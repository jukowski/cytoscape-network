/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const t=globalThis,n=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,r=Symbol(),e=new WeakMap;let i=class{constructor(t,n,e){if(this._$cssResult$=!0,e!==r)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=n}get styleSheet(){let t=this.o;const r=this.t;if(n&&void 0===t){const n=void 0!==r&&1===r.length;n&&(t=e.get(r)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),n&&e.set(r,t))}return t}toString(){return this.cssText}};const a=(t,...n)=>{const e=1===t.length?t[0]:n.reduce(((n,r,e)=>n+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+t[e+1]),t[0]);return new i(e,t,r)},o=n?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let n="";for(const r of t.cssRules)n+=r.cssText;return(t=>new i("string"==typeof t?t:t+"",void 0,r))(n)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,{is:u,defineProperty:s,getOwnPropertyDescriptor:f,getOwnPropertyNames:c,getOwnPropertySymbols:l,getPrototypeOf:h}=Object,v=globalThis,d=v.trustedTypes,g=d?d.emptyScript:"",p=v.reactiveElementPolyfillSupport,y=(t,n)=>t,m={toAttribute(t,n){switch(n){case Boolean:t=t?g:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,n){let r=t;switch(n){case Boolean:r=null!==t;break;case Number:r=null===t?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch(t){r=null}}return r}},b=(t,n)=>!u(t,n),w={attribute:!0,type:String,converter:m,reflect:!1,hasChanged:b};Symbol.metadata??=Symbol("metadata"),v.litPropertyMetadata??=new WeakMap;class x extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,n=w){if(n.state&&(n.attribute=!1),this._$Ei(),this.elementProperties.set(t,n),!n.noAccessor){const r=Symbol(),e=this.getPropertyDescriptor(t,r,n);void 0!==e&&s(this.prototype,t,e)}}static getPropertyDescriptor(t,n,r){const{get:e,set:i}=f(this.prototype,t)??{get(){return this[n]},set(t){this[n]=t}};return{get(){return e?.call(this)},set(n){const a=e?.call(this);i.call(this,n),this.requestUpdate(t,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??w}static _$Ei(){if(this.hasOwnProperty(y("elementProperties")))return;const t=h(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(y("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(y("properties"))){const t=this.properties,n=[...c(t),...l(t)];for(const r of n)this.createProperty(r,t[r])}const t=this[Symbol.metadata];if(null!==t){const n=litPropertyMetadata.get(t);if(void 0!==n)for(const[t,r]of n)this.elementProperties.set(t,r)}this._$Eh=new Map;for(const[t,n]of this.elementProperties){const r=this._$Eu(t,n);void 0!==r&&this._$Eh.set(r,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const n=[];if(Array.isArray(t)){const r=new Set(t.flat(1/0).reverse());for(const t of r)n.unshift(o(t))}else void 0!==t&&n.push(o(t));return n}static _$Eu(t,n){const r=n.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(t.set(r,this[r]),delete this[r]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const r=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((r,e)=>{if(n)r.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const n of e){const e=document.createElement("style"),i=t.litNonce;void 0!==i&&e.setAttribute("nonce",i),e.textContent=n.cssText,r.appendChild(e)}})(r,this.constructor.elementStyles),r}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()))}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()))}attributeChangedCallback(t,n,r){this._$AK(t,r)}_$EC(t,n){const r=this.constructor.elementProperties.get(t),e=this.constructor._$Eu(t,r);if(void 0!==e&&!0===r.reflect){const i=(void 0!==r.converter?.toAttribute?r.converter:m).toAttribute(n,r.type);this._$Em=t,null==i?this.removeAttribute(e):this.setAttribute(e,i),this._$Em=null}}_$AK(t,n){const r=this.constructor,e=r._$Eh.get(t);if(void 0!==e&&this._$Em!==e){const t=r.getPropertyOptions(e),i="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:m;this._$Em=e,this[e]=i.fromAttribute(n,t.type),this._$Em=null}}requestUpdate(t,n,r){if(void 0!==t){if(r??=this.constructor.getPropertyOptions(t),!(r.hasChanged??b)(this[t],n))return;this.P(t,n,r)}!1===this.isUpdatePending&&(this._$ES=this._$ET())}P(t,n,r){this._$AL.has(t)||this._$AL.set(t,n),!0===r.reflect&&this._$Em!==t&&(this._$Ej??=new Set).add(t)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,n]of this._$Ep)this[t]=n;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[n,r]of t)!0!==r.wrapped||this._$AL.has(n)||void 0===this[n]||this.P(n,this[n],r)}let t=!1;const n=this._$AL;try{t=this.shouldUpdate(n),t?(this.willUpdate(n),this._$EO?.forEach((t=>t.hostUpdate?.())),this.update(n)):this._$EU()}catch(n){throw t=!1,this._$EU(),n}t&&this._$AE(n)}willUpdate(t){}_$AE(t){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Ej&&=this._$Ej.forEach((t=>this._$EC(t,this[t]))),this._$EU()}updated(t){}firstUpdated(t){}}x.elementStyles=[],x.shadowRootOptions={mode:"open"},x[y("elementProperties")]=new Map,x[y("finalized")]=new Map,p?.({ReactiveElement:x}),(v.reactiveElementVersions??=[]).push("2.0.4");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const M=globalThis,k=M.trustedTypes,E=k?k.createPolicy("lit-html",{createHTML:t=>t}):void 0,S="$lit$",A=`lit$${Math.random().toFixed(9).slice(2)}$`,z="?"+A,B=`<${z}>`,C=document,T=()=>C.createComment(""),O=t=>null===t||"object"!=typeof t&&"function"!=typeof t,P=Array.isArray,N="[ \t\n\f\r]",j=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,F=/-->/g,D=/>/g,I=RegExp(`>|${N}(?:([^\\s"'>=/]+)(${N}*=${N}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),$=/'/g,L=/"/g,R=/^(?:script|style|textarea|title)$/i,_=(t=>(n,...r)=>({_$litType$:t,strings:n,values:r}))(1),q=Symbol.for("lit-noChange"),V=Symbol.for("lit-nothing"),U=new WeakMap,W=C.createTreeWalker(C,129);function Z(t,n){if(!P(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==E?E.createHTML(n):n}const H=(t,n)=>{const r=t.length-1,e=[];let i,a=2===n?"<svg>":3===n?"<math>":"",o=j;for(let n=0;n<r;n++){const r=t[n];let u,s,f=-1,c=0;for(;c<r.length&&(o.lastIndex=c,s=o.exec(r),null!==s);)c=o.lastIndex,o===j?"!--"===s[1]?o=F:void 0!==s[1]?o=D:void 0!==s[2]?(R.test(s[2])&&(i=RegExp("</"+s[2],"g")),o=I):void 0!==s[3]&&(o=I):o===I?">"===s[0]?(o=i??j,f=-1):void 0===s[1]?f=-2:(f=o.lastIndex-s[2].length,u=s[1],o=void 0===s[3]?I:'"'===s[3]?L:$):o===L||o===$?o=I:o===F||o===D?o=j:(o=I,i=void 0);const l=o===I&&t[n+1].startsWith("/>")?" ":"";a+=o===j?r+B:f>=0?(e.push(u),r.slice(0,f)+S+r.slice(f)+A+l):r+A+(-2===f?n:l)}return[Z(t,a+(t[r]||"<?>")+(2===n?"</svg>":3===n?"</math>":"")),e]};class K{constructor({strings:t,_$litType$:n},r){let e;this.parts=[];let i=0,a=0;const o=t.length-1,u=this.parts,[s,f]=H(t,n);if(this.el=K.createElement(s,r),W.currentNode=this.el.content,2===n||3===n){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(e=W.nextNode())&&u.length<o;){if(1===e.nodeType){if(e.hasAttributes())for(const t of e.getAttributeNames())if(t.endsWith(S)){const n=f[a++],r=e.getAttribute(t).split(A),o=/([.?@])?(.*)/.exec(n);u.push({type:1,index:i,name:o[2],strings:r,ctor:"."===o[1]?J:"?"===o[1]?tt:"@"===o[1]?nt:Q}),e.removeAttribute(t)}else t.startsWith(A)&&(u.push({type:6,index:i}),e.removeAttribute(t));if(R.test(e.tagName)){const t=e.textContent.split(A),n=t.length-1;if(n>0){e.textContent=k?k.emptyScript:"";for(let r=0;r<n;r++)e.append(t[r],T()),W.nextNode(),u.push({type:2,index:++i});e.append(t[n],T())}}}else if(8===e.nodeType)if(e.data===z)u.push({type:2,index:i});else{let t=-1;for(;-1!==(t=e.data.indexOf(A,t+1));)u.push({type:7,index:i}),t+=A.length-1}i++}}static createElement(t,n){const r=C.createElement("template");return r.innerHTML=t,r}}function G(t,n,r=t,e){if(n===q)return n;let i=void 0!==e?r._$Co?.[e]:r._$Cl;const a=O(n)?void 0:n._$litDirective$;return i?.constructor!==a&&(i?._$AO?.(!1),void 0===a?i=void 0:(i=new a(t),i._$AT(t,r,e)),void 0!==e?(r._$Co??=[])[e]=i:r._$Cl=i),void 0!==i&&(n=G(t,i._$AS(t,n.values),i,e)),n}class Y{constructor(t,n){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:n},parts:r}=this._$AD,e=(t?.creationScope??C).importNode(n,!0);W.currentNode=e;let i=W.nextNode(),a=0,o=0,u=r[0];for(;void 0!==u;){if(a===u.index){let n;2===u.type?n=new X(i,i.nextSibling,this,t):1===u.type?n=new u.ctor(i,u.name,u.strings,this,t):6===u.type&&(n=new rt(i,this,t)),this._$AV.push(n),u=r[++o]}a!==u?.index&&(i=W.nextNode(),a++)}return W.currentNode=C,e}p(t){let n=0;for(const r of this._$AV)void 0!==r&&(void 0!==r.strings?(r._$AI(t,r,n),n+=r.strings.length-2):r._$AI(t[n])),n++}}class X{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,n,r,e){this.type=2,this._$AH=V,this._$AN=void 0,this._$AA=t,this._$AB=n,this._$AM=r,this.options=e,this._$Cv=e?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const n=this._$AM;return void 0!==n&&11===t?.nodeType&&(t=n.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,n=this){t=G(this,t,n),O(t)?t===V||null==t||""===t?(this._$AH!==V&&this._$AR(),this._$AH=V):t!==this._$AH&&t!==q&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):(t=>P(t)||"function"==typeof t?.[Symbol.iterator])(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==V&&O(this._$AH)?this._$AA.nextSibling.data=t:this.T(C.createTextNode(t)),this._$AH=t}$(t){const{values:n,_$litType$:r}=t,e="number"==typeof r?this._$AC(t):(void 0===r.el&&(r.el=K.createElement(Z(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===e)this._$AH.p(n);else{const t=new Y(e,this),r=t.u(this.options);t.p(n),this.T(r),this._$AH=t}}_$AC(t){let n=U.get(t.strings);return void 0===n&&U.set(t.strings,n=new K(t)),n}k(t){P(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,e=0;for(const i of t)e===n.length?n.push(r=new X(this.O(T()),this.O(T()),this,this.options)):r=n[e],r._$AI(i),e++;e<n.length&&(this._$AR(r&&r._$AB.nextSibling,e),n.length=e)}_$AR(t=this._$AA.nextSibling,n){for(this._$AP?.(!1,!0,n);t&&t!==this._$AB;){const n=t.nextSibling;t.remove(),t=n}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class Q{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,n,r,e,i){this.type=1,this._$AH=V,this._$AN=void 0,this.element=t,this.name=n,this._$AM=e,this.options=i,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=V}_$AI(t,n=this,r,e){const i=this.strings;let a=!1;if(void 0===i)t=G(this,t,n,0),a=!O(t)||t!==this._$AH&&t!==q,a&&(this._$AH=t);else{const e=t;let o,u;for(t=i[0],o=0;o<i.length-1;o++)u=G(this,e[r+o],n,o),u===q&&(u=this._$AH[o]),a||=!O(u)||u!==this._$AH[o],u===V?t=V:t!==V&&(t+=(u??"")+i[o+1]),this._$AH[o]=u}a&&!e&&this.j(t)}j(t){t===V?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class J extends Q{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===V?void 0:t}}class tt extends Q{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==V)}}class nt extends Q{constructor(t,n,r,e,i){super(t,n,r,e,i),this.type=5}_$AI(t,n=this){if((t=G(this,t,n,0)??V)===q)return;const r=this._$AH,e=t===V&&r!==V||t.capture!==r.capture||t.once!==r.once||t.passive!==r.passive,i=t!==V&&(r===V||e);e&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class rt{constructor(t,n,r){this.element=t,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(t){G(this,t)}}const et=M.litHtmlPolyfillSupport;et?.(K,X),(M.litHtmlVersions??=[]).push("3.2.1");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
class it extends x{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,n,r)=>{const e=r?.renderBefore??n;let i=e._$litPart$;if(void 0===i){const t=r?.renderBefore??null;e._$litPart$=i=new X(n.insertBefore(T(),t),t,void 0,r??{})}return i._$AI(t),i})(n,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return q}}it._$litElement$=!0,it.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:it});const at=globalThis.litElementPolyfillSupport;function ot(t){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ot(t)}function ut(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function st(t,n,r){return n&&function(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ft(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function ct(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var e,i,a=[],o=!0,u=!1;try{for(r=r.call(t);!(o=(e=r.next()).done)&&(a.push(e.value),!n||a.length!==n);o=!0);}catch(t){u=!0,i=t}finally{try{o||null==r.return||r.return()}finally{if(u)throw i}}return a}(t,n)||lt(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(t,n){if(t){if("string"==typeof t)return ht(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ht(t,n):void 0}}function ht(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}function vt(t,n){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=lt(t))||n){r&&(t=r);var e=0,i=function(){};return{s:i,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}at?.({LitElement:it}),(globalThis.litElementVersions??=[]).push("4.1.1");var dt="undefined"==typeof window?null:window,gt=dt?dt.navigator:null;dt&&dt.document;var pt=ot(""),yt=ot({}),mt=ot((function(){})),bt="undefined"==typeof HTMLElement?"undefined":ot(HTMLElement),wt=function(t){return t&&t.instanceString&&Mt(t.instanceString)?t.instanceString():null},xt=function(t){return null!=t&&ot(t)==pt},Mt=function(t){return null!=t&&ot(t)===mt},kt=function(t){return!zt(t)&&(Array.isArray?Array.isArray(t):null!=t&&t instanceof Array)},Et=function(t){return null!=t&&ot(t)===yt&&!kt(t)&&t.constructor===Object},St=function(t){return null!=t&&ot(t)===ot(1)&&!isNaN(t)},At=function(t){return"undefined"===bt?void 0:null!=t&&t instanceof HTMLElement},zt=function(t){return Bt(t)||Ct(t)},Bt=function(t){return"collection"===wt(t)&&t._private.single},Ct=function(t){return"collection"===wt(t)&&!t._private.single},Tt=function(t){return"core"===wt(t)},Ot=function(t){return"stylesheet"===wt(t)},Pt=function(t){return null==t||!(""!==t&&!t.match(/^\s+$/))},Nt=function(t){return function(t){return null!=t&&ot(t)===yt}(t)&&Mt(t.then)},jt=function(t,n){n||(n=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);return t.join("$")});var r=function r(){var e,i=arguments,a=n.apply(this,i),o=r.cache;return(e=o[a])||(e=o[a]=t.apply(this,i)),e};return r.cache={},r},Ft=jt((function(t){return t.replace(/([A-Z])/g,(function(t){return"-"+t.toLowerCase()}))})),Dt=jt((function(t){return t.replace(/(-\w)/g,(function(t){return t[1].toUpperCase()}))})),It=jt((function(t,n){return t+n[0].toUpperCase()+n.substring(1)}),(function(t,n){return t+"$"+n})),$t=function(t){return Pt(t)?t:t.charAt(0).toUpperCase()+t.substring(1)},Lt="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",Rt="rgb[a]?\\(("+Lt+"[%]?)\\s*,\\s*("+Lt+"[%]?)\\s*,\\s*("+Lt+"[%]?)(?:\\s*,\\s*("+Lt+"))?\\)",_t="rgb[a]?\\((?:"+Lt+"[%]?)\\s*,\\s*(?:"+Lt+"[%]?)\\s*,\\s*(?:"+Lt+"[%]?)(?:\\s*,\\s*(?:"+Lt+"))?\\)",qt="hsl[a]?\\(("+Lt+")\\s*,\\s*("+Lt+"[%])\\s*,\\s*("+Lt+"[%])(?:\\s*,\\s*("+Lt+"))?\\)",Vt="hsl[a]?\\((?:"+Lt+")\\s*,\\s*(?:"+Lt+"[%])\\s*,\\s*(?:"+Lt+"[%])(?:\\s*,\\s*(?:"+Lt+"))?\\)",Ut=function(t,n){return t<n?-1:t>n?1:0},Wt=null!=Object.assign?Object.assign.bind(Object):function(t){for(var n=arguments,r=1;r<n.length;r++){var e=n[r];if(null!=e)for(var i=Object.keys(e),a=0;a<i.length;a++){var o=i[a];t[o]=e[o]}}return t},Zt=function(t){return(kt(t)?t:null)||function(t){return Ht[t.toLowerCase()]}(t)||function(t){if((4===t.length||7===t.length)&&"#"===t[0]){var n,r,e,i=16;return 4===t.length?(n=parseInt(t[1]+t[1],i),r=parseInt(t[2]+t[2],i),e=parseInt(t[3]+t[3],i)):(n=parseInt(t[1]+t[2],i),r=parseInt(t[3]+t[4],i),e=parseInt(t[5]+t[6],i)),[n,r,e]}}(t)||function(t){var n,r=new RegExp("^"+Rt+"$").exec(t);if(r){n=[];for(var e=[],i=1;i<=3;i++){var a=r[i];if("%"===a[a.length-1]&&(e[i]=!0),a=parseFloat(a),e[i]&&(a=a/100*255),a<0||a>255)return;n.push(Math.floor(a))}var o=e[1]||e[2]||e[3],u=e[1]&&e[2]&&e[3];if(o&&!u)return;var s=r[4];if(void 0!==s){if((s=parseFloat(s))<0||s>1)return;n.push(s)}}return n}(t)||function(t){var n,r,e,i,a,o,u,s;function f(t,n,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(n-t)*r:r<.5?n:r<2/3?t+(n-t)*(2/3-r)*6:t}var c=new RegExp("^"+qt+"$").exec(t);if(c){if((r=parseInt(c[1]))<0?r=(360- -1*r%360)%360:r>360&&(r%=360),r/=360,(e=parseFloat(c[2]))<0||e>100)return;if(e/=100,(i=parseFloat(c[3]))<0||i>100)return;if(i/=100,void 0!==(a=c[4])&&((a=parseFloat(a))<0||a>1))return;if(0===e)o=u=s=Math.round(255*i);else{var l=i<.5?i*(1+e):i+e-i*e,h=2*i-l;o=Math.round(255*f(h,l,r+1/3)),u=Math.round(255*f(h,l,r)),s=Math.round(255*f(h,l,r-1/3))}n=[o,u,s,a]}return n}(t)},Ht={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Kt=function(t){for(var n=t.map,r=t.keys,e=r.length,i=0;i<e;i++){var a=r[i];if(Et(a))throw Error("Tried to set map with object key");i<r.length-1?(null==n[a]&&(n[a]={}),n=n[a]):n[a]=t.value}},Gt=function(t){for(var n=t.map,r=t.keys,e=r.length,i=0;i<e;i++){var a=r[i];if(Et(a))throw Error("Tried to get map with object key");if(null==(n=n[a]))return n}return n};var Yt=function(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)},Xt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var Qt="object"==typeof Xt&&Xt&&Xt.Object===Object&&Xt,Jt="object"==typeof self&&self&&self.Object===Object&&self,tn=Qt||Jt||Function("return this")(),nn=function(){return tn.Date.now()},rn=/\s/;var en=function(t){for(var n=t.length;n--&&rn.test(t.charAt(n)););return n},an=/^\s+/;var on=function(t){return t?t.slice(0,en(t)+1).replace(an,""):t},un=tn.Symbol,sn=Object.prototype,fn=sn.hasOwnProperty,cn=sn.toString,ln=un?un.toStringTag:void 0;var hn=function(t){var n=fn.call(t,ln),r=t[ln];try{t[ln]=void 0;var e=!0}catch(t){}var i=cn.call(t);return e&&(n?t[ln]=r:delete t[ln]),i},vn=Object.prototype.toString;var dn=function(t){return vn.call(t)},gn=un?un.toStringTag:void 0;var pn=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":gn&&gn in Object(t)?hn(t):dn(t)};var yn=function(t){return null!=t&&"object"==typeof t};var mn=function(t){return"symbol"==typeof t||yn(t)&&"[object Symbol]"==pn(t)},bn=/^[-+]0x[0-9a-f]+$/i,wn=/^0b[01]+$/i,xn=/^0o[0-7]+$/i,Mn=parseInt;var kn=function(t){if("number"==typeof t)return t;if(mn(t))return NaN;if(Yt(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=Yt(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=on(t);var r=wn.test(t);return r||xn.test(t)?Mn(t.slice(2),r?2:8):bn.test(t)?NaN:+t},En=Math.max,Sn=Math.min;var An=function(t,n,r){var e,i,a,o,u,s,f=0,c=!1,l=!1,h=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function v(n){var r=e,a=i;return e=i=void 0,f=n,o=t.apply(a,r)}function d(t){var r=t-s;return void 0===s||r>=n||r<0||l&&t-f>=a}function g(){var t=nn();if(d(t))return p(t);u=setTimeout(g,function(t){var r=n-(t-s);return l?Sn(r,a-(t-f)):r}(t))}function p(t){return u=void 0,h&&e?v(t):(e=i=void 0,o)}function y(){var t=nn(),r=d(t);if(e=arguments,i=this,s=t,r){if(void 0===u)return function(t){return f=t,u=setTimeout(g,n),c?v(t):o}(s);if(l)return clearTimeout(u),u=setTimeout(g,n),v(s)}return void 0===u&&(u=setTimeout(g,n)),o}return n=kn(n)||0,Yt(r)&&(c=!!r.leading,a=(l="maxWait"in r)?En(kn(r.maxWait)||0,n):a,h="trailing"in r?!!r.trailing:h),y.cancel=function(){void 0!==u&&clearTimeout(u),f=0,e=s=i=u=void 0},y.flush=function(){return void 0===u?o:p(nn())},y},zn=dt?dt.performance:null,Bn=zn&&zn.now?function(){return zn.now()}:function(){return Date.now()},Cn=function(){if(dt){if(dt.requestAnimationFrame)return function(t){dt.requestAnimationFrame(t)};if(dt.mozRequestAnimationFrame)return function(t){dt.mozRequestAnimationFrame(t)};if(dt.webkitRequestAnimationFrame)return function(t){dt.webkitRequestAnimationFrame(t)};if(dt.msRequestAnimationFrame)return function(t){dt.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout((function(){t(Bn())}),1e3/60)}}(),Tn=function(t){return Cn(t)},On=Bn,Pn=9261,Nn=5381,jn=function(t){for(var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pn;!(n=t.next()).done;)r=65599*r+n.value|0;return r},Fn=function(t){return 65599*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pn)+t|0},Dn=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Nn;return(n<<5)+n+t|0},In=function(t){return 2097152*t[0]+t[1]},$n=function(t,n){return[Fn(t[0],n[0]),Dn(t[1],n[1])]},Ln=function(t,n){var r={value:0,done:!1},e=0,i=t.length;return jn({next:function(){return e<i?r.value=t.charCodeAt(e++):r.done=!0,r}},n)},Rn=function(){return _n(arguments)},_n=function(t){for(var n,r=0;r<t.length;r++){var e=t[r];n=0===r?Ln(e):Ln(e,n)}return n},qn=!0,Vn=null!=console.warn,Un=null!=console.trace,Wn=Number.MAX_SAFE_INTEGER||9007199254740991,Zn=function(){return!0},Hn=function(){return!1},Kn=function(){return 0},Gn=function(){},Yn=function(t){throw new Error(t)},Xn=function(t){if(void 0===t)return qn;qn=!!t},Qn=function(t){Xn()&&(Vn?console.warn(t):(console.log(t),Un&&console.trace()))},Jn=function(t){return null==t?t:kt(t)?t.slice():Et(t)?function(t){return Wt({},t)}(t):t},tr=function(t,n){for(n=t="";t++<36;n+=51*t&52?(15^t?8^Math.random()*(20^t?16:4):4).toString(16):"-");return n},nr={},rr=function(){return nr},er=function(t){var n=Object.keys(t);return function(r){for(var e={},i=0;i<n.length;i++){var a=n[i],o=null==r?void 0:r[a];e[a]=void 0===o?t[a]:o}return e}},ir=function(t,n,r){for(var e=t.length-1;e>=0;e--)t[e]===n&&t.splice(e,1)},ar=function(t){t.splice(0,t.length)},or=function(t,n,r){return r&&(n=It(r,n)),t[n]},ur=function(t,n,r,e){r&&(n=It(r,n)),t[n]=e},sr="undefined"!=typeof Map?Map:function(){function t(){ut(this,t),this._obj={}}return st(t,[{key:"set",value:function(t,n){return this._obj[t]=n,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return void 0!==this._obj[t]}},{key:"get",value:function(t){return this._obj[t]}}]),t}(),fr=function(){function t(n){if(ut(this,t),this._obj=Object.create(null),this.size=0,null!=n){var r;r=null!=n.instanceString&&n.instanceString()===this.instanceString()?n.toArray():n;for(var e=0;e<r.length;e++)this.add(r[e])}}return st(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var n=this._obj;1!==n[t]&&(n[t]=1,this.size++)}},{key:"delete",value:function(t){var n=this._obj;1===n[t]&&(n[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return 1===this._obj[t]}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter((function(n){return t.has(n)}))}},{key:"forEach",value:function(t,n){return this.toArray().forEach(t,n)}}]),t}(),cr="undefined"!==("undefined"==typeof Set?"undefined":ot(Set))?Set:fr,lr=function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==t&&void 0!==n&&Tt(t)){var e=n.group;if(null==e&&(e=n.data&&null!=n.data.source&&null!=n.data.target?"edges":"nodes"),"nodes"===e||"edges"===e){this.length=1,this[0]=this;var i=this._private={cy:t,single:!0,data:n.data||{},position:n.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:e,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!n.selected,selectable:void 0===n.selectable||!!n.selectable,locked:!!n.locked,grabbed:!1,grabbable:void 0===n.grabbable||!!n.grabbable,pannable:void 0===n.pannable?"edges"===e:!!n.pannable,active:!1,classes:new cr,animation:{current:[],queue:[]},rscratch:{},scratch:n.scratch||{},edges:[],children:[],parent:n.parent&&n.parent.isNode()?n.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==i.position.x&&(i.position.x=0),null==i.position.y&&(i.position.y=0),n.renderedPosition){var a=n.renderedPosition,o=t.pan(),u=t.zoom();i.position={x:(a.x-o.x)/u,y:(a.y-o.y)/u}}var s=[];kt(n.classes)?s=n.classes:xt(n.classes)&&(s=n.classes.split(/\s+/));for(var f=0,c=s.length;f<c;f++){var l=s[f];l&&""!==l&&i.classes.add(l)}this.createEmitter();var h=n.style||n.css;h&&(Qn("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(h)),(void 0===r||r)&&this.restore()}else Yn("An element must be of type `nodes` or `edges`; you specified `"+e+"`")}else Yn("An element must have a core reference and parameters set")},hr=function(t){return t={bfs:t.bfs||!t.dfs,dfs:t.dfs||!t.bfs},function(n,r,e){var i;Et(n)&&!zt(n)&&(n=(i=n).roots||i.root,r=i.visit,e=i.directed),e=2!==arguments.length||Mt(r)?e:r,r=Mt(r)?r:function(){};for(var a,o=this._private.cy,u=n=xt(n)?this.filter(n):n,s=[],f=[],c={},l={},h={},v=0,d=this.byGroup(),g=d.nodes,p=d.edges,y=0;y<u.length;y++){var m=u[y],b=m.id();m.isNode()&&(s.unshift(m),t.bfs&&(h[b]=!0,f.push(m)),l[b]=0)}for(var w=function(){var n=t.bfs?s.shift():s.pop(),i=n.id();if(t.dfs){if(h[i])return"continue";h[i]=!0,f.push(n)}var o,u=l[i],d=c[i],y=null!=d?d.source():null,m=null!=d?d.target():null,b=null==d?void 0:n.same(y)?m[0]:y[0];if(!0===(o=r(n,d,b,v++,u)))return a=n,"break";if(!1===o)return"break";for(var w=n.connectedEdges().filter((function(t){return(!e||t.source().same(n))&&p.has(t)})),x=0;x<w.length;x++){var M=w[x],k=M.connectedNodes().filter((function(t){return!t.same(n)&&g.has(t)})),E=k.id();0===k.length||h[E]||(k=k[0],s.push(k),t.bfs&&(h[E]=!0,f.push(k)),c[E]=M,l[E]=l[i]+1)}};0!==s.length;){var x=w();if("continue"!==x&&"break"===x)break}for(var M=o.collection(),k=0;k<f.length;k++){var E=f[k],S=c[E.id()];null!=S&&M.push(S),M.push(E)}return{path:o.collection(M),found:o.collection(a)}}},vr={breadthFirstSearch:hr({bfs:!0}),depthFirstSearch:hr({dfs:!0})};vr.bfs=vr.breadthFirstSearch,vr.dfs=vr.depthFirstSearch;var dr=function(t,n){return t(n={exports:{}},n.exports),n.exports}((function(t,n){(function(){var n,r,e,i,a,o,u,s,f,c,l,h,v,d,g;e=Math.floor,c=Math.min,r=function(t,n){return t<n?-1:t>n?1:0},f=function(t,n,i,a,o){var u;if(null==i&&(i=0),null==o&&(o=r),i<0)throw new Error("lo must be non-negative");for(null==a&&(a=t.length);i<a;)o(n,t[u=e((i+a)/2)])<0?a=u:i=u+1;return[].splice.apply(t,[i,i-i].concat(n)),n},o=function(t,n,e){return null==e&&(e=r),t.push(n),d(t,0,t.length-1,e)},a=function(t,n){var e,i;return null==n&&(n=r),e=t.pop(),t.length?(i=t[0],t[0]=e,g(t,0,n)):i=e,i},s=function(t,n,e){var i;return null==e&&(e=r),i=t[0],t[0]=n,g(t,0,e),i},u=function(t,n,e){var i;return null==e&&(e=r),t.length&&e(t[0],n)<0&&(n=(i=[t[0],n])[0],t[0]=i[1],g(t,0,e)),n},i=function(t,n){var i,a,o,u,s,f;for(null==n&&(n=r),s=[],a=0,o=(u=function(){f=[];for(var n=0,r=e(t.length/2);0<=r?n<r:n>r;0<=r?n++:n--)f.push(n);return f}.apply(this).reverse()).length;a<o;a++)i=u[a],s.push(g(t,i,n));return s},v=function(t,n,e){var i;if(null==e&&(e=r),-1!==(i=t.indexOf(n)))return d(t,0,i,e),g(t,i,e)},l=function(t,n,e){var a,o,s,f,c;if(null==e&&(e=r),!(o=t.slice(0,n)).length)return o;for(i(o,e),s=0,f=(c=t.slice(n)).length;s<f;s++)a=c[s],u(o,a,e);return o.sort(e).reverse()},h=function(t,n,e){var o,u,s,l,h,v,d,g,p;if(null==e&&(e=r),10*n<=t.length){if(!(s=t.slice(0,n).sort(e)).length)return s;for(u=s[s.length-1],l=0,v=(d=t.slice(n)).length;l<v;l++)e(o=d[l],u)<0&&(f(s,o,0,null,e),s.pop(),u=s[s.length-1]);return s}for(i(t,e),p=[],h=0,g=c(n,t.length);0<=g?h<g:h>g;0<=g?++h:--h)p.push(a(t,e));return p},d=function(t,n,e,i){var a,o,u;for(null==i&&(i=r),a=t[e];e>n&&i(a,o=t[u=e-1>>1])<0;)t[e]=o,e=u;return t[e]=a},g=function(t,n,e){var i,a,o,u,s;for(null==e&&(e=r),a=t.length,s=n,o=t[n],i=2*n+1;i<a;)(u=i+1)<a&&!(e(t[i],t[u])<0)&&(i=u),t[n]=t[i],i=2*(n=i)+1;return t[n]=o,d(t,s,n,e)},n=function(){function t(t){this.cmp=null!=t?t:r,this.nodes=[]}return t.push=o,t.pop=a,t.replace=s,t.pushpop=u,t.heapify=i,t.updateItem=v,t.nlargest=l,t.nsmallest=h,t.prototype.push=function(t){return o(this.nodes,t,this.cmp)},t.prototype.pop=function(){return a(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return-1!==this.nodes.indexOf(t)},t.prototype.replace=function(t){return s(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return u(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return i(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return v(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var n;return(n=new t).nodes=this.nodes.slice(0),n},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),t.exports=n}).call(Xt)})),gr=dr,pr=er({root:null,weight:function(t){return 1},directed:!1}),yr={dijkstra:function(t){if(!Et(t)){var n=arguments;t={root:n[0],weight:n[1],directed:n[2]}}var r=pr(t),e=r.root,i=r.weight,a=r.directed,o=this,u=i,s=xt(e)?this.filter(e)[0]:e[0],f={},c={},l={},h=this.byGroup(),v=h.nodes,d=h.edges;d.unmergeBy((function(t){return t.isLoop()}));for(var g=function(t){return f[t.id()]},p=function(t,n){f[t.id()]=n,y.updateItem(t)},y=new gr((function(t,n){return g(t)-g(n)})),m=0;m<v.length;m++){var b=v[m];f[b.id()]=b.same(s)?0:1/0,y.push(b)}for(var w=function(t,n){for(var r,e=(a?t.edgesTo(n):t.edgesWith(n)).intersect(d),i=1/0,o=0;o<e.length;o++){var s=e[o],f=u(s);(f<i||!r)&&(i=f,r=s)}return{edge:r,dist:i}};y.size()>0;){var x=y.pop(),M=g(x),k=x.id();if(l[k]=M,M!==1/0)for(var E=x.neighborhood().intersect(v),S=0;S<E.length;S++){var A=E[S],z=A.id(),B=w(x,A),C=M+B.dist;C<g(A)&&(p(A,C),c[z]={node:x,edge:B.edge})}}return{distanceTo:function(t){var n=xt(t)?v.filter(t)[0]:t[0];return l[n.id()]},pathTo:function(t){var n=xt(t)?v.filter(t)[0]:t[0],r=[],e=n,i=e.id();if(n.length>0)for(r.unshift(n);c[i];){var a=c[i];r.unshift(a.edge),r.unshift(a.node),i=(e=a.node).id()}return o.spawn(r)}}}},mr={kruskal:function(t){t=t||function(t){return 1};for(var n=this.byGroup(),r=n.nodes,e=n.edges,i=r.length,a=new Array(i),o=r,u=function(t){for(var n=0;n<a.length;n++){if(a[n].has(t))return n}},s=0;s<i;s++)a[s]=this.spawn(r[s]);for(var f=e.sort((function(n,r){return t(n)-t(r)})),c=0;c<f.length;c++){var l=f[c],h=l.source()[0],v=l.target()[0],d=u(h),g=u(v),p=a[d],y=a[g];d!==g&&(o.merge(l),p.merge(y),a.splice(g,1))}return o}},br=er({root:null,goal:null,weight:function(t){return 1},heuristic:function(t){return 0},directed:!1}),wr={aStar:function(t){var n=this.cy(),r=br(t),e=r.root,i=r.goal,a=r.heuristic,o=r.directed,u=r.weight;e=n.collection(e)[0],i=n.collection(i)[0];var s,f,c=e.id(),l=i.id(),h={},v={},d={},g=new gr((function(t,n){return v[t.id()]-v[n.id()]})),p=new cr,y={},m={},b=function(t,n){g.push(t),p.add(n)};b(e,c),h[c]=0,v[c]=a(e);for(var w,x=0;g.size()>0;){if(s=g.pop(),f=s.id(),p.delete(f),x++,f===l){for(var M=[],k=i,E=l,S=m[E];M.unshift(k),null!=S&&M.unshift(S),null!=(k=y[E]);)S=m[E=k.id()];return{found:!0,distance:h[f],path:this.spawn(M),steps:x}}d[f]=!0;for(var A=s._private.edges,z=0;z<A.length;z++){var B=A[z];if(this.hasElementWithId(B.id())&&(!o||B.data("source")===f)){var C=B.source(),T=B.target(),O=C.id()!==f?C:T,P=O.id();if(this.hasElementWithId(P)&&!d[P]){var N=h[f]+u(B);w=P,p.has(w)?N<h[P]&&(h[P]=N,v[P]=N+a(O),y[P]=s,m[P]=B):(h[P]=N,v[P]=N+a(O),b(O,P),y[P]=s,m[P]=B)}}}}return{found:!1,distance:void 0,path:void 0,steps:x}}},xr=er({weight:function(t){return 1},directed:!1}),Mr={floydWarshall:function(t){for(var n=this.cy(),r=xr(t),e=r.weight,i=r.directed,a=e,o=this.byGroup(),u=o.nodes,s=o.edges,f=u.length,c=f*f,l=function(t){return u.indexOf(t)},h=function(t){return u[t]},v=new Array(c),d=0;d<c;d++){var g=d%f,p=(d-g)/f;v[d]=p===g?0:1/0}for(var y=new Array(c),m=new Array(c),b=0;b<s.length;b++){var w=s[b],x=w.source()[0],M=w.target()[0];if(x!==M){var k=l(x),E=l(M),S=k*f+E,A=a(w);if(v[S]>A&&(v[S]=A,y[S]=E,m[S]=w),!i){var z=E*f+k;!i&&v[z]>A&&(v[z]=A,y[z]=k,m[z]=w)}}}for(var B=0;B<f;B++)for(var C=0;C<f;C++)for(var T=C*f+B,O=0;O<f;O++){var P=C*f+O,N=B*f+O;v[T]+v[N]<v[P]&&(v[P]=v[T]+v[N],y[P]=y[T])}var j=function(t){return l(function(t){return(xt(t)?n.filter(t):t)[0]}(t))},F={distance:function(t,n){var r=j(t),e=j(n);return v[r*f+e]},path:function(t,r){var e=j(t),i=j(r),a=h(e);if(e===i)return a.collection();if(null==y[e*f+i])return n.collection();var o,u=n.collection(),s=e;for(u.merge(a);e!==i;)s=e,e=y[e*f+i],o=m[s*f+e],u.merge(o),u.merge(h(e));return u}};return F}},kr=er({weight:function(t){return 1},directed:!1,root:null}),Er={bellmanFord:function(t){var n=this,r=kr(t),e=r.weight,i=r.directed,a=r.root,o=e,u=this,s=this.cy(),f=this.byGroup(),c=f.edges,l=f.nodes,h=l.length,v=new sr,d=!1,g=[];a=s.collection(a)[0],c.unmergeBy((function(t){return t.isLoop()}));for(var p=c.length,y=function(t){var n=v.get(t.id());return n||(n={},v.set(t.id(),n)),n},m=function(t){return(xt(t)?s.$(t):t)[0]},b=0;b<h;b++){var w=l[b],x=y(w);w.same(a)?x.dist=0:x.dist=1/0,x.pred=null,x.edge=null}for(var M=!1,k=function(t,n,r,e,i,a){var o=e.dist+a;o<i.dist&&!r.same(e.edge)&&(i.dist=o,i.pred=t,i.edge=r,M=!0)},E=1;E<h;E++){M=!1;for(var S=0;S<p;S++){var A=c[S],z=A.source(),B=A.target(),C=o(A),T=y(z),O=y(B);k(z,0,A,T,O,C),i||k(B,0,A,O,T,C)}if(!M)break}if(M)for(var P=[],N=0;N<p;N++){var j=c[N],F=j.source(),D=j.target(),I=o(j),$=y(F).dist,L=y(D).dist;if($+I<L||!i&&L+I<$){if(d||(Qn("Graph contains a negative weight cycle for Bellman-Ford"),d=!0),!1===t.findNegativeWeightCycles)break;var R=[];$+I<L&&R.push(F),!i&&L+I<$&&R.push(D);for(var _=R.length,q=0;q<_;q++){var V=R[q],U=[V];U.push(y(V).edge);for(var W=y(V).pred;-1===U.indexOf(W);)U.push(W),U.push(y(W).edge),W=y(W).pred;for(var Z=(U=U.slice(U.indexOf(W)))[0].id(),H=0,K=2;K<U.length;K+=2)U[K].id()<Z&&(Z=U[K].id(),H=K);(U=U.slice(H).concat(U.slice(0,H))).push(U[0]);var G=U.map((function(t){return t.id()})).join(",");-1===P.indexOf(G)&&(g.push(u.spawn(U)),P.push(G))}}}return{distanceTo:function(t){return y(m(t)).dist},pathTo:function(t){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,e=[],i=m(t);;){if(null==i)return n.spawn();var o=y(i),s=o.edge,f=o.pred;if(e.unshift(i[0]),i.same(r)&&e.length>0)break;null!=s&&e.unshift(s),i=f}return u.spawn(e)},hasNegativeWeightCycle:d,negativeWeightCycles:g}}},Sr=Math.sqrt(2),Ar=function(t,n,r){0===r.length&&Yn("Karger-Stein must be run on a connected (sub)graph");for(var e=r[t],i=e[1],a=e[2],o=n[i],u=n[a],s=r,f=s.length-1;f>=0;f--){var c=s[f],l=c[1],h=c[2];(n[l]===o&&n[h]===u||n[l]===u&&n[h]===o)&&s.splice(f,1)}for(var v=0;v<s.length;v++){var d=s[v];d[1]===u?(s[v]=d.slice(),s[v][1]=o):d[2]===u&&(s[v]=d.slice(),s[v][2]=o)}for(var g=0;g<n.length;g++)n[g]===u&&(n[g]=o);return s},zr=function(t,n,r,e){for(;r>e;){var i=Math.floor(Math.random()*n.length);n=Ar(i,t,n),r--}return n},Br={kargerStein:function(){var t=this,n=this.byGroup(),r=n.nodes,e=n.edges;e.unmergeBy((function(t){return t.isLoop()}));var i=r.length,a=e.length,o=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),u=Math.floor(i/Sr);if(!(i<2)){for(var s=[],f=0;f<a;f++){var c=e[f];s.push([f,r.indexOf(c.source()),r.indexOf(c.target())])}for(var l=1/0,h=[],v=new Array(i),d=new Array(i),g=new Array(i),p=function(t,n){for(var r=0;r<i;r++)n[r]=t[r]},y=0;y<=o;y++){for(var m=0;m<i;m++)d[m]=m;var b=zr(d,s.slice(),i,u),w=b.slice();p(d,g);var x=zr(d,b,u,2),M=zr(g,w,u,2);x.length<=M.length&&x.length<l?(l=x.length,h=x,p(d,v)):M.length<=x.length&&M.length<l&&(l=M.length,h=M,p(g,v))}for(var k=this.spawn(h.map((function(t){return e[t[0]]}))),E=this.spawn(),S=this.spawn(),A=v[0],z=0;z<v.length;z++){var B=v[z],C=r[z];B===A?E.merge(C):S.merge(C)}var T=function(n){var r=t.spawn();return n.forEach((function(n){r.merge(n),n.connectedEdges().forEach((function(n){t.contains(n)&&!k.contains(n)&&r.merge(n)}))})),r},O=[T(E),T(S)];return{cut:k,components:O,partition1:E,partition2:S}}Yn("At least 2 nodes are required for Karger-Stein algorithm")}},Cr=function(t,n,r){return{x:t.x*n+r.x,y:t.y*n+r.y}},Tr=function(t,n,r){return{x:(t.x-r.x)/n,y:(t.y-r.y)/n}},Or=function(t){return{x:t[0],y:t[1]}},Pr=function(t,n){return Math.atan2(n,t)-Math.PI/2},Nr=Math.log2||function(t){return Math.log(t)/Math.log(2)},jr=function(t){return t>0?1:t<0?-1:0},Fr=function(t,n){return Math.sqrt(Dr(t,n))},Dr=function(t,n){var r=n.x-t.x,e=n.y-t.y;return r*r+e*e},Ir=function(t){for(var n=t.length,r=0,e=0;e<n;e++)r+=t[e];for(var i=0;i<n;i++)t[i]=t[i]/r;return t},$r=function(t,n,r,e){return(1-e)*(1-e)*t+2*(1-e)*e*n+e*e*r},Lr=function(t,n,r,e){return{x:$r(t.x,n.x,r.x,e),y:$r(t.y,n.y,r.y,e)}},Rr=function(t,n,r){return Math.max(t,Math.min(r,n))},_r=function(t){if(null==t)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=t.x1&&null!=t.y1){if(null!=t.x2&&null!=t.y2&&t.x2>=t.x1&&t.y2>=t.y1)return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,w:t.x2-t.x1,h:t.y2-t.y1};if(null!=t.w&&null!=t.h&&t.w>=0&&t.h>=0)return{x1:t.x1,y1:t.y1,x2:t.x1+t.w,y2:t.y1+t.h,w:t.w,h:t.h}}},qr=function(t,n){t.x1=Math.min(t.x1,n.x1),t.x2=Math.max(t.x2,n.x2),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,n.y1),t.y2=Math.max(t.y2,n.y2),t.h=t.y2-t.y1},Vr=function(t,n,r){t.x1=Math.min(t.x1,n),t.x2=Math.max(t.x2,n),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,r),t.y2=Math.max(t.y2,r),t.h=t.y2-t.y1},Ur=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.x1-=n,t.x2+=n,t.y1-=n,t.y2+=n,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},Wr=function(t){var n,r,e,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===a.length)n=r=e=i=a[0];else if(2===a.length)n=e=a[0],i=r=a[1];else if(4===a.length){var o=ct(a,4);n=o[0],r=o[1],e=o[2],i=o[3]}return t.x1-=i,t.x2+=r,t.y1-=n,t.y2+=e,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},Zr=function(t,n){t.x1=n.x1,t.y1=n.y1,t.x2=n.x2,t.y2=n.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1},Hr=function(t,n){return!(t.x1>n.x2)&&(!(n.x1>t.x2)&&(!(t.x2<n.x1)&&(!(n.x2<t.x1)&&(!(t.y2<n.y1)&&(!(n.y2<t.y1)&&(!(t.y1>n.y2)&&!(n.y1>t.y2)))))))},Kr=function(t,n,r){return t.x1<=n&&n<=t.x2&&t.y1<=r&&r<=t.y2},Gr=function(t,n){return Kr(t,n.x1,n.y1)&&Kr(t,n.x2,n.y2)},Yr=function(t,n,r,e,i,a,o){var u,s,f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"auto",c="auto"===f?de(i,a):f,l=i/2,h=a/2,v=(c=Math.min(c,l,h))!==l,d=c!==h;if(v){var g=e-h-o;if((u=se(t,n,r,e,r-l+c-o,g,r+l-c+o,g,!1)).length>0)return u}if(d){var p=r+l+o;if((u=se(t,n,r,e,p,e-h+c-o,p,e+h-c+o,!1)).length>0)return u}if(v){var y=e+h+o;if((u=se(t,n,r,e,r-l+c-o,y,r+l-c+o,y,!1)).length>0)return u}if(d){var m=r-l-o;if((u=se(t,n,r,e,m,e-h+c-o,m,e+h-c+o,!1)).length>0)return u}var b=r-l+c,w=e-h+c;if((s=oe(t,n,r,e,b,w,c+o)).length>0&&s[0]<=b&&s[1]<=w)return[s[0],s[1]];var x=r+l-c,M=e-h+c;if((s=oe(t,n,r,e,x,M,c+o)).length>0&&s[0]>=x&&s[1]<=M)return[s[0],s[1]];var k=r+l-c,E=e+h-c;if((s=oe(t,n,r,e,k,E,c+o)).length>0&&s[0]>=k&&s[1]>=E)return[s[0],s[1]];var S=r-l+c,A=e+h-c;return(s=oe(t,n,r,e,S,A,c+o)).length>0&&s[0]<=S&&s[1]>=A?[s[0],s[1]]:[]},Xr=function(t,n,r,e,i,a,o){var u=o,s=Math.min(r,i),f=Math.max(r,i),c=Math.min(e,a),l=Math.max(e,a);return s-u<=t&&t<=f+u&&c-u<=n&&n<=l+u},Qr=function(t,n,r,e,i,a,o,u,s){var f=Math.min(r,o,i)-s,c=Math.max(r,o,i)+s,l=Math.min(e,u,a)-s,h=Math.max(e,u,a)+s;return!(t<f||t>c||n<l||n>h)},Jr=function(t,n,r,e,i,a,o,u){var s=[];!function(t,n,r,e,i){var a,o,u,s,f,c,l,h;0===t&&(t=1e-5),u=-27*(e/=t)+(n/=t)*(9*(r/=t)-n*n*2),a=(o=(3*r-n*n)/9)*o*o+(u/=54)*u,i[1]=0,l=n/3,a>0?(f=(f=u+Math.sqrt(a))<0?-Math.pow(-f,1/3):Math.pow(f,1/3),c=(c=u-Math.sqrt(a))<0?-Math.pow(-c,1/3):Math.pow(c,1/3),i[0]=-l+f+c,l+=(f+c)/2,i[4]=i[2]=-l,l=Math.sqrt(3)*(-c+f)/2,i[3]=l,i[5]=-l):(i[5]=i[3]=0,0===a?(h=u<0?-Math.pow(-u,1/3):Math.pow(u,1/3),i[0]=2*h-l,i[4]=i[2]=-(h+l)):(s=(o=-o)*o*o,s=Math.acos(u/Math.sqrt(s)),h=2*Math.sqrt(o),i[0]=-l+h*Math.cos(s/3),i[2]=-l+h*Math.cos((s+2*Math.PI)/3),i[4]=-l+h*Math.cos((s+4*Math.PI)/3)))}(1*r*r-4*r*i+2*r*o+4*i*i-4*i*o+o*o+e*e-4*e*a+2*e*u+4*a*a-4*a*u+u*u,9*r*i-3*r*r-3*r*o-6*i*i+3*i*o+9*e*a-3*e*e-3*e*u-6*a*a+3*a*u,3*r*r-6*r*i+r*o-r*t+2*i*i+2*i*t-o*t+3*e*e-6*e*a+e*u-e*n+2*a*a+2*a*n-u*n,1*r*i-r*r+r*t-i*t+e*a-e*e+e*n-a*n,s);for(var f=[],c=0;c<6;c+=2)Math.abs(s[c+1])<1e-7&&s[c]>=0&&s[c]<=1&&f.push(s[c]);f.push(1),f.push(0);for(var l,h,v,d=-1,g=0;g<f.length;g++)l=Math.pow(1-f[g],2)*r+2*(1-f[g])*f[g]*i+f[g]*f[g]*o,h=Math.pow(1-f[g],2)*e+2*(1-f[g])*f[g]*a+f[g]*f[g]*u,v=Math.pow(l-t,2)+Math.pow(h-n,2),d>=0?v<d&&(d=v):d=v;return d},te=function(t,n,r,e,i,a){var o=[t-r,n-e],u=[i-r,a-e],s=u[0]*u[0]+u[1]*u[1],f=o[0]*o[0]+o[1]*o[1],c=o[0]*u[0]+o[1]*u[1],l=c*c/s;return c<0?f:l>s?(t-i)*(t-i)+(n-a)*(n-a):f-l},ne=function(t,n,r){for(var e,i,a,o,u=0,s=0;s<r.length/2;s++)if(e=r[2*s],i=r[2*s+1],s+1<r.length/2?(a=r[2*(s+1)],o=r[2*(s+1)+1]):(a=r[2*(s+1-r.length/2)],o=r[2*(s+1-r.length/2)+1]),e==t&&a==t);else{if(!(e>=t&&t>=a||e<=t&&t<=a))continue;(t-e)/(a-e)*(o-i)+i>n&&u++}return u%2!=0},re=function(t,n,r,e,i,a,o,u,s){var f,c=new Array(r.length);null!=u[0]?(f=Math.atan(u[1]/u[0]),u[0]<0?f+=Math.PI/2:f=-f-Math.PI/2):f=u;for(var l,h=Math.cos(-f),v=Math.sin(-f),d=0;d<c.length/2;d++)c[2*d]=a/2*(r[2*d]*h-r[2*d+1]*v),c[2*d+1]=o/2*(r[2*d+1]*h+r[2*d]*v),c[2*d]+=e,c[2*d+1]+=i;if(s>0){var g=ie(c,-s);l=ee(g)}else l=c;return ne(t,n,l)},ee=function(t){for(var n,r,e,i,a,o,u,s,f=new Array(t.length/2),c=0;c<t.length/4;c++){n=t[4*c],r=t[4*c+1],e=t[4*c+2],i=t[4*c+3],c<t.length/4-1?(a=t[4*(c+1)],o=t[4*(c+1)+1],u=t[4*(c+1)+2],s=t[4*(c+1)+3]):(a=t[0],o=t[1],u=t[2],s=t[3]);var l=se(n,r,e,i,a,o,u,s,!0);f[2*c]=l[0],f[2*c+1]=l[1]}return f},ie=function(t,n){for(var r,e,i,a,o=new Array(2*t.length),u=0;u<t.length/2;u++){r=t[2*u],e=t[2*u+1],u<t.length/2-1?(i=t[2*(u+1)],a=t[2*(u+1)+1]):(i=t[0],a=t[1]);var s=a-e,f=-(i-r),c=Math.sqrt(s*s+f*f),l=s/c,h=f/c;o[4*u]=r+l*n,o[4*u+1]=e+h*n,o[4*u+2]=i+l*n,o[4*u+3]=a+h*n}return o},ae=function(t,n,r,e,i,a,o){return t-=i,n-=a,(t/=r/2+o)*t+(n/=e/2+o)*n<=1},oe=function(t,n,r,e,i,a,o){var u=[r-t,e-n],s=[t-i,n-a],f=u[0]*u[0]+u[1]*u[1],c=2*(s[0]*u[0]+s[1]*u[1]),l=c*c-4*f*(s[0]*s[0]+s[1]*s[1]-o*o);if(l<0)return[];var h=(-c+Math.sqrt(l))/(2*f),v=(-c-Math.sqrt(l))/(2*f),d=Math.min(h,v),g=Math.max(h,v),p=[];if(d>=0&&d<=1&&p.push(d),g>=0&&g<=1&&p.push(g),0===p.length)return[];var y=p[0]*u[0]+t,m=p[0]*u[1]+n;return p.length>1?p[0]==p[1]?[y,m]:[y,m,p[1]*u[0]+t,p[1]*u[1]+n]:[y,m]},ue=function(t,n,r){return n<=t&&t<=r||r<=t&&t<=n?t:t<=n&&n<=r||r<=n&&n<=t?n:r},se=function(t,n,r,e,i,a,o,u,s){var f=t-i,c=r-t,l=o-i,h=n-a,v=e-n,d=u-a,g=l*h-d*f,p=c*h-v*f,y=d*c-l*v;if(0!==y){var m=g/y,b=p/y,w=-.001;return w<=m&&m<=1.001&&w<=b&&b<=1.001||s?[t+m*c,n+m*v]:[]}return 0===g||0===p?ue(t,r,o)===o?[o,u]:ue(t,r,i)===i?[i,a]:ue(i,o,r)===r?[r,e]:[]:[]},fe=function(t,n,r,e,i,a,o,u){var s,f,c,l,h,v,d=[],g=new Array(r.length),p=!0;if(null==a&&(p=!1),p){for(var y=0;y<g.length/2;y++)g[2*y]=r[2*y]*a+e,g[2*y+1]=r[2*y+1]*o+i;if(u>0){var m=ie(g,-u);f=ee(m)}else f=g}else f=r;for(var b=0;b<f.length/2;b++)c=f[2*b],l=f[2*b+1],b<f.length/2-1?(h=f[2*(b+1)],v=f[2*(b+1)+1]):(h=f[0],v=f[1]),0!==(s=se(t,n,e,i,c,l,h,v)).length&&d.push(s[0],s[1]);return d},ce=function(t,n,r){var e=[t[0]-n[0],t[1]-n[1]],i=Math.sqrt(e[0]*e[0]+e[1]*e[1]),a=(i-r)/i;return a<0&&(a=1e-5),[n[0]+a*e[0],n[1]+a*e[1]]},le=function(t,n){var r=ve(t,n);return r=he(r)},he=function(t){for(var n,r,e=t.length/2,i=1/0,a=1/0,o=-1/0,u=-1/0,s=0;s<e;s++)n=t[2*s],r=t[2*s+1],i=Math.min(i,n),o=Math.max(o,n),a=Math.min(a,r),u=Math.max(u,r);for(var f=2/(o-i),c=2/(u-a),l=0;l<e;l++)n=t[2*l]=t[2*l]*f,r=t[2*l+1]=t[2*l+1]*c,i=Math.min(i,n),o=Math.max(o,n),a=Math.min(a,r),u=Math.max(u,r);if(a<-1)for(var h=0;h<e;h++)r=t[2*h+1]=t[2*h+1]+(-1-a);return t},ve=function(t,n){var r=1/t*2*Math.PI,e=t%2==0?Math.PI/2+r/2:Math.PI/2;e+=n;for(var i,a=new Array(2*t),o=0;o<t;o++)i=o*r+e,a[2*o]=Math.cos(i),a[2*o+1]=Math.sin(-i);return a},de=function(t,n){return Math.min(t/4,n/4,8)},ge=function(t,n){return Math.min(t/10,n/10,8)},pe=function(t,n){return{heightOffset:Math.min(15,.05*n),widthOffset:Math.min(100,.25*t),ctrlPtOffsetPct:.05}},ye=er({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(t){return 1}}),me={pageRank:function(t){for(var n=ye(t),r=n.dampingFactor,e=n.precision,i=n.iterations,a=n.weight,o=this._private.cy,u=this.byGroup(),s=u.nodes,f=u.edges,c=s.length,l=c*c,h=f.length,v=new Array(l),d=new Array(c),g=(1-r)/c,p=0;p<c;p++){for(var y=0;y<c;y++){v[p*c+y]=0}d[p]=0}for(var m=0;m<h;m++){var b=f[m],w=b.data("source"),x=b.data("target");if(w!==x){var M=s.indexOfId(w),k=s.indexOfId(x),E=a(b);v[k*c+M]+=E,d[M]+=E}}for(var S=1/c+g,A=0;A<c;A++)if(0===d[A])for(var z=0;z<c;z++){v[z*c+A]=S}else for(var B=0;B<c;B++){var C=B*c+A;v[C]=v[C]/d[A]+g}for(var T,O=new Array(c),P=new Array(c),N=0;N<c;N++)O[N]=1;for(var j=0;j<i;j++){for(var F=0;F<c;F++)P[F]=0;for(var D=0;D<c;D++)for(var I=0;I<c;I++){var $=D*c+I;P[D]+=v[$]*O[I]}Ir(P),T=O,O=P,P=T;for(var L=0,R=0;R<c;R++){var _=T[R]-O[R];L+=_*_}if(L<e)break}return{rank:function(t){return t=o.collection(t)[0],O[s.indexOf(t)]}}}},be=er({root:null,weight:function(t){return 1},directed:!1,alpha:0}),we={degreeCentralityNormalized:function(t){t=be(t);var n=this.cy(),r=this.nodes(),e=r.length;if(t.directed){for(var i={},a={},o=0,u=0,s=0;s<e;s++){var f=r[s],c=f.id();t.root=f;var l=this.degreeCentrality(t);o<l.indegree&&(o=l.indegree),u<l.outdegree&&(u=l.outdegree),i[c]=l.indegree,a[c]=l.outdegree}return{indegree:function(t){return 0==o?0:(xt(t)&&(t=n.filter(t)),i[t.id()]/o)},outdegree:function(t){return 0===u?0:(xt(t)&&(t=n.filter(t)),a[t.id()]/u)}}}for(var h={},v=0,d=0;d<e;d++){var g=r[d];t.root=g;var p=this.degreeCentrality(t);v<p.degree&&(v=p.degree),h[g.id()]=p.degree}return{degree:function(t){return 0===v?0:(xt(t)&&(t=n.filter(t)),h[t.id()]/v)}}},degreeCentrality:function(t){t=be(t);var n=this.cy(),r=this,e=t,i=e.root,a=e.weight,o=e.directed,u=e.alpha;if(i=n.collection(i)[0],o){for(var s=i.connectedEdges(),f=s.filter((function(t){return t.target().same(i)&&r.has(t)})),c=s.filter((function(t){return t.source().same(i)&&r.has(t)})),l=f.length,h=c.length,v=0,d=0,g=0;g<f.length;g++)v+=a(f[g]);for(var p=0;p<c.length;p++)d+=a(c[p]);return{indegree:Math.pow(l,1-u)*Math.pow(v,u),outdegree:Math.pow(h,1-u)*Math.pow(d,u)}}for(var y=i.connectedEdges().intersection(r),m=y.length,b=0,w=0;w<y.length;w++)b+=a(y[w]);return{degree:Math.pow(m,1-u)*Math.pow(b,u)}}};we.dc=we.degreeCentrality,we.dcn=we.degreeCentralityNormalised=we.degreeCentralityNormalized;var xe=er({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Me={closenessCentralityNormalized:function(t){for(var n=xe(t),r=n.harmonic,e=n.weight,i=n.directed,a=this.cy(),o={},u=0,s=this.nodes(),f=this.floydWarshall({weight:e,directed:i}),c=0;c<s.length;c++){for(var l=0,h=s[c],v=0;v<s.length;v++)if(c!==v){var d=f.distance(h,s[v]);l+=r?1/d:d}r||(l=1/l),u<l&&(u=l),o[h.id()]=l}return{closeness:function(t){return 0==u?0:(t=xt(t)?a.filter(t)[0].id():t.id(),o[t]/u)}}},closenessCentrality:function(t){var n=xe(t),r=n.root,e=n.weight,i=n.directed,a=n.harmonic;r=this.filter(r)[0];for(var o=this.dijkstra({root:r,weight:e,directed:i}),u=0,s=this.nodes(),f=0;f<s.length;f++){var c=s[f];if(!c.same(r)){var l=o.distanceTo(c);u+=a?1/l:l}}return a?u:1/u}};Me.cc=Me.closenessCentrality,Me.ccn=Me.closenessCentralityNormalised=Me.closenessCentralityNormalized;var ke=er({weight:null,directed:!1}),Ee={betweennessCentrality:function(t){for(var n=ke(t),r=n.directed,e=n.weight,i=null!=e,a=this.cy(),o=this.nodes(),u={},s={},f=0,c=function(t,n){s[t]=n,n>f&&(f=n)},l=function(t){return s[t]},h=0;h<o.length;h++){var v=o[h],d=v.id();u[d]=r?v.outgoers().nodes():v.openNeighborhood().nodes(),c(d,0)}for(var g=function(t){for(var n=o[t].id(),r=[],s={},f={},h={},v=new gr((function(t,n){return h[t]-h[n]})),d=0;d<o.length;d++){var g=o[d].id();s[g]=[],f[g]=0,h[g]=1/0}for(f[n]=1,h[n]=0,v.push(n);!v.empty();){var p=v.pop();if(r.push(p),i)for(var y=0;y<u[p].length;y++){var m=u[p][y],b=a.getElementById(p),w=void 0;w=b.edgesTo(m).length>0?b.edgesTo(m)[0]:m.edgesTo(b)[0];var x=e(w);m=m.id(),h[m]>h[p]+x&&(h[m]=h[p]+x,v.nodes.indexOf(m)<0?v.push(m):v.updateItem(m),f[m]=0,s[m]=[]),h[m]==h[p]+x&&(f[m]=f[m]+f[p],s[m].push(p))}else for(var M=0;M<u[p].length;M++){var k=u[p][M].id();h[k]==1/0&&(v.push(k),h[k]=h[p]+1),h[k]==h[p]+1&&(f[k]=f[k]+f[p],s[k].push(p))}}for(var E={},S=0;S<o.length;S++)E[o[S].id()]=0;for(;r.length>0;){for(var A=r.pop(),z=0;z<s[A].length;z++){var B=s[A][z];E[B]=E[B]+f[B]/f[A]*(1+E[A])}A!=o[t].id()&&c(A,l(A)+E[A])}},p=0;p<o.length;p++)g(p);var y={betweenness:function(t){var n=a.collection(t).id();return l(n)},betweennessNormalized:function(t){if(0==f)return 0;var n=a.collection(t).id();return l(n)/f}};return y.betweennessNormalised=y.betweennessNormalized,y}};Ee.bc=Ee.betweennessCentrality;var Se=er({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),Ae=function(t,n){for(var r=0,e=0;e<n.length;e++)r+=n[e](t);return r},ze=function(t,n){for(var r,e=0;e<n;e++){r=0;for(var i=0;i<n;i++)r+=t[i*n+e];for(var a=0;a<n;a++)t[a*n+e]=t[a*n+e]/r}},Be=function(t,n,r){for(var e=new Array(r*r),i=0;i<r;i++){for(var a=0;a<r;a++)e[i*r+a]=0;for(var o=0;o<r;o++)for(var u=0;u<r;u++)e[i*r+u]+=t[i*r+o]*n[o*r+u]}return e},Ce=function(t,n,r){for(var e=t.slice(0),i=1;i<r;i++)t=Be(t,e,n);return t},Te=function(t,n,r){for(var e=new Array(n*n),i=0;i<n*n;i++)e[i]=Math.pow(t[i],r);return ze(e,n),e},Oe=function(t,n,r,e){for(var i=0;i<r;i++){if(Math.round(t[i]*Math.pow(10,e))/Math.pow(10,e)!==Math.round(n[i]*Math.pow(10,e))/Math.pow(10,e))return!1}return!0},Pe=function(t,n){for(var r=0;r<t.length;r++)if(!n[r]||t[r].id()!==n[r].id())return!1;return!0},Ne=function(t){for(var n=this.nodes(),r=this.edges(),e=this.cy(),i=function(t){return Se(t)}(t),a={},o=0;o<n.length;o++)a[n[o].id()]=o;for(var u,s=n.length,f=s*s,c=new Array(f),l=0;l<f;l++)c[l]=0;for(var h=0;h<r.length;h++){var v=r[h],d=a[v.source().id()],g=a[v.target().id()],p=Ae(v,i.attributes);c[d*s+g]+=p,c[g*s+d]+=p}!function(t,n,r){for(var e=0;e<n;e++)t[e*n+e]=r}(c,s,i.multFactor),ze(c,s);for(var y=!0,m=0;y&&m<i.maxIterations;)y=!1,u=Ce(c,s,i.expandFactor),c=Te(u,s,i.inflateFactor),Oe(c,u,f,4)||(y=!0),m++;var b=function(t,n,r,e){for(var i=[],a=0;a<n;a++){for(var o=[],u=0;u<n;u++)Math.round(1e3*t[a*n+u])/1e3>0&&o.push(r[u]);0!==o.length&&i.push(e.collection(o))}return i}(c,s,n,e);return b=function(t){for(var n=0;n<t.length;n++)for(var r=0;r<t.length;r++)n!=r&&Pe(t[n],t[r])&&t.splice(r,1);return t}(b),b},je={markovClustering:Ne,mcl:Ne},Fe=function(t){return t},De=function(t,n){return Math.abs(n-t)},Ie=function(t,n,r){return t+De(n,r)},$e=function(t,n,r){return t+Math.pow(r-n,2)},Le=function(t){return Math.sqrt(t)},Re=function(t,n,r){return Math.max(t,De(n,r))},_e=function(t,n,r,e,i){for(var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Fe,o=e,u=0;u<t;u++)o=i(o,n(u),r(u));return a(o)},qe={euclidean:function(t,n,r){return t>=2?_e(t,n,r,0,$e,Le):_e(t,n,r,0,Ie)},squaredEuclidean:function(t,n,r){return _e(t,n,r,0,$e)},manhattan:function(t,n,r){return _e(t,n,r,0,Ie)},max:function(t,n,r){return _e(t,n,r,-1/0,Re)}};function Ve(t,n,r,e,i,a){var o;return o=Mt(t)?t:qe[t]||qe.euclidean,0===n&&Mt(t)?o(i,a):o(n,r,e,i,a)}qe["squared-euclidean"]=qe.squaredEuclidean,qe.squaredeuclidean=qe.squaredEuclidean;var Ue=er({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),We=function(t){return Ue(t)},Ze=function(t,n,r,e,i){var a="kMedoids"!==i?function(t){return r[t]}:function(t){return e[t](r)},o=r,u=n;return Ve(t,e.length,a,(function(t){return e[t](n)}),o,u)},He=function(t,n,r){for(var e=r.length,i=new Array(e),a=new Array(e),o=new Array(n),u=null,s=0;s<e;s++)i[s]=t.min(r[s]).value,a[s]=t.max(r[s]).value;for(var f=0;f<n;f++){u=[];for(var c=0;c<e;c++)u[c]=Math.random()*(a[c]-i[c])+i[c];o[f]=u}return o},Ke=function(t,n,r,e,i){for(var a=1/0,o=0,u=0;u<n.length;u++){var s=Ze(r,t,n[u],e,i);s<a&&(a=s,o=u)}return o},Ge=function(t,n,r){for(var e=[],i=null,a=0;a<n.length;a++)r[(i=n[a]).id()]===t&&e.push(i);return e},Ye=function(t,n,r){return Math.abs(n-t)<=r},Xe=function(t,n,r){for(var e=0;e<t.length;e++)for(var i=0;i<t[e].length;i++){if(Math.abs(t[e][i]-n[e][i])>r)return!1}return!0},Qe=function(t,n,r){for(var e=0;e<r;e++)if(t===n[e])return!0;return!1},Je=function(t,n){var r=new Array(n);if(t.length<50)for(var e=0;e<n;e++){for(var i=t[Math.floor(Math.random()*t.length)];Qe(i,r,e);)i=t[Math.floor(Math.random()*t.length)];r[e]=i}else for(var a=0;a<n;a++)r[a]=t[Math.floor(Math.random()*t.length)];return r},ti=function(t,n,r){for(var e=0,i=0;i<n.length;i++)e+=Ze("manhattan",n[i],t,r,"kMedoids");return e},ni=function(t,n,r,e,i){for(var a,o,u=0;u<n.length;u++)for(var s=0;s<t.length;s++)e[u][s]=Math.pow(r[u][s],i.m);for(var f=0;f<t.length;f++)for(var c=0;c<i.attributes.length;c++){a=0,o=0;for(var l=0;l<n.length;l++)a+=e[l][f]*i.attributes[c](n[l]),o+=e[l][f];t[f][c]=a/o}},ri=function(t,n,r,e,i){for(var a=0;a<t.length;a++)n[a]=t[a].slice();for(var o,u,s,f=2/(i.m-1),c=0;c<r.length;c++)for(var l=0;l<e.length;l++){o=0;for(var h=0;h<r.length;h++)u=Ze(i.distance,e[l],r[c],i.attributes,"cmeans"),s=Ze(i.distance,e[l],r[h],i.attributes,"cmeans"),o+=Math.pow(u/s,f);t[l][c]=1/o}},ei=function(t){var n,r,e,i,a,o=this.cy(),u=this.nodes(),s=We(t);i=new Array(u.length);for(var f=0;f<u.length;f++)i[f]=new Array(s.k);e=new Array(u.length);for(var c=0;c<u.length;c++)e[c]=new Array(s.k);for(var l=0;l<u.length;l++){for(var h=0,v=0;v<s.k;v++)e[l][v]=Math.random(),h+=e[l][v];for(var d=0;d<s.k;d++)e[l][d]=e[l][d]/h}r=new Array(s.k);for(var g=0;g<s.k;g++)r[g]=new Array(s.attributes.length);a=new Array(u.length);for(var p=0;p<u.length;p++)a[p]=new Array(s.k);for(var y=!0,m=0;y&&m<s.maxIterations;)y=!1,ni(r,u,e,a,s),ri(e,i,r,u,s),Xe(e,i,s.sensitivityThreshold)||(y=!0),m++;return n=function(t,n,r,e){for(var i,a,o=new Array(r.k),u=0;u<o.length;u++)o[u]=[];for(var s=0;s<n.length;s++){i=-1/0,a=-1;for(var f=0;f<n[0].length;f++)n[s][f]>i&&(i=n[s][f],a=f);o[a].push(t[s])}for(var c=0;c<o.length;c++)o[c]=e.collection(o[c]);return o}(u,e,s,o),{clusters:n,degreeOfMembership:e}},ii={kMeans:function(t){var n,r=this.cy(),e=this.nodes(),i=null,a=We(t),o=new Array(a.k),u={};a.testMode?"number"==typeof a.testCentroids?(a.testCentroids,n=He(e,a.k,a.attributes)):n="object"===ot(a.testCentroids)?a.testCentroids:He(e,a.k,a.attributes):n=He(e,a.k,a.attributes);for(var s=!0,f=0;s&&f<a.maxIterations;){for(var c=0;c<e.length;c++)u[(i=e[c]).id()]=Ke(i,n,a.distance,a.attributes,"kMeans");s=!1;for(var l=0;l<a.k;l++){var h=Ge(l,e,u);if(0!==h.length){for(var v=a.attributes.length,d=n[l],g=new Array(v),p=new Array(v),y=0;y<v;y++){p[y]=0;for(var m=0;m<h.length;m++)i=h[m],p[y]+=a.attributes[y](i);g[y]=p[y]/h.length,Ye(g[y],d[y],a.sensitivityThreshold)||(s=!0)}n[l]=g,o[l]=r.collection(h)}}f++}return o},kMedoids:function(t){var n,r,e=this.cy(),i=this.nodes(),a=null,o=We(t),u=new Array(o.k),s={},f=new Array(o.k);o.testMode?"number"==typeof o.testCentroids||(n="object"===ot(o.testCentroids)?o.testCentroids:Je(i,o.k)):n=Je(i,o.k);for(var c=!0,l=0;c&&l<o.maxIterations;){for(var h=0;h<i.length;h++)s[(a=i[h]).id()]=Ke(a,n,o.distance,o.attributes,"kMedoids");c=!1;for(var v=0;v<n.length;v++){var d=Ge(v,i,s);if(0!==d.length){f[v]=ti(n[v],d,o.attributes);for(var g=0;g<d.length;g++)(r=ti(d[g],d,o.attributes))<f[v]&&(f[v]=r,n[v]=d[g],c=!0);u[v]=e.collection(d)}}l++}return u},fuzzyCMeans:ei,fcm:ei},ai=er({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),oi={single:"min",complete:"max"},ui=function(t,n,r,e,i){for(var a,o=0,u=1/0,s=i.attributes,f=function(t,n){return Ve(i.distance,s.length,(function(n){return s[n](t)}),(function(t){return s[t](n)}),t,n)},c=0;c<t.length;c++){var l=t[c].key,h=r[l][e[l]];h<u&&(o=l,u=h)}if("threshold"===i.mode&&u>=i.threshold||"dendrogram"===i.mode&&1===t.length)return!1;var v,d=n[o],g=n[e[o]];v="dendrogram"===i.mode?{left:d,right:g,key:d.key}:{value:d.value.concat(g.value),key:d.key},t[d.index]=v,t.splice(g.index,1),n[d.key]=v;for(var p=0;p<t.length;p++){var y=t[p];d.key===y.key?a=1/0:"min"===i.linkage?(a=r[d.key][y.key],r[d.key][y.key]>r[g.key][y.key]&&(a=r[g.key][y.key])):"max"===i.linkage?(a=r[d.key][y.key],r[d.key][y.key]<r[g.key][y.key]&&(a=r[g.key][y.key])):a="mean"===i.linkage?(r[d.key][y.key]*d.size+r[g.key][y.key]*g.size)/(d.size+g.size):"dendrogram"===i.mode?f(y.value,d.value):f(y.value[0],d.value[0]),r[d.key][y.key]=r[y.key][d.key]=a}for(var m=0;m<t.length;m++){var b=t[m].key;if(e[b]===d.key||e[b]===g.key){for(var w=b,x=0;x<t.length;x++){var M=t[x].key;r[b][M]<r[b][w]&&(w=M)}e[b]=w}t[m].index=m}return d.key=g.key=d.index=g.index=null,!0},si=function t(n,r,e){n&&(n.value?r.push(n.value):(n.left&&t(n.left,r),n.right&&t(n.right,r)))},fi=function t(n,r){if(!n)return"";if(n.left&&n.right){var e=t(n.left,r),i=t(n.right,r),a=r.add({group:"nodes",data:{id:e+","+i}});return r.add({group:"edges",data:{source:e,target:a.id()}}),r.add({group:"edges",data:{source:i,target:a.id()}}),a.id()}return n.value?n.value.id():void 0},ci=function t(n,r,e){if(!n)return[];var i=[],a=[],o=[];return 0===r?(n.left&&si(n.left,i),n.right&&si(n.right,a),o=i.concat(a),[e.collection(o)]):1===r?n.value?[e.collection(n.value)]:(n.left&&si(n.left,i),n.right&&si(n.right,a),[e.collection(i),e.collection(a)]):n.value?[e.collection(n.value)]:(n.left&&(i=t(n.left,r-1,e)),n.right&&(a=t(n.right,r-1,e)),i.concat(a))},li=function(t){for(var n=this.cy(),r=this.nodes(),e=function(t){var n=ai(t),r=oi[n.linkage];return null!=r&&(n.linkage=r),n}(t),i=e.attributes,a=function(t,n){return Ve(e.distance,i.length,(function(n){return i[n](t)}),(function(t){return i[t](n)}),t,n)},o=[],u=[],s=[],f=[],c=0;c<r.length;c++){var l={value:"dendrogram"===e.mode?r[c]:[r[c]],key:c,index:c};o[c]=l,f[c]=l,u[c]=[],s[c]=0}for(var h=0;h<o.length;h++)for(var v=0;v<=h;v++){var d=void 0;d="dendrogram"===e.mode?h===v?1/0:a(o[h].value,o[v].value):h===v?1/0:a(o[h].value[0],o[v].value[0]),u[h][v]=d,u[v][h]=d,d<u[h][s[h]]&&(s[h]=v)}for(var g,p=ui(o,f,u,s,e);p;)p=ui(o,f,u,s,e);return"dendrogram"===e.mode?(g=ci(o[0],e.dendrogramDepth,n),e.addDendrogram&&fi(o[0],n)):(g=new Array(o.length),o.forEach((function(t,r){t.key=t.index=null,g[r]=n.collection(t.value)}))),g},hi={hierarchicalClustering:li,hca:li},vi=er({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),di=function(t,n,r,e){var i=function(t,n){return e[n](t)};return-Ve(t,e.length,(function(t){return i(n,t)}),(function(t){return i(r,t)}),n,r)},gi=function(t,n){var r=null;return r="median"===n?function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,e=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?(r<t.length&&t.splice(r,t.length-r),n>0&&t.splice(0,n)):t=t.slice(n,r);for(var a=0,o=t.length-1;o>=0;o--){var u=t[o];i?isFinite(u)||(t[o]=-1/0,a++):t.splice(o,1)}e&&t.sort((function(t,n){return t-n}));var s=t.length,f=Math.floor(s/2);return s%2!=0?t[f+1+a]:(t[f-1+a]+t[f+a])/2}(t):"mean"===n?function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,e=0,i=0,a=n;a<r;a++){var o=t[a];isFinite(o)&&(e+=o,i++)}return e/i}(t):"min"===n?function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,e=1/0,i=n;i<r;i++){var a=t[i];isFinite(a)&&(e=Math.min(a,e))}return e}(t):"max"===n?function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,e=-1/0,i=n;i<r;i++){var a=t[i];isFinite(a)&&(e=Math.max(a,e))}return e}(t):n,r},pi=function(t,n,r){for(var e=[],i=0;i<t;i++){for(var a=-1,o=-1/0,u=0;u<r.length;u++){var s=r[u];n[i*t+s]>o&&(a=s,o=n[i*t+s])}a>0&&e.push(a)}for(var f=0;f<r.length;f++)e[r[f]]=r[f];return e},yi=function(t){for(var n,r,e,i,a,o,u=this.cy(),s=this.nodes(),f=function(t){var n=t.damping,r=t.preference;.5<=n&&n<1||Yn("Damping must range on [0.5, 1).  Got: ".concat(n));var e=["median","mean","min","max"];return e.some((function(t){return t===r}))||St(r)||Yn("Preference must be one of [".concat(e.map((function(t){return"'".concat(t,"'")})).join(", "),"] or a number.  Got: ").concat(r)),vi(t)}(t),c={},l=0;l<s.length;l++)c[s[l].id()]=l;r=(n=s.length)*n,e=new Array(r);for(var h=0;h<r;h++)e[h]=-1/0;for(var v=0;v<n;v++)for(var d=0;d<n;d++)v!==d&&(e[v*n+d]=di(f.distance,s[v],s[d],f.attributes));i=gi(e,f.preference);for(var g=0;g<n;g++)e[g*n+g]=i;a=new Array(r);for(var p=0;p<r;p++)a[p]=0;o=new Array(r);for(var y=0;y<r;y++)o[y]=0;for(var m=new Array(n),b=new Array(n),w=new Array(n),x=0;x<n;x++)m[x]=0,b[x]=0,w[x]=0;for(var M,k=new Array(n*f.minIterations),E=0;E<k.length;E++)k[E]=0;for(M=0;M<f.maxIterations;M++){for(var S=0;S<n;S++){for(var A=-1/0,z=-1/0,B=-1,C=0,T=0;T<n;T++)m[T]=a[S*n+T],(C=o[S*n+T]+e[S*n+T])>=A?(z=A,A=C,B=T):C>z&&(z=C);for(var O=0;O<n;O++)a[S*n+O]=(1-f.damping)*(e[S*n+O]-A)+f.damping*m[O];a[S*n+B]=(1-f.damping)*(e[S*n+B]-z)+f.damping*m[B]}for(var P=0;P<n;P++){for(var N=0,j=0;j<n;j++)m[j]=o[j*n+P],b[j]=Math.max(0,a[j*n+P]),N+=b[j];N-=b[P],b[P]=a[P*n+P],N+=b[P];for(var F=0;F<n;F++)o[F*n+P]=(1-f.damping)*Math.min(0,N-b[F])+f.damping*m[F];o[P*n+P]=(1-f.damping)*(N-b[P])+f.damping*m[P]}for(var D=0,I=0;I<n;I++){var $=o[I*n+I]+a[I*n+I]>0?1:0;k[M%f.minIterations*n+I]=$,D+=$}if(D>0&&(M>=f.minIterations-1||M==f.maxIterations-1)){for(var L=0,R=0;R<n;R++){w[R]=0;for(var _=0;_<f.minIterations;_++)w[R]+=k[_*n+R];0!==w[R]&&w[R]!==f.minIterations||L++}if(L===n)break}}for(var q=function(t,n,r){for(var e=[],i=0;i<t;i++)n[i*t+i]+r[i*t+i]>0&&e.push(i);return e}(n,a,o),V=function(t,n,r){for(var e=pi(t,n,r),i=0;i<r.length;i++){for(var a=[],o=0;o<e.length;o++)e[o]===r[i]&&a.push(o);for(var u=-1,s=-1/0,f=0;f<a.length;f++){for(var c=0,l=0;l<a.length;l++)c+=n[a[l]*t+a[f]];c>s&&(u=f,s=c)}r[i]=a[u]}return pi(t,n,r)}(n,e,q),U={},W=0;W<q.length;W++)U[q[W]]=[];for(var Z=0;Z<s.length;Z++){var H=V[c[s[Z].id()]];null!=H&&U[H].push(s[Z])}for(var K=new Array(q.length),G=0;G<q.length;G++)K[G]=u.collection(U[q[G]]);return K},mi={affinityPropagation:yi,ap:yi},bi=er({root:void 0,directed:!1}),wi={hierholzer:function(t){if(!Et(t)){var n=arguments;t={root:n[0],directed:n[1]}}var r,e,i,a=bi(t),o=a.root,u=a.directed,s=this,f=!1;o&&(i=xt(o)?this.filter(o)[0].id():o[0].id());var c={},l={};u?s.forEach((function(t){var n=t.id();if(t.isNode()){var i=t.indegree(!0),a=t.outdegree(!0),o=i-a,u=a-i;1==o?r?f=!0:r=n:1==u?e?f=!0:e=n:(u>1||o>1)&&(f=!0),c[n]=[],t.outgoers().forEach((function(t){t.isEdge()&&c[n].push(t.id())}))}else l[n]=[void 0,t.target().id()]})):s.forEach((function(t){var n=t.id();t.isNode()?(t.degree(!0)%2&&(r?e?f=!0:e=n:r=n),c[n]=[],t.connectedEdges().forEach((function(t){return c[n].push(t.id())}))):l[n]=[t.source().id(),t.target().id()]}));var h={found:!1,trail:void 0};if(f)return h;if(e&&r)if(u){if(i&&e!=i)return h;i=e}else{if(i&&e!=i&&r!=i)return h;i||(i=e)}else i||(i=s[0].id());var v=function(t){for(var n,r,e,i=t,a=[t];c[i].length;)n=c[i].shift(),r=l[n][0],i!=(e=l[n][1])?(c[e]=c[e].filter((function(t){return t!=n})),i=e):u||i==r||(c[r]=c[r].filter((function(t){return t!=n})),i=r),a.unshift(n),a.unshift(i);return a},d=[],g=[];for(g=v(i);1!=g.length;)0==c[g[0]].length?(d.unshift(s.getElementById(g.shift())),d.unshift(s.getElementById(g.shift()))):g=v(g.shift()).concat(g);for(var p in d.unshift(s.getElementById(g.shift())),c)if(c[p].length)return h;return h.found=!0,h.trail=this.spawn(d,!0),h}},xi=function(){var t=this,n={},r=0,e=0,i=[],a=[],o={},u=function u(s,f,c){s===c&&(e+=1),n[f]={id:r,low:r++,cutVertex:!1};var l,h,v,d,g=t.getElementById(f).connectedEdges().intersection(t);0===g.size()?i.push(t.spawn(t.getElementById(f))):g.forEach((function(r){l=r.source().id(),h=r.target().id(),(v=l===f?h:l)!==c&&(d=r.id(),o[d]||(o[d]=!0,a.push({x:f,y:v,edge:r})),v in n?n[f].low=Math.min(n[f].low,n[v].id):(u(s,v,f),n[f].low=Math.min(n[f].low,n[v].low),n[f].id<=n[v].low&&(n[f].cutVertex=!0,function(r,e){for(var o=a.length-1,u=[],s=t.spawn();a[o].x!=r||a[o].y!=e;)u.push(a.pop().edge),o--;u.push(a.pop().edge),u.forEach((function(r){var e=r.connectedNodes().intersection(t);s.merge(r),e.forEach((function(r){var e=r.id(),i=r.connectedEdges().intersection(t);s.merge(r),n[e].cutVertex?s.merge(i.filter((function(t){return t.isLoop()}))):s.merge(i)}))})),i.push(s)}(f,v))))}))};t.forEach((function(t){if(t.isNode()){var r=t.id();r in n||(e=0,u(r,r),n[r].cutVertex=e>1)}}));var s=Object.keys(n).filter((function(t){return n[t].cutVertex})).map((function(n){return t.getElementById(n)}));return{cut:t.spawn(s),components:i}},Mi=function(){var t=this,n={},r=0,e=[],i=[],a=t.spawn(t),o=function o(u){if(i.push(u),n[u]={index:r,low:r++,explored:!1},t.getElementById(u).connectedEdges().intersection(t).forEach((function(t){var r=t.target().id();r!==u&&(r in n||o(r),n[r].explored||(n[u].low=Math.min(n[u].low,n[r].low)))})),n[u].index===n[u].low){for(var s=t.spawn();;){var f=i.pop();if(s.merge(t.getElementById(f)),n[f].low=n[u].index,n[f].explored=!0,f===u)break}var c=s.edgesWith(s),l=s.merge(c);e.push(l),a=a.difference(l)}};return t.forEach((function(t){if(t.isNode()){var r=t.id();r in n||o(r)}})),{cut:a,components:e}},ki={};[vr,yr,mr,wr,Mr,Er,Br,me,we,Me,Ee,je,ii,hi,mi,wi,{hopcroftTarjanBiconnected:xi,htbc:xi,htb:xi,hopcroftTarjanBiconnectedComponents:xi},{tarjanStronglyConnected:Mi,tsc:Mi,tscc:Mi,tarjanStronglyConnectedComponents:Mi}].forEach((function(t){Wt(ki,t)}));
/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/
var Ei=function t(n){if(!(this instanceof t))return new t(n);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof n&&n.call(this,this.fulfill.bind(this),this.reject.bind(this))};Ei.prototype={fulfill:function(t){return Si(this,1,"fulfillValue",t)},reject:function(t){return Si(this,2,"rejectReason",t)},then:function(t,n){var r=this,e=new Ei;return r.onFulfilled.push(Bi(t,e,"fulfill")),r.onRejected.push(Bi(n,e,"reject")),Ai(r),e.proxy}};var Si=function(t,n,r,e){return 0===t.state&&(t.state=n,t[r]=e,Ai(t)),t},Ai=function(t){1===t.state?zi(t,"onFulfilled",t.fulfillValue):2===t.state&&zi(t,"onRejected",t.rejectReason)},zi=function(t,n,r){if(0!==t[n].length){var e=t[n];t[n]=[];var i=function(){for(var t=0;t<e.length;t++)e[t](r)};"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}},Bi=function(t,n,r){return function(e){if("function"!=typeof t)n[r].call(n,e);else{var i;try{i=t(e)}catch(t){return void n.reject(t)}Ci(n,i)}}},Ci=function t(n,r){if(n!==r&&n.proxy!==r){var e;if("object"===ot(r)&&null!==r||"function"==typeof r)try{e=r.then}catch(t){return void n.reject(t)}if("function"!=typeof e)n.fulfill(r);else{var i=!1;try{e.call(r,(function(e){i||(i=!0,e===r?n.reject(new TypeError("circular thenable chain")):t(n,e))}),(function(t){i||(i=!0,n.reject(t))}))}catch(t){i||n.reject(t)}}}else n.reject(new TypeError("cannot resolve promise with itself"))};Ei.all=function(t){return new Ei((function(n,r){for(var e=new Array(t.length),i=0,a=function(r,a){e[r]=a,++i===t.length&&n(e)},o=0;o<t.length;o++)!function(n){var e=t[n];null!=e&&null!=e.then?e.then((function(t){a(n,t)}),(function(t){r(t)})):a(n,e)}(o)}))},Ei.resolve=function(t){return new Ei((function(n,r){n(t)}))},Ei.reject=function(t){return new Ei((function(n,r){r(t)}))};var Ti="undefined"!=typeof Promise?Promise:Ei,Oi=function(t,n,r){var e=Tt(t),i=!e,a=this._private=Wt({duration:1e3},n,r);if(a.target=t,a.style=a.style||a.css,a.started=!1,a.playing=!1,a.hooked=!1,a.applying=!1,a.progress=0,a.completes=[],a.frames=[],a.complete&&Mt(a.complete)&&a.completes.push(a.complete),i){var o=t.position();a.startPosition=a.startPosition||{x:o.x,y:o.y},a.startStyle=a.startStyle||t.cy().style().getAnimationStartStyle(t,a.style)}if(e){var u=t.pan();a.startPan={x:u.x,y:u.y},a.startZoom=t.zoom()}this.length=1,this[0]=this},Pi=Oi.prototype;Wt(Pi,{instanceString:function(){return"animation"},hook:function(){var t=this._private;if(!t.hooked){var n=t.target._private.animation;(t.queue?n.queue:n.current).push(this),zt(t.target)&&t.target.cy().addToAnimationPool(t.target),t.hooked=!0}return this},play:function(){var t=this._private;return 1===t.progress&&(t.progress=0),t.playing=!0,t.started=!1,t.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var t=this._private;return t.applying=!0,t.started=!1,t.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var t=this._private;return t.playing=!1,t.started=!1,this},stop:function(){var t=this._private;return t.playing=!1,t.started=!1,t.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(t){var n=this._private;return void 0===t?n.progress*n.duration:this.progress(t/n.duration)},progress:function(t){var n=this._private,r=n.playing;return void 0===t?n.progress:(r&&this.pause(),n.progress=t,n.started=!1,r&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var t=this._private,n=t.playing;n&&this.pause(),t.progress=1-t.progress,t.started=!1;var r=function(n,r){var e=t[n];null!=e&&(t[n]=t[r],t[r]=e)};if(r("zoom","startZoom"),r("pan","startPan"),r("position","startPosition"),t.style)for(var e=0;e<t.style.length;e++){var i=t.style[e],a=i.name,o=t.startStyle[a];t.startStyle[a]=i,t.style[e]=o}return n&&this.play(),this},promise:function(t){var n,r=this._private;if("frame"===t)n=r.frames;else n=r.completes;return new Ti((function(t,r){n.push((function(){t()}))}))}}),Pi.complete=Pi.completed,Pi.run=Pi.play,Pi.running=Pi.playing;var Ni={animated:function(){return function(){var t=this,n=void 0!==t.length?t:[t];if(!(this._private.cy||this).styleEnabled())return!1;var r=n[0];return r?r._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var t=this,n=void 0!==t.length?t:[t];if(!(this._private.cy||this).styleEnabled())return this;for(var r=0;r<n.length;r++){n[r]._private.animation.queue=[]}return this}},delay:function(){return function(t,n){return(this._private.cy||this).styleEnabled()?this.animate({delay:t,duration:t,complete:n}):this}},delayAnimation:function(){return function(t,n){return(this._private.cy||this).styleEnabled()?this.animation({delay:t,duration:t,complete:n}):this}},animation:function(){return function(t,n){var r=this,e=void 0!==r.length,i=e?r:[r],a=this._private.cy||this,o=!e,u=!o;if(!a.styleEnabled())return this;var s=a.style();if(t=Wt({},t,n),0===Object.keys(t).length)return new Oi(i[0],t);switch(void 0===t.duration&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200}if(u&&(t.style=s.getPropsList(t.style||t.css),t.css=void 0),u&&null!=t.renderedPosition){var f=t.renderedPosition,c=a.pan(),l=a.zoom();t.position=Tr(f,l,c)}if(o&&null!=t.panBy){var h=t.panBy,v=a.pan();t.pan={x:v.x+h.x,y:v.y+h.y}}var d=t.center||t.centre;if(o&&null!=d){var g=a.getCenterPan(d.eles,t.zoom);null!=g&&(t.pan=g)}if(o&&null!=t.fit){var p=t.fit,y=a.getFitViewport(p.eles||p.boundingBox,p.padding);null!=y&&(t.pan=y.pan,t.zoom=y.zoom)}if(o&&Et(t.zoom)){var m=a.getZoomedViewport(t.zoom);null!=m?(m.zoomed&&(t.zoom=m.zoom),m.panned&&(t.pan=m.pan)):t.zoom=null}return new Oi(i[0],t)}},animate:function(){return function(t,n){var r=this,e=void 0!==r.length?r:[r];if(!(this._private.cy||this).styleEnabled())return this;n&&(t=Wt({},t,n));for(var i=0;i<e.length;i++){var a=e[i],o=a.animated()&&(void 0===t.queue||t.queue);a.animation(t,o?{queue:!0}:void 0).play()}return this}},stop:function(){return function(t,n){var r=this,e=void 0!==r.length?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var a=0;a<e.length;a++){for(var o=e[a]._private,u=o.animation.current,s=0;s<u.length;s++){var f=u[s]._private;n&&(f.duration=0)}t&&(o.animation.queue=[]),n||(o.animation.current=[])}return i.notify("draw"),this}}},ji=Array.isArray,Fi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Di=/^\w*$/;var Ii=function(t,n){if(ji(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!mn(t))||(Di.test(t)||!Fi.test(t)||null!=n&&t in Object(n))};var $i,Li=function(t){if(!Yt(t))return!1;var n=pn(t);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n},Ri=tn["i"],_i=($i=/[^.]+$/.exec(Ri&&Ri.keys&&Ri.keys.IE_PROTO||""))?"Symbol(src)_1."+$i:"";var qi=function(t){return!!_i&&_i in t},Vi=Function.prototype.toString;var Ui=function(t){if(null!=t){try{return Vi.call(t)}catch(t){}try{return t+""}catch(t){}}return""},Wi=/^\[object .+?Constructor\]$/,Zi=Function.prototype,Hi=Object.prototype,Ki=Zi.toString,Gi=Hi.hasOwnProperty,Yi=RegExp("^"+Ki.call(Gi).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Xi=function(t){return!(!Yt(t)||qi(t))&&(Li(t)?Yi:Wi).test(Ui(t))};var Qi=function(t,n){return null==t?void 0:t[n]};var Ji=function(t,n){var r=Qi(t,n);return Xi(r)?r:void 0},ta=Ji(Object,"create");var na=function(){this.M=ta?ta(null):{},this.size=0};var ra=function(t){var n=this.has(t)&&delete this.M[t];return this.size-=n?1:0,n},ea=Object.prototype.hasOwnProperty;var ia=function(t){var n=this.M;if(ta){var r=n[t];return"__lodash_hash_undefined__"===r?void 0:r}return ea.call(n,t)?n[t]:void 0},aa=Object.prototype.hasOwnProperty;var oa=function(t){var n=this.M;return ta?void 0!==n[t]:aa.call(n,t)};var ua=function(t,n){var r=this.M;return this.size+=this.has(t)?0:1,r[t]=ta&&void 0===n?"__lodash_hash_undefined__":n,this};function sa(t){var n=-1,r=null==t?0:t.length;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}sa.prototype.clear=na,sa.prototype.delete=ra,sa.prototype.get=ia,sa.prototype.has=oa,sa.prototype.set=ua;var fa=sa;var ca=function(){this.M=[],this.size=0};var la=function(t,n){return t===n||t!=t&&n!=n};var ha=function(t,n){for(var r=t.length;r--;)if(la(t[r][0],n))return r;return-1},va=Array.prototype.splice;var da=function(t){var n=this.M,r=ha(n,t);return!(r<0)&&(r==n.length-1?n.pop():va.call(n,r,1),--this.size,!0)};var ga=function(t){var n=this.M,r=ha(n,t);return r<0?void 0:n[r][1]};var pa=function(t){return ha(this.M,t)>-1};var ya=function(t,n){var r=this.M,e=ha(r,t);return e<0?(++this.size,r.push([t,n])):r[e][1]=n,this};function ma(t){var n=-1,r=null==t?0:t.length;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}ma.prototype.clear=ca,ma.prototype.delete=da,ma.prototype.get=ga,ma.prototype.has=pa,ma.prototype.set=ya;var ba=ma,wa=Ji(tn,"Map");var xa=function(){this.size=0,this.M={hash:new fa,map:new(wa||ba),string:new fa}};var Ma=function(t){var n=typeof t;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t};var ka=function(t,n){var r=t.M;return Ma(n)?r["string"==typeof n?"string":"hash"]:r.map};var Ea=function(t){var n=ka(this,t).delete(t);return this.size-=n?1:0,n};var Sa=function(t){return ka(this,t).get(t)};var Aa=function(t){return ka(this,t).has(t)};var za=function(t,n){var r=ka(this,t),e=r.size;return r.set(t,n),this.size+=r.size==e?0:1,this};function Ba(t){var n=-1,r=null==t?0:t.length;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}Ba.prototype.clear=xa,Ba.prototype.delete=Ea,Ba.prototype.get=Sa,Ba.prototype.has=Aa,Ba.prototype.set=za;var Ca=Ba;function Ta(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var r=function(){var e=arguments,i=n?n.apply(this,e):e[0],a=r.cache;if(a.has(i))return a.get(i);var o=t.apply(this,e);return r.cache=a.set(i,o)||a,o};return r.cache=new(Ta.Cache||Ca),r}Ta.Cache=Ca;var Oa=Ta;var Pa=function(t){var n=Oa(t,(function(t){return 500===r.size&&r.clear(),t})),r=n.cache;return n},Na=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ja=/\\(\\)?/g,Fa=Pa((function(t){var n=[];return 46===t.charCodeAt(0)&&n.push(""),t.replace(Na,(function(t,r,e,i){n.push(e?i.replace(ja,"$1"):r||t)})),n})),Da=Fa;var Ia=function(t,n){for(var r=-1,e=null==t?0:t.length,i=Array(e);++r<e;)i[r]=n(t[r],r,t);return i},$a=un?un.prototype:void 0,La=$a?$a.toString:void 0;var Ra=function t(n){if("string"==typeof n)return n;if(ji(n))return Ia(n,t)+"";if(mn(n))return La?La.call(n):"";var r=n+"";return"0"==r&&1/n==-1/0?"-0":r};var _a=function(t){return null==t?"":Ra(t)};var qa=function(t,n){return ji(t)?t:Ii(t,n)?[t]:Da(_a(t))};var Va=function(t){if("string"==typeof t||mn(t))return t;var n=t+"";return"0"==n&&1/t==-1/0?"-0":n};var Ua=function(t,n){for(var r=0,e=(n=qa(n,t)).length;null!=t&&r<e;)t=t[Va(n[r++])];return r&&r==e?t:void 0};var Wa=function(t,n,r){var e=null==t?void 0:Ua(t,n);return void 0===e?r:e},Za=function(){try{var t=Ji(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var Ha=function(t,n,r){"__proto__"==n&&Za?Za(t,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[n]=r},Ka=Object.prototype.hasOwnProperty;var Ga=function(t,n,r){var e=t[n];Ka.call(t,n)&&la(e,r)&&(void 0!==r||n in t)||Ha(t,n,r)},Ya=/^(?:0|[1-9]\d*)$/;var Xa=function(t,n){var r=typeof t;return!!(n=n??9007199254740991)&&("number"==r||"symbol"!=r&&Ya.test(t))&&t>-1&&t%1==0&&t<n};var Qa=function(t,n,r,e){if(!Yt(t))return t;for(var i=-1,a=(n=qa(n,t)).length,o=a-1,u=t;null!=u&&++i<a;){var s=Va(n[i]),f=r;if("__proto__"===s||"constructor"===s||"prototype"===s)return t;if(i!=o){var c=u[s];void 0===(f=e?e(c,s,u):void 0)&&(f=Yt(c)?c:Xa(n[i+1])?[]:{})}Ga(u,s,f),u=u[s]}return t};var Ja=function(t,n,r){return null==t?t:Qa(t,n,r)};var to=function(t,n){var r=-1,e=t.length;for(n||(n=Array(e));++r<e;)n[r]=t[r];return n};var no=function(t){return ji(t)?Ia(t,Va):mn(t)?[t]:to(Da(_a(t)))},ro={data:function(t){return t=Wt({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(t){},beforeSet:function(t,n){},onSet:function(t){},canSet:function(t){return!0}},t),function(n,r){var e=t,i=this,a=void 0!==i.length,o=a?i:[i],u=a?i[0]:i;if(xt(n)){var s,f=-1!==n.indexOf(".")&&no(n);if(e.allowGetting&&void 0===r)return u&&(e.beforeGet(u),s=f&&void 0===u._private[e.field][n]?Wa(u._private[e.field],f):u._private[e.field][n]),s;if(e.allowSetting&&void 0!==r&&!e.immutableKeys[n]){var c=ft({},n,r);e.beforeSet(i,c);for(var l=0,h=o.length;l<h;l++){var v=o[l];e.canSet(v)&&(f&&void 0===u._private[e.field][n]?Ja(v._private[e.field],f,r):v._private[e.field][n]=r)}e.updateStyle&&i.updateStyle(),e.onSet(i),e.settingTriggersEvent&&i[e.triggerFnName](e.settingEvent)}}else if(e.allowSetting&&Et(n)){var d,g,p=n,y=Object.keys(p);e.beforeSet(i,p);for(var m=0;m<y.length;m++){if(g=p[d=y[m]],!e.immutableKeys[d])for(var b=0;b<o.length;b++){var w=o[b];e.canSet(w)&&(w._private[e.field][d]=g)}}e.updateStyle&&i.updateStyle(),e.onSet(i),e.settingTriggersEvent&&i[e.triggerFnName](e.settingEvent)}else if(e.allowBinding&&Mt(n)){var x=n;i.on(e.bindingEvent,x)}else if(e.allowGetting&&void 0===n){var M;return u&&(e.beforeGet(u),M=u._private[e.field]),M}return i}},removeData:function(t){return t=Wt({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},t),function(n){var r=t,e=this,i=void 0!==e.length?e:[e];if(xt(n)){for(var a=n.split(/\s+/),o=a.length,u=0;u<o;u++){var s=a[u];if(!Pt(s))if(!r.immutableKeys[s])for(var f=0,c=i.length;f<c;f++)i[f]._private[r.field][s]=void 0}r.triggerEvent&&e[r.triggerFnName](r.event)}else if(void 0===n){for(var l=0,h=i.length;l<h;l++)for(var v=i[l]._private[r.field],d=Object.keys(v),g=0;g<d.length;g++){var p=d[g];!r.immutableKeys[p]&&(v[p]=void 0)}r.triggerEvent&&e[r.triggerFnName](r.event)}return e}}},eo={eventAliasesOn:function(t){var n=t;n.addListener=n.listen=n.bind=n.on,n.unlisten=n.unbind=n.off=n.removeListener,n.trigger=n.emit,n.pon=n.promiseOn=function(t,n){var r=this,e=Array.prototype.slice.call(arguments,0);return new Ti((function(t,n){var i=e.concat([function(n){r.off.apply(r,a),t(n)}]),a=i.concat([]);r.on.apply(r,i)}))}}},io={};[Ni,ro,eo].forEach((function(t){Wt(io,t)}));var ao={animate:io.animate(),animation:io.animation(),animated:io.animated(),clearQueue:io.clearQueue(),delay:io.delay(),delayAnimation:io.delayAnimation(),stop:io.stop()},oo={classes:function(t){var n=this;if(void 0===t){var r=[];return n[0]._private.classes.forEach((function(t){return r.push(t)})),r}kt(t)||(t=(t||"").match(/\S+/g)||[]);for(var e=[],i=new cr(t),a=0;a<n.length;a++){for(var o=n[a],u=o._private,s=u.classes,f=!1,c=0;c<t.length;c++){var l=t[c];if(!s.has(l)){f=!0;break}}f||(f=s.size!==t.length),f&&(u.classes=i,e.push(o))}return e.length>0&&this.spawn(e).updateStyle().emit("class"),n},addClass:function(t){return this.toggleClass(t,!0)},hasClass:function(t){var n=this[0];return null!=n&&n._private.classes.has(t)},toggleClass:function(t,n){kt(t)||(t=t.match(/\S+/g)||[]);for(var r=this,e=void 0===n,i=[],a=0,o=r.length;a<o;a++)for(var u=r[a],s=u._private.classes,f=!1,c=0;c<t.length;c++){var l=t[c],h=s.has(l),v=!1;n||e&&!h?(s.add(l),v=!0):(!n||e&&h)&&(s.delete(l),v=!0),!f&&v&&(i.push(u),f=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),r},removeClass:function(t){return this.toggleClass(t,!1)},flashClass:function(t,n){var r=this;if(null==n)n=250;else if(0===n)return r;return r.addClass(t),setTimeout((function(){r.removeClass(t)}),n),r}};oo.className=oo.classNames=oo.classes;var uo={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:Lt,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};uo.variable="(?:[\\w-.]|(?:\\\\"+uo.metaChar+"))+",uo.className="(?:[\\w-]|(?:\\\\"+uo.metaChar+"))+",uo.value=uo.string+"|"+uo.number,uo.id=uo.variable,function(){var t,n,r;for(t=uo.comparatorOp.split("|"),r=0;r<t.length;r++)n=t[r],uo.comparatorOp+="|@"+n;for(t=uo.comparatorOp.split("|"),r=0;r<t.length;r++)(n=t[r]).indexOf("!")>=0||"="!==n&&(uo.comparatorOp+="|\\!"+n)}();var so=0,fo=1,co=2,lo=3,ho=4,vo=5,go=6,po=7,yo=8,mo=9,bo=10,wo=11,xo=12,Mo=13,ko=14,Eo=15,So=16,Ao=17,zo=18,Bo=19,Co=20,To=[{selector:":selected",matches:function(t){return t.selected()}},{selector:":unselected",matches:function(t){return!t.selected()}},{selector:":selectable",matches:function(t){return t.selectable()}},{selector:":unselectable",matches:function(t){return!t.selectable()}},{selector:":locked",matches:function(t){return t.locked()}},{selector:":unlocked",matches:function(t){return!t.locked()}},{selector:":visible",matches:function(t){return t.visible()}},{selector:":hidden",matches:function(t){return!t.visible()}},{selector:":transparent",matches:function(t){return t.transparent()}},{selector:":grabbed",matches:function(t){return t.grabbed()}},{selector:":free",matches:function(t){return!t.grabbed()}},{selector:":removed",matches:function(t){return t.removed()}},{selector:":inside",matches:function(t){return!t.removed()}},{selector:":grabbable",matches:function(t){return t.grabbable()}},{selector:":ungrabbable",matches:function(t){return!t.grabbable()}},{selector:":animated",matches:function(t){return t.animated()}},{selector:":unanimated",matches:function(t){return!t.animated()}},{selector:":parent",matches:function(t){return t.isParent()}},{selector:":childless",matches:function(t){return t.isChildless()}},{selector:":child",matches:function(t){return t.isChild()}},{selector:":orphan",matches:function(t){return t.isOrphan()}},{selector:":nonorphan",matches:function(t){return t.isChild()}},{selector:":compound",matches:function(t){return t.isNode()?t.isParent():t.source().isParent()||t.target().isParent()}},{selector:":loop",matches:function(t){return t.isLoop()}},{selector:":simple",matches:function(t){return t.isSimple()}},{selector:":active",matches:function(t){return t.active()}},{selector:":inactive",matches:function(t){return!t.active()}},{selector:":backgrounding",matches:function(t){return t.backgrounding()}},{selector:":nonbackgrounding",matches:function(t){return!t.backgrounding()}}].sort((function(t,n){return function(t,n){return-1*Ut(t,n)}(t.selector,n.selector)})),Oo=function(){for(var t,n={},r=0;r<To.length;r++)n[(t=To[r]).selector]=t.matches;return n}(),Po="("+To.map((function(t){return t.selector})).join("|")+")",No=function(t){return t.replace(new RegExp("\\\\("+uo.metaChar+")","g"),(function(t,n){return n}))},jo=function(t,n,r){t[t.length-1]=r},Fo=[{name:"group",query:!0,regex:"("+uo.group+")",populate:function(t,n,r){var e=ct(r,1)[0];n.checks.push({type:so,value:"*"===e?e:e+"s"})}},{name:"state",query:!0,regex:Po,populate:function(t,n,r){var e=ct(r,1)[0];n.checks.push({type:po,value:e})}},{name:"id",query:!0,regex:"\\#("+uo.id+")",populate:function(t,n,r){var e=ct(r,1)[0];n.checks.push({type:yo,value:No(e)})}},{name:"className",query:!0,regex:"\\.("+uo.className+")",populate:function(t,n,r){var e=ct(r,1)[0];n.checks.push({type:mo,value:No(e)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+uo.variable+")\\s*\\]",populate:function(t,n,r){var e=ct(r,1)[0];n.checks.push({type:ho,field:No(e)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+uo.variable+")\\s*("+uo.comparatorOp+")\\s*("+uo.value+")\\s*\\]",populate:function(t,n,r){var e=ct(r,3),i=e[0],a=e[1],o=e[2];o=null!=new RegExp("^"+uo.string+"$").exec(o)?o.substring(1,o.length-1):parseFloat(o),n.checks.push({type:lo,field:No(i),operator:a,value:o})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+uo.boolOp+")\\s*("+uo.variable+")\\s*\\]",populate:function(t,n,r){var e=ct(r,2),i=e[0],a=e[1];n.checks.push({type:vo,field:No(a),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+uo.meta+")\\s*("+uo.comparatorOp+")\\s*("+uo.number+")\\s*\\]\\]",populate:function(t,n,r){var e=ct(r,3),i=e[0],a=e[1],o=e[2];n.checks.push({type:go,field:No(i),operator:a,value:parseFloat(o)})}},{name:"nextQuery",separator:!0,regex:uo.separator,populate:function(t,n){var r=t.currentSubject,e=t.edgeCount,i=t.compoundCount,a=t[t.length-1];return null!=r&&(a.subject=r,t.currentSubject=null),a.edgeCount=e,a.compoundCount=i,t.edgeCount=0,t.compoundCount=0,t[t.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:uo.directedEdge,populate:function(t,n){if(null==t.currentSubject){var r={checks:[]},e=n,i={checks:[]};return r.checks.push({type:wo,source:e,target:i}),jo(t,0,r),t.edgeCount++,i}var a={checks:[]},o=n,u={checks:[]};return a.checks.push({type:xo,source:o,target:u}),jo(t,0,a),t.edgeCount++,u}},{name:"undirectedEdge",separator:!0,regex:uo.undirectedEdge,populate:function(t,n){if(null==t.currentSubject){var r={checks:[]},e=n,i={checks:[]};return r.checks.push({type:bo,nodes:[e,i]}),jo(t,0,r),t.edgeCount++,i}var a={checks:[]},o=n,u={checks:[]};return a.checks.push({type:ko,node:o,neighbor:u}),jo(t,0,a),u}},{name:"child",separator:!0,regex:uo.child,populate:function(t,n){if(null==t.currentSubject){var r={checks:[]},e={checks:[]},i=t[t.length-1];return r.checks.push({type:Eo,parent:i,child:e}),jo(t,0,r),t.compoundCount++,e}if(t.currentSubject===n){var a={checks:[]},o=t[t.length-1],u={checks:[]},s={checks:[]},f={checks:[]},c={checks:[]};return a.checks.push({type:Bo,left:o,right:u,subject:s}),s.checks=n.checks,n.checks=[{type:Co}],c.checks.push({type:Co}),u.checks.push({type:Ao,parent:c,child:f}),jo(t,0,a),t.currentSubject=s,t.compoundCount++,f}var l={checks:[]},h={checks:[]},v=[{type:Ao,parent:l,child:h}];return l.checks=n.checks,n.checks=v,t.compoundCount++,h}},{name:"descendant",separator:!0,regex:uo.descendant,populate:function(t,n){if(null==t.currentSubject){var r={checks:[]},e={checks:[]},i=t[t.length-1];return r.checks.push({type:So,ancestor:i,descendant:e}),jo(t,0,r),t.compoundCount++,e}if(t.currentSubject===n){var a={checks:[]},o=t[t.length-1],u={checks:[]},s={checks:[]},f={checks:[]},c={checks:[]};return a.checks.push({type:Bo,left:o,right:u,subject:s}),s.checks=n.checks,n.checks=[{type:Co}],c.checks.push({type:Co}),u.checks.push({type:zo,ancestor:c,descendant:f}),jo(t,0,a),t.currentSubject=s,t.compoundCount++,f}var l={checks:[]},h={checks:[]},v=[{type:zo,ancestor:l,descendant:h}];return l.checks=n.checks,n.checks=v,t.compoundCount++,h}},{name:"subject",modifier:!0,regex:uo.subject,populate:function(t,n){if(null!=t.currentSubject&&t.currentSubject!==n)return Qn("Redefinition of subject in selector `"+t.toString()+"`"),!1;t.currentSubject=n;var r=t[t.length-1].checks[0],e=null==r?null:r.type;e===wo?r.type=Mo:e===bo&&(r.type=ko,r.node=r.nodes[1],r.neighbor=r.nodes[0],r.nodes=null)}}];Fo.forEach((function(t){return t.regexObj=new RegExp("^"+t.regex)}));var Do=function(t){for(var n,r,e,i=0;i<Fo.length;i++){var a=Fo[i],o=a.name,u=t.match(a.regexObj);if(null!=u){r=u,n=a,e=o;var s=u[0];t=t.substring(s.length);break}}return{expr:n,match:r,name:e,remaining:t}},Io={parse:function(t){var n=this,r=n.inputText=t,e=n[0]={checks:[]};for(n.length=1,r=function(t){var n=t.match(/^\s+/);if(n){var r=n[0];t=t.substring(r.length)}return t}(r);;){var i=Do(r);if(null==i.expr)return Qn("The selector `"+t+"`is invalid"),!1;var a=i.match.slice(1),o=i.expr.populate(n,e,a);if(!1===o)return!1;if(null!=o&&(e=o),(r=i.remaining).match(/^\s*$/))break}var u=n[n.length-1];null!=n.currentSubject&&(u.subject=n.currentSubject),u.edgeCount=n.edgeCount,u.compoundCount=n.compoundCount;for(var s=0;s<n.length;s++){var f=n[s];if(f.compoundCount>0&&f.edgeCount>0)return Qn("The selector `"+t+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(f.edgeCount>1)return Qn("The selector `"+t+"` is invalid because it uses multiple edge selectors"),!1;1===f.edgeCount&&Qn("The selector `"+t+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var t=function(t){return t??""},n=function(n){return xt(n)?'"'+n+'"':t(n)},r=function(t){return" "+t+" "},e=function(e,a){var o=e.type,u=e.value;switch(o){case so:var s=t(u);return s.substring(0,s.length-1);case lo:var f=e.field,c=e.operator;return"["+f+r(t(c))+n(u)+"]";case vo:var l=e.operator,h=e.field;return"["+t(l)+h+"]";case ho:return"["+e.field+"]";case go:var v=e.operator;return"[["+e.field+r(t(v))+n(u)+"]]";case po:return u;case yo:return"#"+u;case mo:return"."+u;case Ao:case Eo:return i(e.parent,a)+r(">")+i(e.child,a);case zo:case So:return i(e.ancestor,a)+" "+i(e.descendant,a);case Bo:var d=i(e.left,a),g=i(e.subject,a),p=i(e.right,a);return d+(d.length>0?" ":"")+g+p;case Co:return""}},i=function(t,n){return t.checks.reduce((function(r,i,a){return r+(n===t&&0===a?"$":"")+e(i,n)}),"")},a="",o=0;o<this.length;o++){var u=this[o];a+=i(u,u.subject),this.length>1&&o<this.length-1&&(a+=", ")}return this.toStringCache=a,a}},$o=function(t,n,r){var e,i,a,o=xt(t),u=St(t),s=xt(r),f=!1,c=!1,l=!1;switch(n.indexOf("!")>=0&&(n=n.replace("!",""),c=!0),n.indexOf("@")>=0&&(n=n.replace("@",""),f=!0),(o||s||f)&&(i=o||u?""+t:"",a=""+r),f&&(t=i=i.toLowerCase(),r=a=a.toLowerCase()),n){case"*=":e=i.indexOf(a)>=0;break;case"$=":e=i.indexOf(a,i.length-a.length)>=0;break;case"^=":e=0===i.indexOf(a);break;case"=":e=t===r;break;case">":l=!0,e=t>r;break;case">=":l=!0,e=t>=r;break;case"<":l=!0,e=t<r;break;case"<=":l=!0,e=t<=r;break;default:e=!1}return!c||null==t&&l||(e=!e),e},Lo=function(t,n){return t.data(n)},Ro=[],_o=function(t,n){return t.checks.every((function(t){return Ro[t.type](t,n)}))};Ro[so]=function(t,n){var r=t.value;return"*"===r||r===n.group()},Ro[po]=function(t,n){return function(t,n){return Oo[t](n)}(t.value,n)},Ro[yo]=function(t,n){var r=t.value;return n.id()===r},Ro[mo]=function(t,n){var r=t.value;return n.hasClass(r)},Ro[go]=function(t,n){var r=t.field,e=t.operator,i=t.value;return $o(function(t,n){return t[n]()}(n,r),e,i)},Ro[lo]=function(t,n){var r=t.field,e=t.operator,i=t.value;return $o(Lo(n,r),e,i)},Ro[vo]=function(t,n){var r=t.field,e=t.operator;return function(t,n){switch(n){case"?":return!!t;case"!":return!t;case"^":return void 0===t}}(Lo(n,r),e)},Ro[ho]=function(t,n){var r=t.field;return t.operator,void 0!==Lo(n,r)},Ro[bo]=function(t,n){var r=t.nodes[0],e=t.nodes[1],i=n.source(),a=n.target();return _o(r,i)&&_o(e,a)||_o(e,i)&&_o(r,a)},Ro[ko]=function(t,n){return _o(t.node,n)&&n.neighborhood().some((function(n){return n.isNode()&&_o(t.neighbor,n)}))},Ro[wo]=function(t,n){return _o(t.source,n.source())&&_o(t.target,n.target())},Ro[xo]=function(t,n){return _o(t.source,n)&&n.outgoers().some((function(n){return n.isNode()&&_o(t.target,n)}))},Ro[Mo]=function(t,n){return _o(t.target,n)&&n.incomers().some((function(n){return n.isNode()&&_o(t.source,n)}))},Ro[Eo]=function(t,n){return _o(t.child,n)&&_o(t.parent,n.parent())},Ro[Ao]=function(t,n){return _o(t.parent,n)&&n.children().some((function(n){return _o(t.child,n)}))},Ro[So]=function(t,n){return _o(t.descendant,n)&&n.ancestors().some((function(n){return _o(t.ancestor,n)}))},Ro[zo]=function(t,n){return _o(t.ancestor,n)&&n.descendants().some((function(n){return _o(t.descendant,n)}))},Ro[Bo]=function(t,n){return _o(t.subject,n)&&_o(t.left,n)&&_o(t.right,n)},Ro[Co]=function(){return!0},Ro[fo]=function(t,n){return t.value.has(n)},Ro[co]=function(t,n){return(0,t.value)(n)};var qo={matches:function(t){for(var n=0;n<this.length;n++){var r=this[n];if(_o(r,t))return!0}return!1},filter:function(t){var n=this;if(1===n.length&&1===n[0].checks.length&&n[0].checks[0].type===yo)return t.getElementById(n[0].checks[0].value).collection();var r=function(t){for(var r=0;r<n.length;r++){var e=n[r];if(_o(e,t))return!0}return!1};return null==n.text()&&(r=function(){return!0}),t.filter(r)}},Vo=function(t){this.inputText=t,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==t||xt(t)&&t.match(/^\s*$/)||(zt(t)?this.addQuery({checks:[{type:fo,value:t.collection()}]}):Mt(t)?this.addQuery({checks:[{type:co,value:t}]}):xt(t)?this.parse(t)||(this.invalid=!0):Yn("A selector must be created from a string; found "))},Uo=Vo.prototype;[Io,qo].forEach((function(t){return Wt(Uo,t)})),Uo.text=function(){return this.inputText},Uo.size=function(){return this.length},Uo.eq=function(t){return this[t]},Uo.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()},Uo.addQuery=function(t){this[this.length++]=t},Uo.selector=Uo.toString;var Wo={allAre:function(t){var n=new Vo(t);return this.every((function(t){return n.matches(t)}))},is:function(t){var n=new Vo(t);return this.some((function(t){return n.matches(t)}))},some:function(t,n){for(var r=0;r<this.length;r++){if(n?t.apply(n,[this[r],r,this]):t(this[r],r,this))return!0}return!1},every:function(t,n){for(var r=0;r<this.length;r++){if(!(n?t.apply(n,[this[r],r,this]):t(this[r],r,this)))return!1}return!0},same:function(t){if(this===t)return!0;t=this.cy().collection(t);var n=this.length;return n===t.length&&(1===n?this[0]===t[0]:this.every((function(n){return t.hasElementWithId(n.id())})))},anySame:function(t){return t=this.cy().collection(t),this.some((function(n){return t.hasElementWithId(n.id())}))},allAreNeighbors:function(t){t=this.cy().collection(t);var n=this.neighborhood();return t.every((function(t){return n.hasElementWithId(t.id())}))},contains:function(t){t=this.cy().collection(t);var n=this;return t.every((function(t){return n.hasElementWithId(t.id())}))}};Wo.allAreNeighbours=Wo.allAreNeighbors,Wo.has=Wo.contains,Wo.equal=Wo.equals=Wo.same;var Zo,Ho,Ko=function(t,n){return function(r,e,i,a){var o,u=r,s=this;if(null==u?o="":zt(u)&&1===u.length&&(o=u.id()),1===s.length&&o){var f=s[0]._private,c=f.traversalCache=f.traversalCache||{},l=c[n]=c[n]||[],h=Ln(o),v=l[h];return v||(l[h]=t.call(s,r,e,i,a))}return t.call(s,r,e,i,a)}},Go={parent:function(t){var n=[];if(1===this.length){var r=this[0]._private.parent;if(r)return r}for(var e=0;e<this.length;e++){var i=this[e]._private.parent;i&&n.push(i)}return this.spawn(n,!0).filter(t)},parents:function(t){for(var n=[],r=this.parent();r.nonempty();){for(var e=0;e<r.length;e++){var i=r[e];n.push(i)}r=r.parent()}return this.spawn(n,!0).filter(t)},commonAncestors:function(t){for(var n,r=0;r<this.length;r++){var e=this[r].parents();n=(n=n||e).intersect(e)}return n.filter(t)},orphans:function(t){return this.stdFilter((function(t){return t.isOrphan()})).filter(t)},nonorphans:function(t){return this.stdFilter((function(t){return t.isChild()})).filter(t)},children:Ko((function(t){for(var n=[],r=0;r<this.length;r++)for(var e=this[r]._private.children,i=0;i<e.length;i++)n.push(e[i]);return this.spawn(n,!0).filter(t)}),"children"),siblings:function(t){return this.parent().children().not(this).filter(t)},isParent:function(){var t=this[0];if(t)return t.isNode()&&0!==t._private.children.length},isChildless:function(){var t=this[0];if(t)return t.isNode()&&0===t._private.children.length},isChild:function(){var t=this[0];if(t)return t.isNode()&&null!=t._private.parent},isOrphan:function(){var t=this[0];if(t)return t.isNode()&&null==t._private.parent},descendants:function(t){var n=[];return function t(r){for(var e=0;e<r.length;e++){var i=r[e];n.push(i),i.children().nonempty()&&t(i.children())}}(this.children()),this.spawn(n,!0).filter(t)}};function Yo(t,n,r,e){for(var i=[],a=new cr,o=t.cy().hasCompoundNodes(),u=0;u<t.length;u++){var s=t[u];r?i.push(s):o&&e(i,a,s)}for(;i.length>0;){var f=i.shift();n(f),a.add(f.id()),o&&e(i,a,f)}return t}function Xo(t,n,r){if(r.isParent())for(var e=r._private.children,i=0;i<e.length;i++){var a=e[i];n.has(a.id())||t.push(a)}}function Qo(t,n,r){if(r.isChild()){var e=r._private.parent;n.has(e.id())||t.push(e)}}function Jo(t,n,r){Qo(t,n,r),Xo(t,n,r)}Go.forEachDown=function(t){return Yo(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Xo)},Go.forEachUp=function(t){return Yo(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Qo)},Go.forEachUpAndDown=function(t){return Yo(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Jo)},Go.ancestors=Go.parents,(Zo=Ho={data:io.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:io.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:io.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:io.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:io.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:io.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var t=this[0];if(t)return t._private.data.id}}).attr=Zo.data,Zo.removeAttr=Zo.removeData;var tu,nu,ru=Ho,eu={};function iu(t){return function(n){var r=this;if(void 0===n&&(n=!0),0!==r.length&&r.isNode()&&!r.removed()){for(var e=0,i=r[0],a=i._private.edges,o=0;o<a.length;o++){var u=a[o];!n&&u.isLoop()||(e+=t(i,u))}return e}}}function au(t,n){return function(r){for(var e,i=this.nodes(),a=0;a<i.length;a++){var o=i[a][t](r);void 0===o||void 0!==e&&!n(o,e)||(e=o)}return e}}Wt(eu,{degree:iu((function(t,n){return n.source().same(n.target())?2:1})),indegree:iu((function(t,n){return n.target().same(t)?1:0})),outdegree:iu((function(t,n){return n.source().same(t)?1:0}))}),Wt(eu,{minDegree:au("degree",(function(t,n){return t<n})),maxDegree:au("degree",(function(t,n){return t>n})),minIndegree:au("indegree",(function(t,n){return t<n})),maxIndegree:au("indegree",(function(t,n){return t>n})),minOutdegree:au("outdegree",(function(t,n){return t<n})),maxOutdegree:au("outdegree",(function(t,n){return t>n}))}),Wt(eu,{totalDegree:function(t){for(var n=0,r=this.nodes(),e=0;e<r.length;e++)n+=r[e].degree(t);return n}});var ou=function(t,n,r){for(var e=0;e<t.length;e++){var i=t[e];if(!i.locked()){var a=i._private.position,o={x:null!=n.x?n.x-a.x:0,y:null!=n.y?n.y-a.y:0};!i.isParent()||0===o.x&&0===o.y||i.children().shift(o,r),i.dirtyBoundingBoxCache()}}},uu={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(t){t.updateCompoundBounds()},beforeSet:function(t,n){ou(t,n,!1)},onSet:function(t){t.dirtyCompoundBoundsCache()},canSet:function(t){return!t.locked()}};tu=nu={position:io.data(uu),silentPosition:io.data(Wt({},uu,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(t,n){ou(t,n,!0)},onSet:function(t){t.dirtyCompoundBoundsCache()}})),positions:function(t,n){if(Et(t))n?this.silentPosition(t):this.position(t);else if(Mt(t)){var r=t,e=this.cy();e.startBatch();for(var i=0;i<this.length;i++){var a,o=this[i];(a=r(o,i))&&(n?o.silentPosition(a):o.position(a))}e.endBatch()}return this},silentPositions:function(t){return this.positions(t,!0)},shift:function(t,n,r){var e;if(Et(t)?(e={x:St(t.x)?t.x:0,y:St(t.y)?t.y:0},r=n):xt(t)&&St(n)&&((e={x:0,y:0})[t]=n),null!=e){var i=this.cy();i.startBatch();for(var a=0;a<this.length;a++){var o=this[a];if(!(i.hasCompoundNodes()&&o.isChild()&&o.ancestors().anySame(this))){var u=o.position(),s={x:u.x+e.x,y:u.y+e.y};r?o.silentPosition(s):o.position(s)}}i.endBatch()}return this},silentShift:function(t,n){return Et(t)?this.shift(t,!0):xt(t)&&St(n)&&this.shift(t,n,!0),this},renderedPosition:function(t,n){var r=this[0],e=this.cy(),i=e.zoom(),a=e.pan(),o=Et(t)?t:void 0,u=void 0!==o||void 0!==n&&xt(t);if(r&&r.isNode()){if(!u){var s=r.position();return o=Cr(s,i,a),void 0===t?o:o[t]}for(var f=0;f<this.length;f++){var c=this[f];void 0!==n?c.position(t,(n-a[t])/i):void 0!==o&&c.position(Tr(o,i,a))}}else if(!u)return;return this},relativePosition:function(t,n){var r=this[0],e=this.cy(),i=Et(t)?t:void 0,a=void 0!==i||void 0!==n&&xt(t),o=e.hasCompoundNodes();if(r&&r.isNode()){if(!a){var u=r.position(),s=o?r.parent():null,f=s&&s.length>0,c=f;f&&(s=s[0]);var l=c?s.position():{x:0,y:0};return i={x:u.x-l.x,y:u.y-l.y},void 0===t?i:i[t]}for(var h=0;h<this.length;h++){var v=this[h],d=o?v.parent():null,g=d&&d.length>0,p=g;g&&(d=d[0]);var y=p?d.position():{x:0,y:0};void 0!==n?v.position(t,n+y[t]):void 0!==i&&v.position({x:i.x+y.x,y:i.y+y.y})}}else if(!a)return;return this}},tu.modelPosition=tu.point=tu.position,tu.modelPositions=tu.points=tu.positions,tu.renderedPoint=tu.renderedPosition,tu.relativePoint=tu.relativePosition;var su,fu,cu=nu;su=fu={},fu.renderedBoundingBox=function(t){var n=this.boundingBox(t),r=this.cy(),e=r.zoom(),i=r.pan(),a=n.x1*e+i.x,o=n.x2*e+i.x,u=n.y1*e+i.y,s=n.y2*e+i.y;return{x1:a,x2:o,y1:u,y2:s,w:o-a,h:s-u}},fu.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.cy();return n.styleEnabled()&&n.hasCompoundNodes()?(this.forEachUp((function(n){if(n.isParent()){var r=n._private;r.compoundBoundsClean=!1,r.bbCache=null,t||n.emitAndNotify("bounds")}})),this):this},fu.updateCompoundBounds=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.cy();if(!n.styleEnabled()||!n.hasCompoundNodes())return this;if(!t&&n.batching())return this;function r(t){if(t.isParent()){var n=t._private,r=t.children(),e="include"===t.pstyle("compound-sizing-wrt-labels").value,i={width:{val:t.pstyle("min-width").pfValue,left:t.pstyle("min-width-bias-left"),right:t.pstyle("min-width-bias-right")},height:{val:t.pstyle("min-height").pfValue,top:t.pstyle("min-height-bias-top"),bottom:t.pstyle("min-height-bias-bottom")}},a=r.boundingBox({includeLabels:e,includeOverlays:!1,useCache:!1}),o=n.position;0!==a.w&&0!==a.h||((a={w:t.pstyle("width").pfValue,h:t.pstyle("height").pfValue}).x1=o.x-a.w/2,a.x2=o.x+a.w/2,a.y1=o.y-a.h/2,a.y2=o.y+a.h/2);var u=i.width.left.value;"px"===i.width.left.units&&i.width.val>0&&(u=100*u/i.width.val);var s=i.width.right.value;"px"===i.width.right.units&&i.width.val>0&&(s=100*s/i.width.val);var f=i.height.top.value;"px"===i.height.top.units&&i.height.val>0&&(f=100*f/i.height.val);var c=i.height.bottom.value;"px"===i.height.bottom.units&&i.height.val>0&&(c=100*c/i.height.val);var l=y(i.width.val-a.w,u,s),h=l.biasDiff,v=l.biasComplementDiff,d=y(i.height.val-a.h,f,c),g=d.biasDiff,p=d.biasComplementDiff;n.autoPadding=function(t,n,r,e){if("%"!==r.units)return"px"===r.units?r.pfValue:0;switch(e){case"width":return t>0?r.pfValue*t:0;case"height":return n>0?r.pfValue*n:0;case"average":return t>0&&n>0?r.pfValue*(t+n)/2:0;case"min":return t>0&&n>0?t>n?r.pfValue*n:r.pfValue*t:0;case"max":return t>0&&n>0?t>n?r.pfValue*t:r.pfValue*n:0;default:return 0}}(a.w,a.h,t.pstyle("padding"),t.pstyle("padding-relative-to").value),n.autoWidth=Math.max(a.w,i.width.val),o.x=(-h+a.x1+a.x2+v)/2,n.autoHeight=Math.max(a.h,i.height.val),o.y=(-g+a.y1+a.y2+p)/2}function y(t,n,r){var e=0,i=0,a=n+r;return t>0&&a>0&&(e=n/a*t,i=r/a*t),{biasDiff:e,biasComplementDiff:i}}}for(var e=0;e<this.length;e++){var i=this[e],a=i._private;a.compoundBoundsClean&&!t||(r(i),n.batching()||(a.compoundBoundsClean=!0))}return this};var lu=function(t){return t===1/0||t===-1/0?0:t},hu=function(t,n,r,e,i){e-n!=0&&i-r!=0&&null!=n&&null!=r&&null!=e&&null!=i&&(t.x1=n<t.x1?n:t.x1,t.x2=e>t.x2?e:t.x2,t.y1=r<t.y1?r:t.y1,t.y2=i>t.y2?i:t.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1)},vu=function(t,n){return null==n?t:hu(t,n.x1,n.y1,n.x2,n.y2)},du=function(t,n,r){return or(t,n,r)},gu=function(t,n,r){if(!n.cy().headless()){var e,i,a=n._private,o=a.rstyle,u=o.arrowWidth/2;if("none"!==n.pstyle(r+"-arrow-shape").value){"source"===r?(e=o.srcX,i=o.srcY):"target"===r?(e=o.tgtX,i=o.tgtY):(e=o.midX,i=o.midY);var s=a.arrowBounds=a.arrowBounds||{},f=s[r]=s[r]||{};f.x1=e-u,f.y1=i-u,f.x2=e+u,f.y2=i+u,f.w=f.x2-f.x1,f.h=f.y2-f.y1,Ur(f,1),hu(t,f.x1,f.y1,f.x2,f.y2)}}},pu=function(t,n,r){if(!n.cy().headless()){var e;e=r?r+"-":"";var i=n._private,a=i.rstyle;if(n.pstyle(e+"label").strValue){var o,u,s,f,c=n.pstyle("text-halign"),l=n.pstyle("text-valign"),h=du(a,"labelWidth",r),v=du(a,"labelHeight",r),d=du(a,"labelX",r),g=du(a,"labelY",r),p=n.pstyle(e+"text-margin-x").pfValue,y=n.pstyle(e+"text-margin-y").pfValue,m=n.isEdge(),b=n.pstyle(e+"text-rotation"),w=n.pstyle("text-outline-width").pfValue,x=n.pstyle("text-border-width").pfValue/2,M=n.pstyle("text-background-padding").pfValue,k=v,E=h,S=E/2,A=k/2;if(m)o=d-S,u=d+S,s=g-A,f=g+A;else{switch(c.value){case"left":o=d-E,u=d;break;case"center":o=d-S,u=d+S;break;case"right":o=d,u=d+E}switch(l.value){case"top":s=g-k,f=g;break;case"center":s=g-A,f=g+A;break;case"bottom":s=g,f=g+k}}var z=p-Math.max(w,x)-M-2,B=p+Math.max(w,x)+M+2,C=y-Math.max(w,x)-M-2,T=y+Math.max(w,x)+M+2;o+=z,u+=B,s+=C,f+=T;var O=r||"main",P=i.labelBounds,N=P[O]=P[O]||{};N.x1=o,N.y1=s,N.x2=u,N.y2=f,N.w=u-o,N.h=f-s,N.leftPad=z,N.rightPad=B,N.topPad=C,N.botPad=T;var j=m&&"autorotate"===b.strValue,F=null!=b.pfValue&&0!==b.pfValue;if(j||F){var D=j?du(i.rstyle,"labelAngle",r):b.pfValue,I=Math.cos(D),$=Math.sin(D),L=(o+u)/2,R=(s+f)/2;if(!m){switch(c.value){case"left":L=u;break;case"right":L=o}switch(l.value){case"top":R=f;break;case"bottom":R=s}}var _=function(t,n){return{x:(t-=L)*I-(n-=R)*$+L,y:t*$+n*I+R}},q=_(o,s),V=_(o,f),U=_(u,s),W=_(u,f);o=Math.min(q.x,V.x,U.x,W.x),u=Math.max(q.x,V.x,U.x,W.x),s=Math.min(q.y,V.y,U.y,W.y),f=Math.max(q.y,V.y,U.y,W.y)}var Z=O+"Rot",H=P[Z]=P[Z]||{};H.x1=o,H.y1=s,H.x2=u,H.y2=f,H.w=u-o,H.h=f-s,hu(t,o,s,u,f),hu(i.labelBounds.all,o,s,u,f)}return t}},yu=function(t,n){var r,e,i,a,o,u,s,f=t._private.cy,c=f.styleEnabled(),l=f.headless(),h=_r(),v=t._private,d=t.isNode(),g=t.isEdge(),p=v.rstyle,y=d&&c?t.pstyle("bounds-expansion").pfValue:[0],m=function(t){return"none"!==t.pstyle("display").value},b=!c||m(t)&&(!g||m(t.source())&&m(t.target()));if(b){var w=0;c&&n.includeOverlays&&0!==t.pstyle("overlay-opacity").value&&(w=t.pstyle("overlay-padding").value);var x=0;c&&n.includeUnderlays&&0!==t.pstyle("underlay-opacity").value&&(x=t.pstyle("underlay-padding").value);var M=Math.max(w,x),k=0;if(c&&(k=t.pstyle("width").pfValue/2),d&&n.includeNodes){var E=t.position();o=E.x,u=E.y;var S=t.outerWidth()/2,A=t.outerHeight()/2;hu(h,r=o-S,i=u-A,e=o+S,a=u+A),c&&n.includeOutlines&&function(t,n){if(!n.cy().headless()){var r,e,i,a=n.pstyle("outline-opacity").value,o=n.pstyle("outline-width").value;if(a>0&&o>0){var u=n.pstyle("outline-offset").value,s=n.pstyle("shape").value,f=o+u,c=(t.w+2*f)/t.w,l=(t.h+2*f)/t.h,h=0;["diamond","pentagon","round-triangle"].includes(s)?(c=(t.w+2.4*f)/t.w,h=-f/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(s)?c=(t.w+2.4*f)/t.w:"star"===s?(c=(t.w+2.8*f)/t.w,l=(t.h+2.6*f)/t.h,h=-f/3.8):"triangle"===s?(c=(t.w+2.8*f)/t.w,l=(t.h+2.4*f)/t.h,h=-f/1.4):"vee"===s&&(c=(t.w+4.4*f)/t.w,l=(t.h+3.8*f)/t.h,h=.5*-f);var v=t.h*l-t.h,d=t.w*c-t.w;if(Wr(t,[Math.ceil(v/2),Math.ceil(d/2)]),0!==h){var g=(e=0,i=h,{x1:(r=t).x1+e,x2:r.x2+e,y1:r.y1+i,y2:r.y2+i,w:r.w,h:r.h});qr(t,g)}}}}(h,t)}else if(g&&n.includeEdges)if(c&&!l){var z=t.pstyle("curve-style").strValue;if(r=Math.min(p.srcX,p.midX,p.tgtX),e=Math.max(p.srcX,p.midX,p.tgtX),i=Math.min(p.srcY,p.midY,p.tgtY),a=Math.max(p.srcY,p.midY,p.tgtY),hu(h,r-=k,i-=k,e+=k,a+=k),"haystack"===z){var B=p.haystackPts;if(B&&2===B.length){if(r=B[0].x,i=B[0].y,r>(e=B[1].x)){var C=r;r=e,e=C}if(i>(a=B[1].y)){var T=i;i=a,a=T}hu(h,r-k,i-k,e+k,a+k)}}else if("bezier"===z||"unbundled-bezier"===z||z.endsWith("segments")||z.endsWith("taxi")){var O;switch(z){case"bezier":case"unbundled-bezier":O=p.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":O=p.linePts}if(null!=O)for(var P=0;P<O.length;P++){var N=O[P];r=N.x-k,e=N.x+k,i=N.y-k,a=N.y+k,hu(h,r,i,e,a)}}}else{var j=t.source().position(),F=t.target().position();if((r=j.x)>(e=F.x)){var D=r;r=e,e=D}if((i=j.y)>(a=F.y)){var I=i;i=a,a=I}hu(h,r-=k,i-=k,e+=k,a+=k)}if(c&&n.includeEdges&&g&&(gu(h,t,"mid-source"),gu(h,t,"mid-target"),gu(h,t,"source"),gu(h,t,"target")),c)if("yes"===t.pstyle("ghost").value){var $=t.pstyle("ghost-offset-x").pfValue,L=t.pstyle("ghost-offset-y").pfValue;hu(h,h.x1+$,h.y1+L,h.x2+$,h.y2+L)}var R=v.bodyBounds=v.bodyBounds||{};Zr(R,h),Wr(R,y),Ur(R,1),c&&(r=h.x1,e=h.x2,i=h.y1,a=h.y2,hu(h,r-M,i-M,e+M,a+M));var _=v.overlayBounds=v.overlayBounds||{};Zr(_,h),Wr(_,y),Ur(_,1);var q=v.labelBounds=v.labelBounds||{};null!=q.all?((s=q.all).x1=1/0,s.y1=1/0,s.x2=-1/0,s.y2=-1/0,s.w=0,s.h=0):q.all=_r(),c&&n.includeLabels&&(n.includeMainLabels&&pu(h,t,null),g&&(n.includeSourceLabels&&pu(h,t,"source"),n.includeTargetLabels&&pu(h,t,"target")))}return h.x1=lu(h.x1),h.y1=lu(h.y1),h.x2=lu(h.x2),h.y2=lu(h.y2),h.w=lu(h.x2-h.x1),h.h=lu(h.y2-h.y1),h.w>0&&h.h>0&&b&&(Wr(h,y),Ur(h,1)),h},mu=function(t){var n=0,r=function(t){return(t?1:0)<<n++},e=0;return e+=r(t.incudeNodes),e+=r(t.includeEdges),e+=r(t.includeLabels),e+=r(t.includeMainLabels),e+=r(t.includeSourceLabels),e+=r(t.includeTargetLabels),e+=r(t.includeOverlays),e+=r(t.includeOutlines)},bu=function(t){if(t.isEdge()){var n=t.source().position(),r=t.target().position(),e=function(t){return Math.round(t)};return function(t,n){var r={value:0,done:!1},e=0,i=t.length;return jn({next:function(){return e<i?r.value=t[e++]:r.done=!0,r}},n)}([e(n.x),e(n.y),e(r.x),e(r.y)])}return 0},wu=function(t,n){var r,e=t._private,i=t.isEdge(),a=(null==n?Mu:mu(n))===Mu,o=bu(t),u=e.bbCachePosKey===o,s=n.useCache&&u,f=function(t){return null==t._private.bbCache||t._private.styleDirty};if(!s||f(t)||i&&(f(t.source())||f(t.target()))?(u||t.recalculateRenderedStyle(s),r=yu(t,xu),e.bbCache=r,e.bbCachePosKey=o):r=e.bbCache,!a){var c=t.isNode();r=_r(),(n.includeNodes&&c||n.includeEdges&&!c)&&(n.includeOverlays?vu(r,e.overlayBounds):vu(r,e.bodyBounds)),n.includeLabels&&(n.includeMainLabels&&(!i||n.includeSourceLabels&&n.includeTargetLabels)?vu(r,e.labelBounds.all):(n.includeMainLabels&&vu(r,e.labelBounds.mainRot),n.includeSourceLabels&&vu(r,e.labelBounds.sourceRot),n.includeTargetLabels&&vu(r,e.labelBounds.targetRot))),r.w=r.x2-r.x1,r.h=r.y2-r.y1}return r},xu={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},Mu=mu(xu),ku=er(xu);fu.boundingBox=function(t){var n;if(1!==this.length||null==this[0]._private.bbCache||this[0]._private.styleDirty||void 0!==t&&void 0!==t.useCache&&!0!==t.useCache){n=_r();var r=ku(t=t||xu),e=this;if(e.cy().styleEnabled())for(var i=0;i<e.length;i++){var a=e[i],o=a._private,u=bu(a),s=o.bbCachePosKey===u,f=r.useCache&&s&&!o.styleDirty;a.recalculateRenderedStyle(f)}this.updateCompoundBounds(!t.useCache);for(var c=0;c<e.length;c++){var l=e[c];vu(n,wu(l,r))}}else t=void 0===t?xu:ku(t),n=wu(this[0],t);return n.x1=lu(n.x1),n.y1=lu(n.y1),n.x2=lu(n.x2),n.y2=lu(n.y2),n.w=lu(n.x2-n.x1),n.h=lu(n.y2-n.y1),n},fu.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var n=this[t]._private;n.bbCache=null,n.bbCachePosKey=null,n.bodyBounds=null,n.overlayBounds=null,n.labelBounds.all=null,n.labelBounds.source=null,n.labelBounds.target=null,n.labelBounds.main=null,n.labelBounds.sourceRot=null,n.labelBounds.targetRot=null,n.labelBounds.mainRot=null,n.arrowBounds.source=null,n.arrowBounds.target=null,n.arrowBounds["mid-source"]=null,n.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},fu.boundingBoxAt=function(t){var n=this.nodes(),r=this.cy(),e=r.hasCompoundNodes(),i=r.collection();if(e&&(i=n.filter((function(t){return t.isParent()})),n=n.not(i)),Et(t)){var a=t;t=function(){return a}}r.startBatch(),n.forEach((function(n,r){return n._private.bbAtOldPos=t(n,r)})).silentPositions(t),e&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var o=function(t){return{x1:t.x1,x2:t.x2,w:t.w,y1:t.y1,y2:t.y2,h:t.h}}(this.boundingBox({useCache:!1}));return n.silentPositions((function(t){return t._private.bbAtOldPos})),e&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),r.endBatch(),o},su.boundingbox=su.bb=su.boundingBox,su.renderedBoundingbox=su.renderedBoundingBox;var Eu,Su,Au=fu;Eu=Su={};var zu=function(t){t.uppercaseName=$t(t.name),t.autoName="auto"+t.uppercaseName,t.labelName="label"+t.uppercaseName,t.outerName="outer"+t.uppercaseName,t.uppercaseOuterName=$t(t.outerName),Eu[t.name]=function(){var n=this[0],r=n._private,e=r.cy._private.styleEnabled;if(n){if(e){if(n.isParent())return n.updateCompoundBounds(),r[t.autoName]||0;var i=n.pstyle(t.name);return"label"===i.strValue?(n.recalculateRenderedStyle(),r.rstyle[t.labelName]||0):i.pfValue}return 1}},Eu["outer"+t.uppercaseName]=function(){var n=this[0],r=n._private.cy._private.styleEnabled;if(n)return r?n[t.name]()+n.pstyle("border-width").pfValue+2*n.padding():1},Eu["rendered"+t.uppercaseName]=function(){var n=this[0];if(n)return n[t.name]()*this.cy().zoom()},Eu["rendered"+t.uppercaseOuterName]=function(){var n=this[0];if(n)return n[t.outerName]()*this.cy().zoom()}};zu({name:"width"}),zu({name:"height"}),Su.padding=function(){var t=this[0],n=t._private;return t.isParent()?(t.updateCompoundBounds(),void 0!==n.autoPadding?n.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue},Su.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()},Su.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var Bu=Su,Cu={controlPoints:{get:function(t){return t.renderer().getControlPoints(t)},mult:!0},segmentPoints:{get:function(t){return t.renderer().getSegmentPoints(t)},mult:!0},sourceEndpoint:{get:function(t){return t.renderer().getSourceEndpoint(t)}},targetEndpoint:{get:function(t){return t.renderer().getTargetEndpoint(t)}},midpoint:{get:function(t){return t.renderer().getEdgeMidpoint(t)}}},Tu=Object.keys(Cu).reduce((function(t,n){var r=Cu[n],e=function(t){return"rendered"+t[0].toUpperCase()+t.substr(1)}(n);return t[n]=function(){return function(t,n){if(t.isEdge())return n(t)}(this,r.get)},r.mult?t[e]=function(){return function(t,n){if(t.isEdge()){var r=t.cy(),e=r.pan(),i=r.zoom();return n(t).map((function(t){return Cr(t,i,e)}))}}(this,r.get)}:t[e]=function(){return function(t,n){if(t.isEdge()){var r=t.cy();return Cr(n(t),r.zoom(),r.pan())}}(this,r.get)},t}),{}),Ou=Wt({},cu,Au,Bu,Tu),Pu=function(t,n){this.recycle(t,n)};function Nu(){return!1}function ju(){return!0}Pu.prototype={instanceString:function(){return"event"},recycle:function(t,n){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Nu,null!=t&&t.preventDefault?(this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?ju:Nu):null!=t&&t.type?n=t:this.type=t,null!=n&&(this.originalEvent=n.originalEvent,this.type=null!=n.type?n.type:this.type,this.cy=n.cy,this.target=n.target,this.position=n.position,this.renderedPosition=n.renderedPosition,this.namespace=n.namespace,this.layout=n.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var r=this.position,e=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:r.x*e+i.x,y:r.y*e+i.y}}this.timeStamp=t&&t.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=ju;var t=this.originalEvent;t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.isPropagationStopped=ju;var t=this.originalEvent;t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=ju,this.stopPropagation()},isDefaultPrevented:Nu,isPropagationStopped:Nu,isImmediatePropagationStopped:Nu};var Fu=/^([^.]+)(\.(?:[^.]+))?$/,Du={qualifierCompare:function(t,n){return t===n},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(t){return t},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},Iu=Object.keys(Du),$u={};function Lu(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$u,n=arguments.length>1?arguments[1]:void 0,r=0;r<Iu.length;r++){var e=Iu[r];this[e]=t[e]||Du[e]}this.context=n||this.context,this.listeners=[],this.emitting=0}var Ru=Lu.prototype,_u=function(t,n,r,e,i,a,o){Mt(e)&&(i=e,e=null),o&&(a=null==a?o:Wt({},a,o));for(var u=kt(r)?r:r.split(/\s+/),s=0;s<u.length;s++){var f=u[s];if(!Pt(f)){var c=f.match(Fu);if(c)if(!1===n(t,f,c[1],c[2]?c[2]:null,e,i,a))break}}},qu=function(t,n){return t.addEventFields(t.context,n),new Pu(n.type,n)},Vu=function(t,n,r){if("event"!==wt(r))if(Et(r))n(t,qu(t,r));else for(var e=kt(r)?r:r.split(/\s+/),i=0;i<e.length;i++){var a=e[i];if(!Pt(a)){var o=a.match(Fu);if(o){var u=o[1],s=o[2]?o[2]:null;n(t,qu(t,{type:u,namespace:s,target:t.context}))}}}else n(t,r)};Ru.on=Ru.addListener=function(t,n,r,e,i){return _u(this,(function(t,n,r,e,i,a,o){Mt(a)&&t.listeners.push({event:n,callback:a,type:r,namespace:e,qualifier:i,conf:o})}),t,n,r,e,i),this},Ru.one=function(t,n,r,e){return this.on(t,n,r,e,{one:!0})},Ru.removeListener=Ru.off=function(t,n,r,e){var i=this;0!==this.emitting&&(this.listeners=this.listeners.slice());for(var a=this.listeners,o=function(o){var u=a[o];_u(i,(function(n,r,e,i,s,f){if((u.type===e||"*"===t)&&(!i&&".*"!==u.namespace||u.namespace===i)&&(!s||n.qualifierCompare(u.qualifier,s))&&(!f||u.callback===f))return a.splice(o,1),!1}),t,n,r,e)},u=a.length-1;u>=0;u--)o(u);return this},Ru.removeAllListeners=function(){return this.removeListener("*")},Ru.emit=Ru.trigger=function(t,n,r){var e=this.listeners,i=e.length;return this.emitting++,kt(n)||(n=[n]),Vu(this,(function(t,a){null!=r&&(e=[{event:a.event,type:a.type,namespace:a.namespace,callback:r}],i=e.length);for(var o=function(r){var i=e[r];if(i.type===a.type&&(!i.namespace||i.namespace===a.namespace||".*"===i.namespace)&&t.eventMatches(t.context,i,a)){var o=[a];null!=n&&function(t,n){for(var r=0;r<n.length;r++){var e=n[r];t.push(e)}}(o,n),t.beforeEmit(t.context,i,a),i.conf&&i.conf.one&&(t.listeners=t.listeners.filter((function(t){return t!==i})));var u=t.callbackContext(t.context,i,a),s=i.callback.apply(u,o);t.afterEmit(t.context,i,a),!1===s&&(a.stopPropagation(),a.preventDefault())}},u=0;u<i;u++)o(u);t.bubble(t.context)&&!a.isPropagationStopped()&&t.parent(t.context).emit(a,n)}),t),this.emitting--,this};var Uu={qualifierCompare:function(t,n){return null==t||null==n?null==t&&null==n:t.sameText(n)},eventMatches:function(t,n,r){var e=n.qualifier;return null==e||t!==r.target&&Bt(r.target)&&e.matches(r.target)},addEventFields:function(t,n){n.cy=t.cy(),n.target=t},callbackContext:function(t,n,r){return null!=n.qualifier?r.target:t},beforeEmit:function(t,n){n.conf&&n.conf.once&&n.conf.onceCollection.removeListener(n.event,n.qualifier,n.callback)},bubble:function(){return!0},parent:function(t){return t.isChild()?t.parent():t.cy()}},Wu=function(t){return xt(t)?new Vo(t):t},Zu={createEmitter:function(){for(var t=0;t<this.length;t++){var n=this[t],r=n._private;r.emitter||(r.emitter=new Lu(Uu,n))}return this},emitter:function(){return this._private.emitter},on:function(t,n,r){for(var e=Wu(n),i=0;i<this.length;i++){this[i].emitter().on(t,e,r)}return this},removeListener:function(t,n,r){for(var e=Wu(n),i=0;i<this.length;i++){this[i].emitter().removeListener(t,e,r)}return this},removeAllListeners:function(){for(var t=0;t<this.length;t++){this[t].emitter().removeAllListeners()}return this},one:function(t,n,r){for(var e=Wu(n),i=0;i<this.length;i++){this[i].emitter().one(t,e,r)}return this},once:function(t,n,r){for(var e=Wu(n),i=0;i<this.length;i++){this[i].emitter().on(t,e,r,{once:!0,onceCollection:this})}},emit:function(t,n){for(var r=0;r<this.length;r++){this[r].emitter().emit(t,n)}return this},emitAndNotify:function(t,n){if(0!==this.length)return this.cy().notify(t,this),this.emit(t,n),this}};io.eventAliasesOn(Zu);var Hu={nodes:function(t){return this.filter((function(t){return t.isNode()})).filter(t)},edges:function(t){return this.filter((function(t){return t.isEdge()})).filter(t)},byGroup:function(){for(var t=this.spawn(),n=this.spawn(),r=0;r<this.length;r++){var e=this[r];e.isNode()?t.push(e):n.push(e)}return{nodes:t,edges:n}},filter:function(t,n){if(void 0===t)return this;if(xt(t)||zt(t))return new Vo(t).filter(this);if(Mt(t)){for(var r=this.spawn(),e=this,i=0;i<e.length;i++){var a=e[i];(n?t.apply(n,[a,i,e]):t(a,i,e))&&r.push(a)}return r}return this.spawn()},not:function(t){if(t){xt(t)&&(t=this.filter(t));for(var n=this.spawn(),r=0;r<this.length;r++){var e=this[r];t.has(e)||n.push(e)}return n}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(t){if(xt(t)){var n=t;return this.filter(n)}for(var r=this.spawn(),e=t,i=this.length<t.length,a=i?this:e,o=i?e:this,u=0;u<a.length;u++){var s=a[u];o.has(s)&&r.push(s)}return r},xor:function(t){var n=this._private.cy;xt(t)&&(t=n.$(t));var r=this.spawn(),e=t,i=function(t,n){for(var e=0;e<t.length;e++){var i=t[e],a=i._private.data.id;n.hasElementWithId(a)||r.push(i)}};return i(this,e),i(e,this),r},diff:function(t){var n=this._private.cy;xt(t)&&(t=n.$(t));var r=this.spawn(),e=this.spawn(),i=this.spawn(),a=t,o=function(t,n,r){for(var e=0;e<t.length;e++){var a=t[e],o=a._private.data.id;n.hasElementWithId(o)?i.merge(a):r.push(a)}};return o(this,a,r),o(a,this,e),{left:r,right:e,both:i}},add:function(t){var n=this._private.cy;if(!t)return this;if(xt(t)){var r=t;t=n.mutableElements().filter(r)}for(var e=this.spawnSelf(),i=0;i<t.length;i++){var a=t[i],o=!this.has(a);o&&e.push(a)}return e},merge:function(t){var n=this._private,r=n.cy;if(!t)return this;if(t&&xt(t)){var e=t;t=r.mutableElements().filter(e)}for(var i=n.map,a=0;a<t.length;a++){var o=t[a],u=o._private.data.id;if(!i.has(u)){var s=this.length++;this[s]=o,i.set(u,{ele:o,index:s})}}return this},unmergeAt:function(t){var n=this[t].id(),r=this._private.map;this[t]=void 0,r.delete(n);var e=t===this.length-1;if(this.length>1&&!e){var i=this.length-1,a=this[i],o=a._private.data.id;this[i]=void 0,this[t]=a,r.set(o,{ele:a,index:t})}return this.length--,this},unmergeOne:function(t){t=t[0];var n=this._private,r=t._private.data.id,e=n.map.get(r);if(!e)return this;var i=e.index;return this.unmergeAt(i),this},unmerge:function(t){var n=this._private.cy;if(!t)return this;if(t&&xt(t)){var r=t;t=n.mutableElements().filter(r)}for(var e=0;e<t.length;e++)this.unmergeOne(t[e]);return this},unmergeBy:function(t){for(var n=this.length-1;n>=0;n--){t(this[n])&&this.unmergeAt(n)}return this},map:function(t,n){for(var r=[],e=this,i=0;i<e.length;i++){var a=e[i],o=n?t.apply(n,[a,i,e]):t(a,i,e);r.push(o)}return r},reduce:function(t,n){for(var r=n,e=this,i=0;i<e.length;i++)r=t(r,e[i],i,e);return r},max:function(t,n){for(var r,e=-1/0,i=this,a=0;a<i.length;a++){var o=i[a],u=n?t.apply(n,[o,a,i]):t(o,a,i);u>e&&(e=u,r=o)}return{value:e,ele:r}},min:function(t,n){for(var r,e=1/0,i=this,a=0;a<i.length;a++){var o=i[a],u=n?t.apply(n,[o,a,i]):t(o,a,i);u<e&&(e=u,r=o)}return{value:e,ele:r}}},Ku=Hu;Ku.u=Ku["|"]=Ku["+"]=Ku.union=Ku.or=Ku.add,Ku["\\"]=Ku["!"]=Ku["-"]=Ku.difference=Ku.relativeComplement=Ku.subtract=Ku.not,Ku.n=Ku["&"]=Ku["."]=Ku.and=Ku.intersection=Ku.intersect,Ku["^"]=Ku["(+)"]=Ku["(-)"]=Ku.symmetricDifference=Ku.symdiff=Ku.xor,Ku.fnFilter=Ku.filterFn=Ku.stdFilter=Ku.filter,Ku.complement=Ku.abscomp=Ku.absoluteComplement;var Gu=function(t,n){var r=t.cy().hasCompoundNodes();function e(t){var n=t.pstyle("z-compound-depth");return"auto"===n.value?r?t.zDepth():0:"bottom"===n.value?-1:"top"===n.value?Wn:0}var i=e(t)-e(n);if(0!==i)return i;function a(t){return"auto"===t.pstyle("z-index-compare").value&&t.isNode()?1:0}var o=a(t)-a(n);if(0!==o)return o;var u=t.pstyle("z-index").value-n.pstyle("z-index").value;return 0!==u?u:t.poolIndex()-n.poolIndex()},Yu={forEach:function(t,n){if(Mt(t))for(var r=this.length,e=0;e<r;e++){var i=this[e];if(!1===(n?t.apply(n,[i,e,this]):t(i,e,this)))break}return this},toArray:function(){for(var t=[],n=0;n<this.length;n++)t.push(this[n]);return t},slice:function(t,n){var r=[],e=this.length;null==n&&(n=e),null==t&&(t=0),t<0&&(t=e+t),n<0&&(n=e+n);for(var i=t;i>=0&&i<n&&i<e;i++)r.push(this[i]);return this.spawn(r)},size:function(){return this.length},eq:function(t){return this[t]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(t){if(!Mt(t))return this;var n=this.toArray().sort(t);return this.spawn(n)},sortByZIndex:function(){return this.sort(Gu)},zDepth:function(){var t=this[0];if(t){var n=t._private;if("nodes"===n.group){var r=n.data.parent?t.parents().size():0;return t.isParent()?r:Wn-1}var e=n.source,i=n.target,a=e.zDepth(),o=i.zDepth();return Math.max(a,o,0)}}};Yu.each=Yu.forEach;var Xu;Xu="undefined",("undefined"==typeof Symbol?"undefined":ot(Symbol))!=Xu&&ot(Symbol.iterator)!=Xu&&(Yu[Symbol.iterator]=function(){var t=this,n={value:void 0,done:!1},r=0,e=this.length;return ft({next:function(){return r<e?n.value=t[r++]:(n.value=void 0,n.done=!0),n}},Symbol.iterator,(function(){return this}))});var Qu=er({nodeDimensionsIncludeLabels:!1}),Ju={layoutDimensions:function(t){var n;if(t=Qu(t),this.takesUpSpace())if(t.nodeDimensionsIncludeLabels){var r=this.boundingBox();n={w:r.w,h:r.h}}else n={w:this.outerWidth(),h:this.outerHeight()};else n={w:0,h:0};return 0!==n.w&&0!==n.h||(n.w=n.h=1),n},layoutPositions:function(t,n,r){var e=this.nodes().filter((function(t){return!t.isParent()})),i=this.cy(),a=n.eles,o=function(t){return t.id()},u=jt(r,o);t.emit({type:"layoutstart",layout:t}),t.animations=[];var s=n.spacingFactor&&1!==n.spacingFactor,f=function(){if(!s)return null;for(var t=_r(),n=0;n<e.length;n++){var r=e[n],i=u(r,n);Vr(t,i.x,i.y)}return t}(),c=jt((function(t,r){var e=u(t,r);s&&(e=function(t,n,r){var e=n.x1+n.w/2,i=n.y1+n.h/2;return{x:e+(r.x-e)*t,y:i+(r.y-i)*t}}(Math.abs(n.spacingFactor),f,e));return null!=n.transform&&(e=n.transform(t,e)),e}),o);if(n.animate){for(var l=0;l<e.length;l++){var h=e[l],v=c(h,l);if(null==n.animateFilter||n.animateFilter(h,l)){var d=h.animation({position:v,duration:n.animationDuration,easing:n.animationEasing});t.animations.push(d)}else h.position(v)}if(n.fit){var g=i.animation({fit:{boundingBox:a.boundingBoxAt(c),padding:n.padding},duration:n.animationDuration,easing:n.animationEasing});t.animations.push(g)}else if(void 0!==n.zoom&&void 0!==n.pan){var p=i.animation({zoom:n.zoom,pan:n.pan,duration:n.animationDuration,easing:n.animationEasing});t.animations.push(p)}t.animations.forEach((function(t){return t.play()})),t.one("layoutready",n.ready),t.emit({type:"layoutready",layout:t}),Ti.all(t.animations.map((function(t){return t.promise()}))).then((function(){t.one("layoutstop",n.stop),t.emit({type:"layoutstop",layout:t})}))}else e.positions(c),n.fit&&i.fit(n.eles,n.padding),null!=n.zoom&&i.zoom(n.zoom),n.pan&&i.pan(n.pan),t.one("layoutready",n.ready),t.emit({type:"layoutready",layout:t}),t.one("layoutstop",n.stop),t.emit({type:"layoutstop",layout:t});return this},layout:function(t){return this.cy().makeLayout(Wt({},t,{eles:this}))}};function ts(t,n,r){var e,i=r._private,a=i.styleCache=i.styleCache||[];return null!=(e=a[t])?e:e=a[t]=n(r)}function ns(t,n){return t=Ln(t),function(r){return ts(t,n,r)}}function rs(t,n){t=Ln(t);var r=function(t){return n.call(t)};return function(){var n=this[0];if(n)return ts(t,r,n)}}Ju.createLayout=Ju.makeLayout=Ju.layout;var es={recalculateRenderedStyle:function(t){var n=this.cy(),r=n.renderer(),e=n.styleEnabled();return r&&e&&r.recalculateRenderedStyle(this,t),this},dirtyStyleCache:function(){var t,n=this.cy(),r=function(t){return t._private.styleCache=null};n.hasCompoundNodes()?((t=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(t.connectedEdges()),t.forEach(r)):this.forEach((function(t){r(t),t.connectedEdges().forEach(r)}));return this},updateStyle:function(t){var n=this._private.cy;if(!n.styleEnabled())return this;if(n.batching())return n._private.batchStyleEles.merge(this),this;var r=this;t=!(!t&&void 0!==t),n.hasCompoundNodes()&&(r=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var e=r;return t?e.emitAndNotify("style"):e.emit("style"),r.forEach((function(t){return t._private.styleDirty=!0})),this},cleanStyle:function(){var t=this.cy();if(t.styleEnabled())for(var n=0;n<this.length;n++){var r=this[n];r._private.styleDirty&&(r._private.styleDirty=!1,t.style().apply(r))}},parsedStyle:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this[0],e=r.cy();if(e.styleEnabled()&&r){this.cleanStyle();var i=r._private.style[t];return null!=i?i:n?e.style().getDefaultProperty(t):null}},numericStyle:function(t){var n=this[0];if(n.cy().styleEnabled()&&n){var r=n.pstyle(t);return void 0!==r.pfValue?r.pfValue:r.value}},numericStyleUnits:function(t){var n=this[0];if(n.cy().styleEnabled())return n?n.pstyle(t).units:void 0},renderedStyle:function(t){var n=this.cy();if(!n.styleEnabled())return this;var r=this[0];return r?n.style().getRenderedStyle(r,t):void 0},style:function(t,n){var r=this.cy();if(!r.styleEnabled())return this;var e=!1,i=r.style();if(Et(t)){var a=t;i.applyBypass(this,a,e),this.emitAndNotify("style")}else if(xt(t)){if(void 0===n){var o=this[0];return o?i.getStylePropertyValue(o,t):void 0}i.applyBypass(this,t,n,e),this.emitAndNotify("style")}else if(void 0===t){var u=this[0];return u?i.getRawStyle(u):void 0}return this},removeStyle:function(t){var n=this.cy();if(!n.styleEnabled())return this;var r=!1,e=n.style(),i=this;if(void 0===t)for(var a=0;a<i.length;a++){var o=i[a];e.removeAllBypasses(o,r)}else{t=t.split(/\s+/);for(var u=0;u<i.length;u++){var s=i[u];e.removeBypasses(s,t,r)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var t=this.cy();if(!t.styleEnabled())return 1;var n=t.hasCompoundNodes(),r=this[0];if(r){var e=r._private,i=r.pstyle("opacity").value;if(!n)return i;var a=e.data.parent?r.parents():null;if(a)for(var o=0;o<a.length;o++){i*=a[o].pstyle("opacity").value}return i}},transparent:function(){if(!this.cy().styleEnabled())return!1;var t=this[0],n=t.cy().hasCompoundNodes();return t?n?0===t.effectiveOpacity():0===t.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function is(t,n){var r=t._private.data.parent?t.parents():null;if(r)for(var e=0;e<r.length;e++){if(!n(r[e]))return!1}return!0}function as(t){var n=t.ok,r=t.edgeOkViaNode||t.ok,e=t.parentOk||t.ok;return function(){var t=this.cy();if(!t.styleEnabled())return!0;var i=this[0],a=t.hasCompoundNodes();if(i){var o=i._private;if(!n(i))return!1;if(i.isNode())return!a||is(i,e);var u=o.source,s=o.target;return r(u)&&(!a||is(u,r))&&(u===s||r(s)&&(!a||is(s,r)))}}}var os=ns("eleTakesUpSpace",(function(t){return"element"===t.pstyle("display").value&&0!==t.width()&&(!t.isNode()||0!==t.height())}));es.takesUpSpace=rs("takesUpSpace",as({ok:os}));var us=ns("eleInteractive",(function(t){return"yes"===t.pstyle("events").value&&"visible"===t.pstyle("visibility").value&&os(t)})),ss=ns("parentInteractive",(function(t){return"visible"===t.pstyle("visibility").value&&os(t)}));es.interactive=rs("interactive",as({ok:us,parentOk:ss,edgeOkViaNode:os})),es.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var fs=ns("eleVisible",(function(t){return"visible"===t.pstyle("visibility").value&&0!==t.pstyle("opacity").pfValue&&os(t)})),cs=os;es.visible=rs("visible",as({ok:fs,edgeOkViaNode:cs})),es.hidden=function(){var t=this[0];if(t)return!t.visible()},es.isBundledBezier=rs("isBundledBezier",(function(){return!!this.cy().styleEnabled()&&(!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace())})),es.bypass=es.css=es.style,es.renderedCss=es.renderedStyle,es.removeBypass=es.removeCss=es.removeStyle,es.pstyle=es.parsedStyle;var ls={};function hs(t){return function(){var n=arguments,r=[];if(2===n.length){var e=n[0],i=n[1];this.on(t.event,e,i)}else if(1===n.length&&Mt(n[0])){var a=n[0];this.on(t.event,a)}else if(0===n.length||1===n.length&&kt(n[0])){for(var o=1===n.length?n[0]:null,u=0;u<this.length;u++){var s=this[u],f=!t.ableField||s._private[t.ableField],c=s._private[t.field]!=t.value;if(t.overrideAble){var l=t.overrideAble(s);if(void 0!==l&&(f=l,!l))return this}f&&(s._private[t.field]=t.value,c&&r.push(s))}var h=this.spawn(r);h.updateStyle(),h.emit(t.event),o&&h.emit(o)}return this}}function vs(t){ls[t.field]=function(){var n=this[0];if(n){if(t.overrideField){var r=t.overrideField(n);if(void 0!==r)return r}return n._private[t.field]}},ls[t.on]=hs({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),ls[t.off]=hs({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}vs({field:"locked",overrideField:function(t){return!!t.cy().autolock()||void 0},on:"lock",off:"unlock"}),vs({field:"grabbable",overrideField:function(t){return!t.cy().autoungrabify()&&!t.pannable()&&void 0},on:"grabify",off:"ungrabify"}),vs({field:"selected",ableField:"selectable",overrideAble:function(t){return!t.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),vs({field:"selectable",overrideField:function(t){return!t.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),ls.deselect=ls.unselect,ls.grabbed=function(){var t=this[0];if(t)return t._private.grabbed},vs({field:"active",on:"activate",off:"unactivate"}),vs({field:"pannable",on:"panify",off:"unpanify"}),ls.inactive=function(){var t=this[0];if(t)return!t._private.active};var ds={},gs=function(t){return function(n){for(var r=[],e=0;e<this.length;e++){var i=this[e];if(i.isNode()){for(var a=!1,o=i.connectedEdges(),u=0;u<o.length;u++){var s=o[u],f=s.source(),c=s.target();if(t.noIncomingEdges&&c===i&&f!==i||t.noOutgoingEdges&&f===i&&c!==i){a=!0;break}}a||r.push(i)}}return this.spawn(r,!0).filter(n)}},ps=function(t){return function(n){for(var r=[],e=0;e<this.length;e++){var i=this[e];if(i.isNode())for(var a=i.connectedEdges(),o=0;o<a.length;o++){var u=a[o],s=u.source(),f=u.target();t.outgoing&&s===i?(r.push(u),r.push(f)):t.incoming&&f===i&&(r.push(u),r.push(s))}}return this.spawn(r,!0).filter(n)}},ys=function(t){return function(n){for(var r=this,e=[],i={};;){var a=t.outgoing?r.outgoers():r.incomers();if(0===a.length)break;for(var o=!1,u=0;u<a.length;u++){var s=a[u],f=s.id();i[f]||(i[f]=!0,e.push(s),o=!0)}if(!o)break;r=a}return this.spawn(e,!0).filter(n)}};function ms(t){return function(n){for(var r=[],e=0;e<this.length;e++){var i=this[e]._private[t.attr];i&&r.push(i)}return this.spawn(r,!0).filter(n)}}function bs(t){return function(n){var r=[],e=this._private.cy,i=t||{};xt(n)&&(n=e.$(n));for(var a=0;a<n.length;a++)for(var o=n[a]._private.edges,u=0;u<o.length;u++){var s=o[u],f=s._private.data,c=this.hasElementWithId(f.source)&&n.hasElementWithId(f.target),l=n.hasElementWithId(f.source)&&this.hasElementWithId(f.target);if(c||l){if(i.thisIsSrc||i.thisIsTgt){if(i.thisIsSrc&&!c)continue;if(i.thisIsTgt&&!l)continue}r.push(s)}}return this.spawn(r,!0)}}function ws(t){return t=Wt({},{codirected:!1},t),function(n){for(var r=[],e=this.edges(),i=t,a=0;a<e.length;a++)for(var o=e[a]._private,u=o.source,s=u._private.data.id,f=o.data.target,c=u._private.edges,l=0;l<c.length;l++){var h=c[l],v=h._private.data,d=v.target,g=v.source,p=d===f&&g===s,y=s===d&&f===g;(i.codirected&&p||!i.codirected&&(p||y))&&r.push(h)}return this.spawn(r,!0).filter(n)}}ds.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null},Wt(ds,{roots:gs({noIncomingEdges:!0}),leaves:gs({noOutgoingEdges:!0}),outgoers:Ko(ps({outgoing:!0}),"outgoers"),successors:ys({outgoing:!0}),incomers:Ko(ps({incoming:!0}),"incomers"),predecessors:ys({incoming:!0})}),Wt(ds,{neighborhood:Ko((function(t){for(var n=[],r=this.nodes(),e=0;e<r.length;e++)for(var i=r[e],a=i.connectedEdges(),o=0;o<a.length;o++){var u=a[o],s=u.source(),f=u.target(),c=i===s?f:s;c.length>0&&n.push(c[0]),n.push(u[0])}return this.spawn(n,!0).filter(t)}),"neighborhood"),closedNeighborhood:function(t){return this.neighborhood().add(this).filter(t)},openNeighborhood:function(t){return this.neighborhood(t)}}),ds.neighbourhood=ds.neighborhood,ds.closedNeighbourhood=ds.closedNeighborhood,ds.openNeighbourhood=ds.openNeighborhood,Wt(ds,{source:Ko((function(t){var n,r=this[0];return r&&(n=r._private.source||r.cy().collection()),n&&t?n.filter(t):n}),"source"),target:Ko((function(t){var n,r=this[0];return r&&(n=r._private.target||r.cy().collection()),n&&t?n.filter(t):n}),"target"),sources:ms({attr:"source"}),targets:ms({attr:"target"})}),Wt(ds,{edgesWith:Ko(bs(),"edgesWith"),edgesTo:Ko(bs({thisIsSrc:!0}),"edgesTo")}),Wt(ds,{connectedEdges:Ko((function(t){for(var n=[],r=0;r<this.length;r++){var e=this[r];if(e.isNode())for(var i=e._private.edges,a=0;a<i.length;a++){var o=i[a];n.push(o)}}return this.spawn(n,!0).filter(t)}),"connectedEdges"),connectedNodes:Ko((function(t){for(var n=[],r=0;r<this.length;r++){var e=this[r];e.isEdge()&&(n.push(e.source()[0]),n.push(e.target()[0]))}return this.spawn(n,!0).filter(t)}),"connectedNodes"),parallelEdges:Ko(ws(),"parallelEdges"),codirectedEdges:Ko(ws({codirected:!0}),"codirectedEdges")}),Wt(ds,{components:function(t){var n=this,r=n.cy(),e=r.collection(),i=null==t?n.nodes():t.nodes(),a=[];null!=t&&i.empty()&&(i=t.sources());var o=function(t,n){e.merge(t),i.unmerge(t),n.merge(t)};if(i.empty())return n.spawn();var u=function(){var t=r.collection();a.push(t);var e=i[0];o(e,t),n.bfs({directed:!1,roots:e,visit:function(n){return o(n,t)}}),t.forEach((function(r){r.connectedEdges().forEach((function(r){n.has(r)&&t.has(r.source())&&t.has(r.target())&&t.merge(r)}))}))};do{u()}while(i.length>0);return a},component:function(){var t=this[0];return t.cy().mutableElements().components(t)[0]}}),ds.componentsOf=ds.components;var xs=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],e=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0!==t){var i=new sr,a=!1;if(n){if(n.length>0&&Et(n[0])&&!Bt(n[0])){a=!0;for(var o=[],u=new cr,s=0,f=n.length;s<f;s++){var c=n[s];null==c.data&&(c.data={});var l=c.data;if(null==l.id)l.id=tr();else if(t.hasElementWithId(l.id)||u.has(l.id))continue;var h=new lr(t,c,!1);o.push(h),u.add(l.id)}n=o}}else n=[];this.length=0;for(var v=0,d=n.length;v<d;v++){var g=n[v][0];if(null!=g){var p=g._private.data.id;r&&i.has(p)||(r&&i.set(p,{index:this.length,ele:g}),this[this.length]=g,this.length++)}}this._private={eles:this,cy:t,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(t){this.lazyMap=t},rebuildMap:function(){for(var t=this.lazyMap=new sr,n=this.eles,r=0;r<n.length;r++){var e=n[r];t.set(e.id(),{index:r,ele:e})}}},r&&(this._private.map=i),a&&!e&&this.restore()}else Yn("A collection must have a reference to the core")},Ms=lr.prototype=xs.prototype=Object.create(Array.prototype);Ms.instanceString=function(){return"collection"},Ms.spawn=function(t,n){return new xs(this.cy(),t,n)},Ms.spawnSelf=function(){return this.spawn(this)},Ms.cy=function(){return this._private.cy},Ms.renderer=function(){return this._private.cy.renderer()},Ms.element=function(){return this[0]},Ms.collection=function(){return Ct(this)?this:new xs(this._private.cy,[this])},Ms.unique=function(){return new xs(this._private.cy,this,!0)},Ms.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)},Ms.getElementById=function(t){t=""+t;var n=this._private.cy,r=this._private.map.get(t);return r?r.ele:new xs(n)},Ms.$id=Ms.getElementById,Ms.poolIndex=function(){var t=this._private.cy._private.elements,n=this[0]._private.data.id;return t._private.map.get(n).index},Ms.indexOf=function(t){var n=t[0]._private.data.id;return this._private.map.get(n).index},Ms.indexOfId=function(t){return t=""+t,this._private.map.get(t).index},Ms.json=function(t){var n=this.element(),r=this.cy();if(null==n&&t)return this;if(null!=n){var e=n._private;if(Et(t)){if(r.startBatch(),t.data){n.data(t.data);var i=e.data;if(n.isEdge()){var a=!1,o={},u=t.data.source,s=t.data.target;null!=u&&u!=i.source&&(o.source=""+u,a=!0),null!=s&&s!=i.target&&(o.target=""+s,a=!0),a&&(n=n.move(o))}else{var f="parent"in t.data,c=t.data.parent;!f||null==c&&null==i.parent||c==i.parent||(void 0===c&&(c=null),null!=c&&(c=""+c),n=n.move({parent:c}))}}t.position&&n.position(t.position);var l=function(r,i,a){var o=t[r];null!=o&&o!==e[r]&&(o?n[i]():n[a]())};return l("removed","remove","restore"),l("selected","select","unselect"),l("selectable","selectify","unselectify"),l("locked","lock","unlock"),l("grabbable","grabify","ungrabify"),l("pannable","panify","unpanify"),null!=t.classes&&n.classes(t.classes),r.endBatch(),this}if(void 0===t){var h={data:Jn(e.data),position:Jn(e.position),group:e.group,removed:e.removed,selected:e.selected,selectable:e.selectable,locked:e.locked,grabbable:e.grabbable,pannable:e.pannable,classes:(null,"")},v=0;return e.classes.forEach((function(t){return h.classes+=0==v++?t:" "+t})),h}}},Ms.jsons=function(){for(var t=[],n=0;n<this.length;n++){var r=this[n].json();t.push(r)}return t},Ms.clone=function(){for(var t=this.cy(),n=[],r=0;r<this.length;r++){var e=this[r].json(),i=new lr(t,e,!1);n.push(i)}return new xs(t,n)},Ms.copy=Ms.clone,Ms.restore=function(){for(var t,n,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this,a=i.cy(),o=a._private,u=[],s=[],f=0,c=i.length;f<c;f++){var l=i[f];e&&!l.removed()||(l.isNode()?u.push(l):s.push(l))}t=u.concat(s);var h=function(){t.splice(n,1),n--};for(n=0;n<t.length;n++){var v=t[n],d=v._private,g=d.data;if(v.clearTraversalCache(),e||d.removed)if(void 0===g.id)g.id=tr();else if(St(g.id))g.id=""+g.id;else{if(Pt(g.id)||!xt(g.id)){Yn("Can not create element with invalid string ID `"+g.id+"`"),h();continue}if(a.hasElementWithId(g.id)){Yn("Can not create second element with ID `"+g.id+"`"),h();continue}}else;var p=g.id;if(v.isNode()){var y=d.position;null==y.x&&(y.x=0),null==y.y&&(y.y=0)}if(v.isEdge()){for(var m=v,b=["source","target"],w=b.length,x=!1,M=0;M<w;M++){var k=b[M],E=g[k];St(E)&&(E=g[k]=""+g[k]),null==E||""===E?(Yn("Can not create edge `"+p+"` with unspecified "+k),x=!0):a.hasElementWithId(E)||(Yn("Can not create edge `"+p+"` with nonexistant "+k+" `"+E+"`"),x=!0)}if(x){h();continue}var S=a.getElementById(g.source),A=a.getElementById(g.target);S.same(A)?S._private.edges.push(m):(S._private.edges.push(m),A._private.edges.push(m)),m._private.source=S,m._private.target=A}d.map=new sr,d.map.set(p,{ele:v,index:0}),d.removed=!1,e&&a.addToPool(v)}for(var z=0;z<u.length;z++){var B=u[z],C=B._private.data;St(C.parent)&&(C.parent=""+C.parent);var T=C.parent;if(null!=T||B._private.parent){var O=B._private.parent?a.collection().merge(B._private.parent):a.getElementById(T);if(O.empty())C.parent=void 0;else if(O[0].removed())Qn("Node added with missing parent, reference to parent removed"),C.parent=void 0,B._private.parent=null;else{for(var P=!1,N=O;!N.empty();){if(B.same(N)){P=!0,C.parent=void 0;break}N=N.parent()}P||(O[0]._private.children.push(B),B._private.parent=O[0],o.hasCompoundNodes=!0)}}}if(t.length>0){for(var j=t.length===i.length?i:new xs(a,t),F=0;F<j.length;F++){var D=j[F];D.isNode()||(D.parallelEdges().clearTraversalCache(),D.source().clearTraversalCache(),D.target().clearTraversalCache())}(o.hasCompoundNodes?a.collection().merge(j).merge(j.connectedNodes()).merge(j.parent()):j).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(r),r?j.emitAndNotify("add"):e&&j.emit("add")}return i},Ms.removed=function(){var t=this[0];return t&&t._private.removed},Ms.inside=function(){var t=this[0];return t&&!t._private.removed},Ms.remove=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this,e=[],i={},a=r._private.cy;function o(t){var r=i[t.id()];n&&t.removed()||r||(i[t.id()]=!0,t.isNode()?(e.push(t),function(t){for(var n=t._private.edges,r=0;r<n.length;r++)o(n[r])}(t),function(t){for(var n=t._private.children,r=0;r<n.length;r++)o(n[r])}(t)):e.unshift(t))}for(var u=0,s=r.length;u<s;u++){o(r[u])}function f(t,n){var r=t._private.edges;ir(r,n),t.clearTraversalCache()}function c(t){t.clearTraversalCache()}var l=[];function h(t,n){n=n[0];var r=(t=t[0])._private.children,e=t.id();ir(r,n),n._private.parent=null,l.ids[e]||(l.ids[e]=!0,l.push(t))}l.ids={},r.dirtyCompoundBoundsCache(),n&&a.removeFromPool(e);for(var v=0;v<e.length;v++){var d=e[v];if(d.isEdge()){var g=d.source()[0],p=d.target()[0];f(g,d),f(p,d);for(var y=d.parallelEdges(),m=0;m<y.length;m++){var b=y[m];c(b),b.isBundledBezier()&&b.dirtyBoundingBoxCache()}}else{var w=d.parent();0!==w.length&&h(w,d)}n&&(d._private.removed=!0)}var x=a._private.elements;a._private.hasCompoundNodes=!1;for(var M=0;M<x.length;M++){if(x[M].isParent()){a._private.hasCompoundNodes=!0;break}}var k=new xs(this.cy(),e);k.size()>0&&(t?k.emitAndNotify("remove"):n&&k.emit("remove"));for(var E=0;E<l.length;E++){var S=l[E];n&&S.removed()||S.updateStyle()}return k},Ms.move=function(t){var n=this._private.cy,r=this,e=!1,i=!1,a=function(t){return null==t?t:""+t};if(void 0!==t.source||void 0!==t.target){var o=a(t.source),u=a(t.target),s=null!=o&&n.hasElementWithId(o),f=null!=u&&n.hasElementWithId(u);(s||f)&&(n.batch((function(){r.remove(e,i),r.emitAndNotify("moveout");for(var t=0;t<r.length;t++){var n=r[t],a=n._private.data;n.isEdge()&&(s&&(a.source=o),f&&(a.target=u))}r.restore(e,i)})),r.emitAndNotify("move"))}else if(void 0!==t.parent){var c=a(t.parent);if(null===c||n.hasElementWithId(c)){var l=null===c?void 0:c;n.batch((function(){var t=r.remove(e,i);t.emitAndNotify("moveout");for(var n=0;n<r.length;n++){var a=r[n],o=a._private.data;a.isNode()&&(o.parent=l)}t.restore(e,i)})),r.emitAndNotify("move")}}return this},[ki,ao,oo,Wo,Go,ru,eu,Ou,Zu,Hu,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var t=this[0];if(t)return t._private.group}},Yu,Ju,es,ls,ds].forEach((function(t){Wt(Ms,t)}));var ks={add:function(t){var n,r=this;if(zt(t)){var e=t;if(e._private.cy===r)n=e.restore();else{for(var i=[],a=0;a<e.length;a++){var o=e[a];i.push(o.json())}n=new xs(r,i)}}else if(kt(t)){n=new xs(r,t)}else if(Et(t)&&(kt(t.nodes)||kt(t.edges))){for(var u=t,s=[],f=["nodes","edges"],c=0,l=f.length;c<l;c++){var h=f[c],v=u[h];if(kt(v))for(var d=0,g=v.length;d<g;d++){var p=Wt({group:h},v[d]);s.push(p)}}n=new xs(r,s)}else{n=new lr(r,t).collection()}return n},remove:function(t){if(zt(t));else if(xt(t)){var n=t;t=this.$(n)}return t.remove()}};
/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function Es(t,n,r,e){var i=.1,a="undefined"!=typeof Float32Array;if(4!==arguments.length)return!1;for(var o=0;o<4;++o)if("number"!=typeof arguments[o]||isNaN(arguments[o])||!isFinite(arguments[o]))return!1;t=Math.min(t,1),r=Math.min(r,1),t=Math.max(t,0),r=Math.max(r,0);var u=a?new Float32Array(11):new Array(11);function s(t,n){return 1-3*n+3*t}function f(t,n){return 3*n-6*t}function c(t){return 3*t}function l(t,n,r){return((s(n,r)*t+f(n,r))*t+c(n))*t}function h(t,n,r){return 3*s(n,r)*t*t+2*f(n,r)*t+c(n)}function v(n){for(var e=0,a=1;10!==a&&u[a]<=n;++a)e+=i;--a;var o=e+(n-u[a])/(u[a+1]-u[a])*i,s=h(o,t,r);return s>=.001?function(n,e){for(var i=0;i<4;++i){var a=h(e,t,r);if(0===a)return e;e-=(l(e,t,r)-n)/a}return e}(n,o):0===s?o:function(n,e,i){var a,o,u=0;do{(a=l(o=e+(i-e)/2,t,r)-n)>0?i=o:e=o}while(Math.abs(a)>1e-7&&++u<10);return o}(n,e,e+i)}var d=!1;function g(){d=!0,t===n&&r===e||function(){for(var n=0;n<11;++n)u[n]=l(n*i,t,r)}()}var p=function(i){return d||g(),t===n&&r===e?i:0===i?0:1===i?1:l(v(i),n,e)};p.getControlPoints=function(){return[{x:t,y:n},{x:r,y:e}]};var y="generateBezier("+[t,n,r,e]+")";return p.toString=function(){return y},p}
/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var Ss=function(){function t(t){return-t.tension*t.x-t.friction*t.v}function n(n,r,e){var i={x:n.x+e.dx*r,v:n.v+e.dv*r,tension:n.tension,friction:n.friction};return{dx:i.v,dv:t(i)}}function r(r,e){var i={dx:r.v,dv:t(r)},a=n(r,.5*e,i),o=n(r,.5*e,a),u=n(r,e,o),s=1/6*(i.dx+2*(a.dx+o.dx)+u.dx),f=1/6*(i.dv+2*(a.dv+o.dv)+u.dv);return r.x=r.x+s*e,r.v=r.v+f*e,r}return function t(n,e,i){var a,o,u,s={x:-1,v:0,tension:null,friction:null},f=[0],c=0,l=1e-4;for(n=parseFloat(n)||500,e=parseFloat(e)||20,i=i||null,s.tension=n,s.friction=e,o=(a=null!==i)?(c=t(n,e))/i*.016:.016;u=r(u||s,o),f.push(1+u.x),c+=16,Math.abs(u.x)>l&&Math.abs(u.v)>l;);return a?function(t){return f[t*(f.length-1)|0]}:c}}(),As=function(t,n,r,e){var i=Es(t,n,r,e);return function(t,n,r){return t+(n-t)*i(r)}},zs={linear:function(t,n,r){return t+(n-t)*r},ease:As(.25,.1,.25,1),"ease-in":As(.42,0,1,1),"ease-out":As(0,0,.58,1),"ease-in-out":As(.42,0,.58,1),"ease-in-sine":As(.47,0,.745,.715),"ease-out-sine":As(.39,.575,.565,1),"ease-in-out-sine":As(.445,.05,.55,.95),"ease-in-quad":As(.55,.085,.68,.53),"ease-out-quad":As(.25,.46,.45,.94),"ease-in-out-quad":As(.455,.03,.515,.955),"ease-in-cubic":As(.55,.055,.675,.19),"ease-out-cubic":As(.215,.61,.355,1),"ease-in-out-cubic":As(.645,.045,.355,1),"ease-in-quart":As(.895,.03,.685,.22),"ease-out-quart":As(.165,.84,.44,1),"ease-in-out-quart":As(.77,0,.175,1),"ease-in-quint":As(.755,.05,.855,.06),"ease-out-quint":As(.23,1,.32,1),"ease-in-out-quint":As(.86,0,.07,1),"ease-in-expo":As(.95,.05,.795,.035),"ease-out-expo":As(.19,1,.22,1),"ease-in-out-expo":As(1,0,0,1),"ease-in-circ":As(.6,.04,.98,.335),"ease-out-circ":As(.075,.82,.165,1),"ease-in-out-circ":As(.785,.135,.15,.86),spring:function(t,n,r){if(0===r)return zs.linear;var e=Ss(t,n,r);return function(t,n,r){return t+(n-t)*e(r)}},"cubic-bezier":As};function Bs(t,n,r,e,i){if(1===e)return r;if(n===r)return r;var a=i(n,r,e);return null==t||((t.roundValue||t.color)&&(a=Math.round(a)),void 0!==t.min&&(a=Math.max(a,t.min)),void 0!==t.max&&(a=Math.min(a,t.max))),a}function Cs(t,n){return null!=t.pfValue||null!=t.value?null==t.pfValue||null!=n&&"%"===n.type.units?t.value:t.pfValue:t}function Ts(t,n,r,e,i){var a=null!=i?i.type:null;r<0?r=0:r>1&&(r=1);var o=Cs(t,i),u=Cs(n,i);if(St(o)&&St(u))return Bs(a,o,u,r,e);if(kt(o)&&kt(u)){for(var s=[],f=0;f<u.length;f++){var c=o[f],l=u[f];if(null!=c&&null!=l){var h=Bs(a,c,l,r,e);s.push(h)}else s.push(l)}return s}}function Os(t,n,r,e){var i=!e,a=t._private,o=n._private,u=o.easing,s=o.startTime,f=(e?t:t.cy()).style();if(!o.easingImpl)if(null==u)o.easingImpl=zs.linear;else{var c,l,h;if(xt(u))c=f.parse("transition-timing-function",u).value;else c=u;xt(c)?(l=c,h=[]):(l=c[1],h=c.slice(2).map((function(t){return+t}))),h.length>0?("spring"===l&&h.push(o.duration),o.easingImpl=zs[l].apply(null,h)):o.easingImpl=zs[l]}var v,d=o.easingImpl;if(v=0===o.duration?1:(r-s)/o.duration,o.applying&&(v=o.progress),v<0?v=0:v>1&&(v=1),null==o.delay){var g=o.startPosition,p=o.position;if(p&&i&&!t.locked()){var y={};Ps(g.x,p.x)&&(y.x=Ts(g.x,p.x,v,d)),Ps(g.y,p.y)&&(y.y=Ts(g.y,p.y,v,d)),t.position(y)}var m=o.startPan,b=o.pan,w=a.pan,x=null!=b&&e;x&&(Ps(m.x,b.x)&&(w.x=Ts(m.x,b.x,v,d)),Ps(m.y,b.y)&&(w.y=Ts(m.y,b.y,v,d)),t.emit("pan"));var M=o.startZoom,k=o.zoom,E=null!=k&&e;E&&(Ps(M,k)&&(a.zoom=Rr(a.minZoom,Ts(M,k,v,d),a.maxZoom)),t.emit("zoom")),(x||E)&&t.emit("viewport");var S=o.style;if(S&&S.length>0&&i){for(var A=0;A<S.length;A++){var z=S[A],B=z.name,C=z,T=o.startStyle[B],O=Ts(T,C,v,d,f.properties[T.name]);f.overrideBypass(t,B,O)}t.emit("style")}}return o.progress=v,v}function Ps(t,n){return null!=t&&null!=n&&(!(!St(t)||!St(n))||!(!t||!n))}function Ns(t,n,r,e){var i=n._private;i.started=!0,i.startTime=r-i.progress*i.duration}function js(t,n){var r=n._private.aniEles,e=[];function i(n,r){var i=n._private,a=i.animation.current,o=i.animation.queue,u=!1;if(0===a.length){var s=o.shift();s&&a.push(s)}for(var f=function(t){for(var n=t.length-1;n>=0;n--){(0,t[n])()}t.splice(0,t.length)},c=a.length-1;c>=0;c--){var l=a[c],h=l._private;h.stopped?(a.splice(c,1),h.hooked=!1,h.playing=!1,h.started=!1,f(h.frames)):(h.playing||h.applying)&&(h.playing&&h.applying&&(h.applying=!1),h.started||Ns(0,l,t),Os(n,l,t,r),h.applying&&(h.applying=!1),f(h.frames),null!=h.step&&h.step(t),l.completed()&&(a.splice(c,1),h.hooked=!1,h.playing=!1,h.started=!1,f(h.completes)),u=!0)}return r||0!==a.length||0!==o.length||e.push(n),u}for(var a=!1,o=0;o<r.length;o++){var u=i(r[o]);a=a||u}var s=i(n,!0);(a||s)&&(r.length>0?n.notify("draw",r):n.notify("draw")),r.unmerge(e),n.emit("step")}var Fs={animate:io.animate(),animation:io.animation(),animated:io.animated(),clearQueue:io.clearQueue(),delay:io.delay(),delayAnimation:io.delayAnimation(),stop:io.stop(),addToAnimationPool:function(t){this.styleEnabled()&&this._private.aniEles.merge(t)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var t=this;if(t._private.animationsRunning=!0,t.styleEnabled()){var n=t.renderer();n&&n.beforeRender?n.beforeRender((function(n,r){js(r,t)}),n.beforeRenderPriorities.animations):function n(){t._private.animationsRunning&&Tn((function(r){js(r,t),n()}))}()}}},Ds={qualifierCompare:function(t,n){return null==t||null==n?null==t&&null==n:t.sameText(n)},eventMatches:function(t,n,r){var e=n.qualifier;return null==e||t!==r.target&&Bt(r.target)&&e.matches(r.target)},addEventFields:function(t,n){n.cy=t,n.target=t},callbackContext:function(t,n,r){return null!=n.qualifier?r.target:t}},Is=function(t){return xt(t)?new Vo(t):t},$s={createEmitter:function(){var t=this._private;return t.emitter||(t.emitter=new Lu(Ds,this)),this},emitter:function(){return this._private.emitter},on:function(t,n,r){return this.emitter().on(t,Is(n),r),this},removeListener:function(t,n,r){return this.emitter().removeListener(t,Is(n),r),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(t,n,r){return this.emitter().one(t,Is(n),r),this},once:function(t,n,r){return this.emitter().one(t,Is(n),r),this},emit:function(t,n){return this.emitter().emit(t,n),this},emitAndNotify:function(t,n){return this.emit(t),this.notify(t,n),this}};io.eventAliasesOn($s);var Ls={png:function(t){return t=t||{},this._private.renderer.png(t)},jpg:function(t){var n=this._private.renderer;return(t=t||{}).bg=t.bg||"#fff",n.jpg(t)}};Ls.jpeg=Ls.jpg;var Rs={layout:function(t){var n=this;if(null!=t)if(null!=t.name){var r=t.name,e=n.extension("layout",r);if(null!=e){var i;i=xt(t.eles)?n.$(t.eles):null!=t.eles?t.eles:n.$();var a=new e(Wt({},t,{cy:n,eles:i}));return a}Yn("No such layout `"+r+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else Yn("A `name` must be specified to make a layout");else Yn("Layout options must be specified to make a layout")}};Rs.createLayout=Rs.makeLayout=Rs.layout;var _s={notify:function(t,n){var r=this._private;if(this.batching()){r.batchNotifications=r.batchNotifications||{};var e=r.batchNotifications[t]=r.batchNotifications[t]||this.collection();null!=n&&e.merge(n)}else if(r.notificationsEnabled){var i=this.renderer();!this.destroyed()&&i&&i.notify(t,n)}},notifications:function(t){var n=this._private;return void 0===t?n.notificationsEnabled:(n.notificationsEnabled=!!t,this)},noNotifications:function(t){this.notifications(!1),t(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var t=this._private;return null==t.batchCount&&(t.batchCount=0),0===t.batchCount&&(t.batchStyleEles=this.collection(),t.batchNotifications={}),t.batchCount++,this},endBatch:function(){var t=this._private;if(0===t.batchCount)return this;if(t.batchCount--,0===t.batchCount){t.batchStyleEles.updateStyle();var n=this.renderer();Object.keys(t.batchNotifications).forEach((function(r){var e=t.batchNotifications[r];e.empty()?n.notify(r):n.notify(r,e)}))}return this},batch:function(t){return this.startBatch(),t(),this.endBatch(),this},batchData:function(t){var n=this;return this.batch((function(){for(var r=Object.keys(t),e=0;e<r.length;e++){var i=r[e],a=t[i];n.getElementById(i).data(a)}}))}},qs=er({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),Vs={renderTo:function(t,n,r,e){return this._private.renderer.renderTo(t,n,r,e),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(t){var n=this,r=n.extension("renderer",t.name);if(null!=r){void 0!==t.wheelSensitivity&&Qn("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var e=qs(t);e.cy=n,n._private.renderer=new r(e),this.notify("init")}else Yn("Can not initialise: No such renderer `".concat(t.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){var t=this;t.notify("destroy");var n=t.container();if(n)for(n._cyreg=null;n.childNodes.length>0;)n.removeChild(n.childNodes[0]);t._private.renderer=null,t.mutableElements().forEach((function(t){var n=t._private;n.rscratch={},n.rstyle={},n.animation.current=[],n.animation.queue=[]}))},onRender:function(t){return this.on("render",t)},offRender:function(t){return this.off("render",t)}};Vs.invalidateDimensions=Vs.resize;var Us={collection:function(t,n){return xt(t)?this.$(t):zt(t)?t.collection():kt(t)?(n||(n={}),new xs(this,t,n.unique,n.removed)):new xs(this)},nodes:function(t){var n=this.$((function(t){return t.isNode()}));return t?n.filter(t):n},edges:function(t){var n=this.$((function(t){return t.isEdge()}));return t?n.filter(t):n},$:function(t){var n=this._private.elements;return t?n.filter(t):n.spawnSelf()},mutableElements:function(){return this._private.elements}};Us.elements=Us.filter=Us.$;var Ws={},Zs="t";Ws.apply=function(t){for(var n=this,r=n._private.cy.collection(),e=0;e<t.length;e++){var i=t[e],a=n.getContextMeta(i);if(!a.empty){var o=n.getContextStyle(a),u=n.applyContextStyle(a,o,i);i._private.appliedInitStyle?n.updateTransitions(i,u.diffProps):i._private.appliedInitStyle=!0,n.updateStyleHints(i)&&r.push(i)}}return r},Ws.getPropertiesDiff=function(t,n){var r=this,e=r._private.propDiffs=r._private.propDiffs||{},i=t+"-"+n,a=e[i];if(a)return a;for(var o=[],u={},s=0;s<r.length;s++){var f=r[s],c=t[s]===Zs,l=n[s]===Zs,h=c!==l,v=f.mappedProperties.length>0;if(h||l&&v){var d=void 0;h&&v||h?d=f.properties:v&&(d=f.mappedProperties);for(var g=0;g<d.length;g++){for(var p=d[g],y=p.name,m=!1,b=s+1;b<r.length;b++){var w=r[b];if(n[b]===Zs&&(m=null!=w.properties[p.name]))break}u[y]||m||(u[y]=!0,o.push(y))}}}return e[i]=o,o},Ws.getContextMeta=function(t){for(var n,r=this,e="",i=t._private.styleCxtKey||"",a=0;a<r.length;a++){var o=r[a];e+=o.selector&&o.selector.matches(t)?Zs:"f"}return n=r.getPropertiesDiff(i,e),t._private.styleCxtKey=e,{key:e,diffPropNames:n,empty:0===n.length}},Ws.getContextStyle=function(t){var n=t.key,r=this._private.contextStyles=this._private.contextStyles||{};if(r[n])return r[n];for(var e={_private:{key:n}},i=0;i<this.length;i++){var a=this[i];if(n[i]===Zs)for(var o=0;o<a.properties.length;o++){var u=a.properties[o];e[u.name]=u}}return r[n]=e,e},Ws.applyContextStyle=function(t,n,r){for(var e=t.diffPropNames,i={},a=this.types,o=0;o<e.length;o++){var u=e[o],s=n[u],f=r.pstyle(u);if(!s){if(!f)continue;s=f.bypass?{name:u,deleteBypassed:!0}:{name:u,delete:!0}}if(f!==s){if(s.mapped===a.fn&&null!=f&&null!=f.mapping&&f.mapping.value===s.value){var c=f.mapping;if((c.fnValue=s.value(r))===c.prevFnValue)continue}var l=i[u]={prev:f};this.applyParsedProperty(r,s),l.next=r.pstyle(u),l.next&&l.next.bypass&&(l.next=l.next.bypassed)}}return{diffProps:i}},Ws.updateStyleHints=function(t){var n=t._private,r=this,e=r.propertyGroupNames,i=r.propertyGroupKeys,a=function(t,n,e){return r.getPropertiesHash(t,n,e)},o=n.styleKey;if(t.removed())return!1;var u="nodes"===n.group,s=t._private.style;e=Object.keys(s);for(var f=0;f<i.length;f++){var c=i[f];n.styleKeys[c]=[Pn,Nn]}for(var l,h=function(t,r){return n.styleKeys[r][0]=Fn(t,n.styleKeys[r][0])},v=function(t,r){return n.styleKeys[r][1]=Dn(t,n.styleKeys[r][1])},d=function(t,n){h(t,n),v(t,n)},g=function(t,n){for(var r=0;r<t.length;r++){var e=t.charCodeAt(r);h(e,n),v(e,n)}},p=0;p<e.length;p++){var y=e[p],m=s[y];if(null!=m){var b=this.properties[y],w=b.type,x=b.groupKey,M=void 0;null!=b.hashOverride?M=b.hashOverride(t,m):null!=m.pfValue&&(M=m.pfValue);var k=null==b.enums?m.value:null,E=null!=M,S=E||null!=k,A=m.units;if(w.number&&S&&!w.multiple)d(-128<(l=E?M:k)&&l<128&&Math.floor(l)!==l?2e9-(1024*l|0):l,x),E||null==A||g(A,x);else g(m.strValue,x)}}for(var z,B,C=[Pn,Nn],T=0;T<i.length;T++){var O=i[T],P=n.styleKeys[O];C[0]=Fn(P[0],C[0]),C[1]=Dn(P[1],C[1])}n.styleKey=(z=C[0],B=C[1],2097152*z+B);var N=n.styleKeys;n.labelDimsKey=In(N.labelDimensions);var j=a(t,["label"],N.labelDimensions);if(n.labelKey=In(j),n.labelStyleKey=In($n(N.commonLabel,j)),!u){var F=a(t,["source-label"],N.labelDimensions);n.sourceLabelKey=In(F),n.sourceLabelStyleKey=In($n(N.commonLabel,F));var D=a(t,["target-label"],N.labelDimensions);n.targetLabelKey=In(D),n.targetLabelStyleKey=In($n(N.commonLabel,D))}if(u){var I=n.styleKeys,$=I.nodeBody,L=I.nodeBorder,R=I.nodeOutline,_=I.backgroundImage,q=I.compound,V=I.pie,U=[$,L,R,_,q,V].filter((function(t){return null!=t})).reduce($n,[Pn,Nn]);n.nodeKey=In(U),n.hasPie=null!=V&&V[0]!==Pn&&V[1]!==Nn}return o!==n.styleKey},Ws.clearStyleHints=function(t){var n=t._private;n.styleCxtKey="",n.styleKeys={},n.styleKey=null,n.labelKey=null,n.labelStyleKey=null,n.sourceLabelKey=null,n.sourceLabelStyleKey=null,n.targetLabelKey=null,n.targetLabelStyleKey=null,n.nodeKey=null,n.hasPie=null},Ws.applyParsedProperty=function(t,n){var r,e=this,i=n,a=t._private.style,o=e.types,u=e.properties[i.name].type,s=i.bypass,f=a[i.name],c=f&&f.bypass,l=t._private,h="mapping",v=function(t){return null==t?null:null!=t.pfValue?t.pfValue:t.value},d=function(){var n=v(f),r=v(i);e.checkTriggers(t,i.name,n,r)};if("curve-style"===n.name&&t.isEdge()&&("bezier"!==n.value&&t.isLoop()||"haystack"===n.value&&(t.source().isParent()||t.target().isParent()))&&(i=n=this.parse(n.name,"bezier",s)),i.delete)return a[i.name]=void 0,d(),!0;if(i.deleteBypassed)return f?!!f.bypass&&(f.bypassed=void 0,d(),!0):(d(),!0);if(i.deleteBypass)return f?!!f.bypass&&(a[i.name]=f.bypassed,d(),!0):(d(),!0);var g=function(){Qn("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+i.name+"` with data field `"+i.field+"`); try a `["+i.field+"]` selector to limit scope to elements with `"+i.field+"` defined")};switch(i.mapped){case o.mapData:for(var p,y=i.field.split("."),m=l.data,b=0;b<y.length&&m;b++){m=m[y[b]]}if(null==m)return g(),!1;if(!St(m))return Qn("Do not use continuous mappers without specifying numeric data (i.e. `"+i.field+": "+m+"` for `"+t.id()+"` is non-numeric)"),!1;var w=i.fieldMax-i.fieldMin;if((p=0===w?0:(m-i.fieldMin)/w)<0?p=0:p>1&&(p=1),u.color){var x=i.valueMin[0],M=i.valueMax[0],k=i.valueMin[1],E=i.valueMax[1],S=i.valueMin[2],A=i.valueMax[2],z=null==i.valueMin[3]?1:i.valueMin[3],B=null==i.valueMax[3]?1:i.valueMax[3],C=[Math.round(x+(M-x)*p),Math.round(k+(E-k)*p),Math.round(S+(A-S)*p),Math.round(z+(B-z)*p)];r={bypass:i.bypass,name:i.name,value:C,strValue:"rgb("+C[0]+", "+C[1]+", "+C[2]+")"}}else{if(!u.number)return!1;var T=i.valueMin+(i.valueMax-i.valueMin)*p;r=this.parse(i.name,T,i.bypass,h)}if(!r)return g(),!1;r.mapping=i,i=r;break;case o.data:for(var O=i.field.split("."),P=l.data,N=0;N<O.length&&P;N++){P=P[O[N]]}if(null!=P&&(r=this.parse(i.name,P,i.bypass,h)),!r)return g(),!1;r.mapping=i,i=r;break;case o.fn:var j=i.value,F=null!=i.fnValue?i.fnValue:j(t);if(i.prevFnValue=F,null==F)return Qn("Custom function mappers may not return null (i.e. `"+i.name+"` for ele `"+t.id()+"` is null)"),!1;if(!(r=this.parse(i.name,F,i.bypass,h)))return Qn("Custom function mappers may not return invalid values for the property type (i.e. `"+i.name+"` for ele `"+t.id()+"` is invalid)"),!1;r.mapping=Jn(i),i=r;break;case void 0:break;default:return!1}return s?(i.bypassed=c?f.bypassed:f,a[i.name]=i):c?f.bypassed=i:a[i.name]=i,d(),!0},Ws.cleanElements=function(t,n){for(var r=0;r<t.length;r++){var e=t[r];if(this.clearStyleHints(e),e.dirtyCompoundBoundsCache(),e.dirtyBoundingBoxCache(),n)for(var i=e._private.style,a=Object.keys(i),o=0;o<a.length;o++){var u=a[o],s=i[u];null!=s&&(s.bypass?s.bypassed=null:i[u]=null)}else e._private.style={}}},Ws.update=function(){this._private.cy.mutableElements().updateStyle()},Ws.updateTransitions=function(t,n){var r=this,e=t._private,i=t.pstyle("transition-property").value,a=t.pstyle("transition-duration").pfValue,o=t.pstyle("transition-delay").pfValue;if(i.length>0&&a>0){for(var u={},s=!1,f=0;f<i.length;f++){var c=i[f],l=t.pstyle(c),h=n[c];if(h){var v=h.prev,d=null!=h.next?h.next:l,g=!1,p=void 0,y=1e-6;v&&(St(v.pfValue)&&St(d.pfValue)?(g=d.pfValue-v.pfValue,p=v.pfValue+y*g):St(v.value)&&St(d.value)?(g=d.value-v.value,p=v.value+y*g):kt(v.value)&&kt(d.value)&&(g=v.value[0]!==d.value[0]||v.value[1]!==d.value[1]||v.value[2]!==d.value[2],p=v.strValue),g&&(u[c]=d.strValue,this.applyBypass(t,c,p),s=!0))}}if(!s)return;e.transitioning=!0,new Ti((function(n){o>0?t.delayAnimation(o).play().promise().then(n):n()})).then((function(){return t.animation({style:u,duration:a,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()})).then((function(){r.removeBypasses(t,i),t.emitAndNotify("style"),e.transitioning=!1}))}else e.transitioning&&(this.removeBypasses(t,i),t.emitAndNotify("style"),e.transitioning=!1)},Ws.checkTrigger=function(t,n,r,e,i,a){var o=this.properties[n],u=i(o);null!=u&&u(r,e)&&a(o)},Ws.checkZOrderTrigger=function(t,n,r,e){var i=this;this.checkTrigger(t,n,r,e,(function(t){return t.triggersZOrder}),(function(){i._private.cy.notify("zorder",t)}))},Ws.checkBoundsTrigger=function(t,n,r,e){this.checkTrigger(t,n,r,e,(function(t){return t.triggersBounds}),(function(i){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache(),!i.triggersBoundsOfParallelBeziers||"curve-style"!==n||"bezier"!==r&&"bezier"!==e||t.parallelEdges().forEach((function(t){t.dirtyBoundingBoxCache()})),!i.triggersBoundsOfConnectedEdges||"display"!==n||"none"!==r&&"none"!==e||t.connectedEdges().forEach((function(t){t.dirtyBoundingBoxCache()}))}))},Ws.checkTriggers=function(t,n,r,e){t.dirtyStyleCache(),this.checkZOrderTrigger(t,n,r,e),this.checkBoundsTrigger(t,n,r,e)};var Hs={applyBypass:function(t,n,r,e){var i=[];if("*"===n||"**"===n){if(void 0!==r)for(var a=0;a<this.properties.length;a++){var o=this.properties[a].name,u=this.parse(o,r,!0);u&&i.push(u)}}else if(xt(n)){var s=this.parse(n,r,!0);s&&i.push(s)}else{if(!Et(n))return!1;var f=n;e=r;for(var c=Object.keys(f),l=0;l<c.length;l++){var h=c[l],v=f[h];if(void 0===v&&(v=f[Dt(h)]),void 0!==v){var d=this.parse(h,v,!0);d&&i.push(d)}}}if(0===i.length)return!1;for(var g=!1,p=0;p<t.length;p++){for(var y=t[p],m={},b=void 0,w=0;w<i.length;w++){var x=i[w];if(e){var M=y.pstyle(x.name);b=m[x.name]={prev:M}}g=this.applyParsedProperty(y,Jn(x))||g,e&&(b.next=y.pstyle(x.name))}g&&this.updateStyleHints(y),e&&this.updateTransitions(y,m,true)}return g},overrideBypass:function(t,n,r){n=Ft(n);for(var e=0;e<t.length;e++){var i=t[e],a=i._private.style[n],o=this.properties[n].type,u=o.color,s=o.mutiple,f=a?null!=a.pfValue?a.pfValue:a.value:null;a&&a.bypass?(a.value=r,null!=a.pfValue&&(a.pfValue=r),a.strValue=u?"rgb("+r.join(",")+")":s?r.join(" "):""+r,this.updateStyleHints(i)):this.applyBypass(i,n,r),this.checkTriggers(i,n,f,r)}},removeAllBypasses:function(t,n){return this.removeBypasses(t,this.propertyNames,n)},removeBypasses:function(t,n,r){for(var e=0;e<t.length;e++){for(var i=t[e],a={},o=0;o<n.length;o++){var u=n[o],s=this.properties[u],f=i.pstyle(s.name);if(f&&f.bypass){var c=this.parse(u,"",!0),l=a[s.name]={prev:f};this.applyParsedProperty(i,c),l.next=i.pstyle(s.name)}}this.updateStyleHints(i),r&&this.updateTransitions(i,a,true)}}},Ks={getEmSizeInPixels:function(){var t=this.containerCss("font-size");return null!=t?parseFloat(t):1},containerCss:function(t){var n=this._private.cy,r=n.container(),e=n.window();if(e&&r&&e.getComputedStyle)return e.getComputedStyle(r).getPropertyValue(t)}},Gs={getRenderedStyle:function(t,n){return n?this.getStylePropertyValue(t,n,!0):this.getRawStyle(t,!0)},getRawStyle:function(t,n){var r=this;if(t=t[0]){for(var e={},i=0;i<r.properties.length;i++){var a=r.properties[i],o=r.getStylePropertyValue(t,a.name,n);null!=o&&(e[a.name]=o,e[Dt(a.name)]=o)}return e}},getIndexedStyle:function(t,n,r,e){var i=t.pstyle(n)[r][e];return null!=i?i:t.cy().style().getDefaultProperty(n)[r][0]},getStylePropertyValue:function(t,n,r){if(t=t[0]){var e=this.properties[n];e.alias&&(e=e.pointsTo);var i=e.type,a=t.pstyle(e.name);if(a){var o=a.value,u=a.units,s=a.strValue;if(r&&i.number&&null!=o&&St(o)){var f=t.cy().zoom(),c=function(t){return t*f},l=function(t,n){return c(t)+n},h=kt(o),v=h?u.every((function(t){return null!=t})):null!=u;return v?h?o.map((function(t,n){return l(t,u[n])})).join(" "):l(o,u):h?o.map((function(t){return xt(t)?t:""+c(t)})).join(" "):""+c(o)}if(null!=s)return s}return null}},getAnimationStartStyle:function(t,n){for(var r={},e=0;e<n.length;e++){var i=n[e].name,a=t.pstyle(i);void 0!==a&&(a=Et(a)?this.parse(i,a.strValue):this.parse(i,a)),a&&(r[i]=a)}return r},getPropsList:function(t){var n=[],r=t,e=this.properties;if(r)for(var i=Object.keys(r),a=0;a<i.length;a++){var o=i[a],u=r[o],s=e[o]||e[Ft(o)],f=this.parse(s.name,u);f&&n.push(f)}return n},getNonDefaultPropertiesHash:function(t,n,r){var e,i,a,o,u,s,f=r.slice();for(u=0;u<n.length;u++)if(e=n[u],null!=(i=t.pstyle(e,!1)))if(null!=i.pfValue)f[0]=Fn(o,f[0]),f[1]=Dn(o,f[1]);else for(a=i.strValue,s=0;s<a.length;s++)o=a.charCodeAt(s),f[0]=Fn(o,f[0]),f[1]=Dn(o,f[1]);return f}};Gs.getPropertiesHash=Gs.getNonDefaultPropertiesHash;var Ys={appendFromJson:function(t){for(var n=this,r=0;r<t.length;r++){var e=t[r],i=e.selector,a=e.style||e.css,o=Object.keys(a);n.selector(i);for(var u=0;u<o.length;u++){var s=o[u],f=a[s];n.css(s,f)}}return n},fromJson:function(t){var n=this;return n.resetToDefault(),n.appendFromJson(t),n},json:function(){for(var t=[],n=this.defaultLength;n<this.length;n++){for(var r=this[n],e=r.selector,i=r.properties,a={},o=0;o<i.length;o++){var u=i[o];a[u.name]=u.strValue}t.push({selector:e?e.toString():"core",style:a})}return t}},Xs={appendFromString:function(t){var n,r,e,i=this,a=""+t;function o(){a=a.length>n.length?a.substr(n.length):""}function u(){r=r.length>e.length?r.substr(e.length):""}for(a=a.replace(/[/][*](\s|.)+?[*][/]/g,"");;){if(a.match(/^\s*$/))break;var s=a.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!s){Qn("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+a);break}n=s[0];var f=s[1];if("core"!==f)if(new Vo(f).invalid){Qn("Skipping parsing of block: Invalid selector found in string stylesheet: "+f),o();continue}var c=s[2],l=!1;r=c;for(var h=[];;){if(r.match(/^\s*$/))break;var v=r.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!v){Qn("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+c),l=!0;break}e=v[0];var d=v[1],g=v[2];if(this.properties[d])i.parse(d,g)?(h.push({name:d,val:g}),u()):(Qn("Skipping property: Invalid property definition in: "+e),u());else Qn("Skipping property: Invalid property name in: "+e),u()}if(l){o();break}i.selector(f);for(var p=0;p<h.length;p++){var y=h[p];i.css(y.name,y.val)}o()}return i},fromString:function(t){var n=this;return n.resetToDefault(),n.appendFromString(t),n}},Qs={};!function(){var t=Lt,n=_t,r=Vt,e=function(t){return"^"+t+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},i=function(e){var i=t+"|\\w+|"+n+"|"+r+"|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+e+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+i+")\\s*\\,\\s*("+i+")\\)$"},a=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];Qs.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:e("data")},layoutData:{mapping:!0,regex:e("layoutData")},scratch:{mapping:!0,regex:e("scratch")},mapData:{mapping:!0,regex:i("mapData")},mapLayoutData:{mapping:!0,regex:i("mapLayoutData")},mapScratch:{mapping:!0,regex:i("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:a,singleRegexMatchValue:!0},urls:{regexes:a,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(t,n){switch(t.length){case 2:return"deg"!==n[0]&&"rad"!==n[0]&&"deg"!==n[1]&&"rad"!==n[1];case 1:return xt(t[0])||"deg"===n[0]||"rad"===n[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(t){var n=t.length;return 1===n||2===n||4===n}}};var o={zeroNonZero:function(t,n){return(null==t||null==n)&&t!==n||(0==t&&0!=n||0!=t&&0==n)},any:function(t,n){return t!=n},emptyNonEmpty:function(t,n){var r=Pt(t),e=Pt(n);return r&&!e||!r&&e}},u=Qs.types,s=[{name:"label",type:u.text,triggersBounds:o.any,triggersZOrder:o.emptyNonEmpty},{name:"text-rotation",type:u.textRotation,triggersBounds:o.any},{name:"text-margin-x",type:u.bidirectionalSize,triggersBounds:o.any},{name:"text-margin-y",type:u.bidirectionalSize,triggersBounds:o.any}],f=[{name:"source-label",type:u.text,triggersBounds:o.any},{name:"source-text-rotation",type:u.textRotation,triggersBounds:o.any},{name:"source-text-margin-x",type:u.bidirectionalSize,triggersBounds:o.any},{name:"source-text-margin-y",type:u.bidirectionalSize,triggersBounds:o.any},{name:"source-text-offset",type:u.size,triggersBounds:o.any}],c=[{name:"target-label",type:u.text,triggersBounds:o.any},{name:"target-text-rotation",type:u.textRotation,triggersBounds:o.any},{name:"target-text-margin-x",type:u.bidirectionalSize,triggersBounds:o.any},{name:"target-text-margin-y",type:u.bidirectionalSize,triggersBounds:o.any},{name:"target-text-offset",type:u.size,triggersBounds:o.any}],l=[{name:"font-family",type:u.fontFamily,triggersBounds:o.any},{name:"font-style",type:u.fontStyle,triggersBounds:o.any},{name:"font-weight",type:u.fontWeight,triggersBounds:o.any},{name:"font-size",type:u.size,triggersBounds:o.any},{name:"text-transform",type:u.textTransform,triggersBounds:o.any},{name:"text-wrap",type:u.textWrap,triggersBounds:o.any},{name:"text-overflow-wrap",type:u.textOverflowWrap,triggersBounds:o.any},{name:"text-max-width",type:u.size,triggersBounds:o.any},{name:"text-outline-width",type:u.size,triggersBounds:o.any},{name:"line-height",type:u.positiveNumber,triggersBounds:o.any}],h=[{name:"text-valign",type:u.valign,triggersBounds:o.any},{name:"text-halign",type:u.halign,triggersBounds:o.any},{name:"color",type:u.color},{name:"text-outline-color",type:u.color},{name:"text-outline-opacity",type:u.zeroOneNumber},{name:"text-background-color",type:u.color},{name:"text-background-opacity",type:u.zeroOneNumber},{name:"text-background-padding",type:u.size,triggersBounds:o.any},{name:"text-border-opacity",type:u.zeroOneNumber},{name:"text-border-color",type:u.color},{name:"text-border-width",type:u.size,triggersBounds:o.any},{name:"text-border-style",type:u.borderStyle,triggersBounds:o.any},{name:"text-background-shape",type:u.textBackgroundShape,triggersBounds:o.any},{name:"text-justification",type:u.justification}],v=[{name:"events",type:u.bool,triggersZOrder:o.any},{name:"text-events",type:u.bool,triggersZOrder:o.any}],d=[{name:"display",type:u.display,triggersZOrder:o.any,triggersBounds:o.any,triggersBoundsOfConnectedEdges:!0},{name:"visibility",type:u.visibility,triggersZOrder:o.any},{name:"opacity",type:u.zeroOneNumber,triggersZOrder:o.zeroNonZero},{name:"text-opacity",type:u.zeroOneNumber},{name:"min-zoomed-font-size",type:u.size},{name:"z-compound-depth",type:u.zCompoundDepth,triggersZOrder:o.any},{name:"z-index-compare",type:u.zIndexCompare,triggersZOrder:o.any},{name:"z-index",type:u.number,triggersZOrder:o.any}],g=[{name:"overlay-padding",type:u.size,triggersBounds:o.any},{name:"overlay-color",type:u.color},{name:"overlay-opacity",type:u.zeroOneNumber,triggersBounds:o.zeroNonZero},{name:"overlay-shape",type:u.overlayShape,triggersBounds:o.any},{name:"overlay-corner-radius",type:u.cornerRadius}],p=[{name:"underlay-padding",type:u.size,triggersBounds:o.any},{name:"underlay-color",type:u.color},{name:"underlay-opacity",type:u.zeroOneNumber,triggersBounds:o.zeroNonZero},{name:"underlay-shape",type:u.overlayShape,triggersBounds:o.any},{name:"underlay-corner-radius",type:u.cornerRadius}],y=[{name:"transition-property",type:u.propList},{name:"transition-duration",type:u.time},{name:"transition-delay",type:u.time},{name:"transition-timing-function",type:u.easing}],m=function(t,n){return"label"===n.value?-t.poolIndex():n.pfValue},b=[{name:"height",type:u.nodeSize,triggersBounds:o.any,hashOverride:m},{name:"width",type:u.nodeSize,triggersBounds:o.any,hashOverride:m},{name:"shape",type:u.nodeShape,triggersBounds:o.any},{name:"shape-polygon-points",type:u.polygonPointList,triggersBounds:o.any},{name:"corner-radius",type:u.cornerRadius},{name:"background-color",type:u.color},{name:"background-fill",type:u.fill},{name:"background-opacity",type:u.zeroOneNumber},{name:"background-blacken",type:u.nOneOneNumber},{name:"background-gradient-stop-colors",type:u.colors},{name:"background-gradient-stop-positions",type:u.percentages},{name:"background-gradient-direction",type:u.gradientDirection},{name:"padding",type:u.sizeMaybePercent,triggersBounds:o.any},{name:"padding-relative-to",type:u.paddingRelativeTo,triggersBounds:o.any},{name:"bounds-expansion",type:u.boundsExpansion,triggersBounds:o.any}],w=[{name:"border-color",type:u.color},{name:"border-opacity",type:u.zeroOneNumber},{name:"border-width",type:u.size,triggersBounds:o.any},{name:"border-style",type:u.borderStyle},{name:"border-cap",type:u.lineCap},{name:"border-join",type:u.lineJoin},{name:"border-dash-pattern",type:u.numbers},{name:"border-dash-offset",type:u.number},{name:"border-position",type:u.linePosition}],x=[{name:"outline-color",type:u.color},{name:"outline-opacity",type:u.zeroOneNumber},{name:"outline-width",type:u.size,triggersBounds:o.any},{name:"outline-style",type:u.borderStyle},{name:"outline-offset",type:u.size,triggersBounds:o.any}],M=[{name:"background-image",type:u.urls},{name:"background-image-crossorigin",type:u.bgCrossOrigin},{name:"background-image-opacity",type:u.zeroOneNumbers},{name:"background-image-containment",type:u.bgContainment},{name:"background-image-smoothing",type:u.bools},{name:"background-position-x",type:u.bgPos},{name:"background-position-y",type:u.bgPos},{name:"background-width-relative-to",type:u.bgRelativeTo},{name:"background-height-relative-to",type:u.bgRelativeTo},{name:"background-repeat",type:u.bgRepeat},{name:"background-fit",type:u.bgFit},{name:"background-clip",type:u.bgClip},{name:"background-width",type:u.bgWH},{name:"background-height",type:u.bgWH},{name:"background-offset-x",type:u.bgPos},{name:"background-offset-y",type:u.bgPos}],k=[{name:"position",type:u.position,triggersBounds:o.any},{name:"compound-sizing-wrt-labels",type:u.compoundIncludeLabels,triggersBounds:o.any},{name:"min-width",type:u.size,triggersBounds:o.any},{name:"min-width-bias-left",type:u.sizeMaybePercent,triggersBounds:o.any},{name:"min-width-bias-right",type:u.sizeMaybePercent,triggersBounds:o.any},{name:"min-height",type:u.size,triggersBounds:o.any},{name:"min-height-bias-top",type:u.sizeMaybePercent,triggersBounds:o.any},{name:"min-height-bias-bottom",type:u.sizeMaybePercent,triggersBounds:o.any}],E=[{name:"line-style",type:u.lineStyle},{name:"line-color",type:u.color},{name:"line-fill",type:u.fill},{name:"line-cap",type:u.lineCap},{name:"line-opacity",type:u.zeroOneNumber},{name:"line-dash-pattern",type:u.numbers},{name:"line-dash-offset",type:u.number},{name:"line-outline-width",type:u.size},{name:"line-outline-color",type:u.color},{name:"line-gradient-stop-colors",type:u.colors},{name:"line-gradient-stop-positions",type:u.percentages},{name:"curve-style",type:u.curveStyle,triggersBounds:o.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:u.zeroOneNumber,triggersBounds:o.any},{name:"source-endpoint",type:u.edgeEndpoint,triggersBounds:o.any},{name:"target-endpoint",type:u.edgeEndpoint,triggersBounds:o.any},{name:"control-point-step-size",type:u.size,triggersBounds:o.any},{name:"control-point-distances",type:u.bidirectionalSizes,triggersBounds:o.any},{name:"control-point-weights",type:u.numbers,triggersBounds:o.any},{name:"segment-distances",type:u.bidirectionalSizes,triggersBounds:o.any},{name:"segment-weights",type:u.numbers,triggersBounds:o.any},{name:"segment-radii",type:u.numbers,triggersBounds:o.any},{name:"radius-type",type:u.radiusType,triggersBounds:o.any},{name:"taxi-turn",type:u.bidirectionalSizeMaybePercent,triggersBounds:o.any},{name:"taxi-turn-min-distance",type:u.size,triggersBounds:o.any},{name:"taxi-direction",type:u.axisDirection,triggersBounds:o.any},{name:"taxi-radius",type:u.number,triggersBounds:o.any},{name:"edge-distances",type:u.edgeDistances,triggersBounds:o.any},{name:"arrow-scale",type:u.positiveNumber,triggersBounds:o.any},{name:"loop-direction",type:u.angle,triggersBounds:o.any},{name:"loop-sweep",type:u.angle,triggersBounds:o.any},{name:"source-distance-from-node",type:u.size,triggersBounds:o.any},{name:"target-distance-from-node",type:u.size,triggersBounds:o.any}],S=[{name:"ghost",type:u.bool,triggersBounds:o.any},{name:"ghost-offset-x",type:u.bidirectionalSize,triggersBounds:o.any},{name:"ghost-offset-y",type:u.bidirectionalSize,triggersBounds:o.any},{name:"ghost-opacity",type:u.zeroOneNumber}],A=[{name:"selection-box-color",type:u.color},{name:"selection-box-opacity",type:u.zeroOneNumber},{name:"selection-box-border-color",type:u.color},{name:"selection-box-border-width",type:u.size},{name:"active-bg-color",type:u.color},{name:"active-bg-opacity",type:u.zeroOneNumber},{name:"active-bg-size",type:u.size},{name:"outside-texture-bg-color",type:u.color},{name:"outside-texture-bg-opacity",type:u.zeroOneNumber}],z=[];Qs.pieBackgroundN=16,z.push({name:"pie-size",type:u.sizeMaybePercent});for(var B=1;B<=Qs.pieBackgroundN;B++)z.push({name:"pie-"+B+"-background-color",type:u.color}),z.push({name:"pie-"+B+"-background-size",type:u.percent}),z.push({name:"pie-"+B+"-background-opacity",type:u.zeroOneNumber});var C=[],T=Qs.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:u.arrowShape,triggersBounds:o.any},{name:"arrow-color",type:u.color},{name:"arrow-fill",type:u.arrowFill},{name:"arrow-width",type:u.arrowWidth}].forEach((function(t){T.forEach((function(n){var r=n+"-"+t.name,e=t.type,i=t.triggersBounds;C.push({name:r,type:e,triggersBounds:i})}))}),{});var O=Qs.properties=[].concat(v,y,d,g,p,S,h,l,s,f,c,b,w,x,M,z,k,E,C,A),P=Qs.propertyGroups={behavior:v,transition:y,visibility:d,overlay:g,underlay:p,ghost:S,commonLabel:h,labelDimensions:l,mainLabel:s,sourceLabel:f,targetLabel:c,nodeBody:b,nodeBorder:w,nodeOutline:x,backgroundImage:M,pie:z,compound:k,edgeLine:E,edgeArrow:C,core:A},N=Qs.propertyGroupNames={};(Qs.propertyGroupKeys=Object.keys(P)).forEach((function(t){N[t]=P[t].map((function(t){return t.name})),P[t].forEach((function(n){return n.groupKey=t}))}));var j=Qs.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Qs.propertyNames=O.map((function(t){return t.name}));for(var F=0;F<O.length;F++){var D=O[F];O[D.name]=D}for(var I=0;I<j.length;I++){var $=j[I],L=O[$.pointsTo],R={name:$.name,alias:!0,pointsTo:L};O.push(R),O[$.name]=R}}(),Qs.getDefaultProperty=function(t){return this.getDefaultProperties()[t]},Qs.getDefaultProperties=function(){var t=this._private;if(null!=t.defaultProperties)return t.defaultProperties;for(var n=Wt({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce((function(t,n){for(var r=1;r<=Qs.pieBackgroundN;r++){var e=n.name.replace("{{i}}",r),i=n.value;t[e]=i}return t}),{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce((function(t,n){return Qs.arrowPrefixes.forEach((function(r){var e=r+"-"+n.name,i=n.value;t[e]=i})),t}),{})),r={},e=0;e<this.properties.length;e++){var i=this.properties[e];if(!i.pointsTo){var a=i.name,o=n[a],u=this.parse(a,o);r[a]=u}}return t.defaultProperties=r,t.defaultProperties},Qs.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Js={parse:function(t,n,r,e){var i=this;if(Mt(n))return i.parseImplWarn(t,n,r,e);var a,o=Rn(t,""+n,r?"t":"f","mapping"===e||!0===e||!1===e||null==e?"dontcare":e),u=i.propCache=i.propCache||[];return(a=u[o])||(a=u[o]=i.parseImplWarn(t,n,r,e)),(r||"mapping"===e)&&(a=Jn(a))&&(a.value=Jn(a.value)),a},parseImplWarn:function(t,n,r,e){var i=this.parseImpl(t,n,r,e);return i||null==n||Qn("The style property `".concat(t,": ").concat(n,"` is invalid")),!i||"width"!==i.name&&"height"!==i.name||"label"!==n||Qn("The style value of `label` is deprecated for `"+i.name+"`"),i}};Js.parseImpl=function(t,n,r,e){var i=this;t=Ft(t);var a=i.properties[t],o=n,u=i.types;if(!a)return null;if(void 0===n)return null;a.alias&&(a=a.pointsTo,t=a.name);var s=xt(n);s&&(n=n.trim());var f,c,l=a.type;if(!l)return null;if(r&&(""===n||null===n))return{name:t,value:n,bypass:!0,deleteBypass:!0};if(Mt(n))return{name:t,value:n,strValue:"fn",mapped:u.fn,bypass:r};if(!s||e||n.length<7||"a"!==n[1]);else{if(n.length>=7&&"d"===n[0]&&(f=new RegExp(u.data.regex).exec(n))){if(r)return!1;var h=u.data;return{name:t,value:f,strValue:""+n,mapped:h,field:f[1],bypass:r}}if(n.length>=10&&"m"===n[0]&&(c=new RegExp(u.mapData.regex).exec(n))){if(r)return!1;if(l.multiple)return!1;var v=u.mapData;if(!l.color&&!l.number)return!1;var d=this.parse(t,c[4]);if(!d||d.mapped)return!1;var g=this.parse(t,c[5]);if(!g||g.mapped)return!1;if(d.pfValue===g.pfValue||d.strValue===g.strValue)return Qn("`"+t+": "+n+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+d.strValue+"`"),this.parse(t,d.strValue);if(l.color){var p=d.value,y=g.value;if(!(p[0]!==y[0]||p[1]!==y[1]||p[2]!==y[2]||p[3]!==y[3]&&(null!=p[3]&&1!==p[3]||null!=y[3]&&1!==y[3])))return!1}return{name:t,value:c,strValue:""+n,mapped:v,field:c[1],fieldMin:parseFloat(c[2]),fieldMax:parseFloat(c[3]),valueMin:d.value,valueMax:g.value,bypass:r}}}if(l.multiple&&"multiple"!==e){var m;if(m=s?n.split(/\s+/):kt(n)?n:[n],l.evenMultiple&&m.length%2!=0)return null;for(var b=[],w=[],x=[],M="",k=!1,E=0;E<m.length;E++){var S=i.parse(t,m[E],r,"multiple");k=k||xt(S.value),b.push(S.value),x.push(null!=S.pfValue?S.pfValue:S.value),w.push(S.units),M+=(E>0?" ":"")+S.strValue}return l.validate&&!l.validate(b,w)?null:l.singleEnum&&k?1===b.length&&xt(b[0])?{name:t,value:b[0],strValue:b[0],bypass:r}:null:{name:t,value:b,pfValue:x,strValue:M,bypass:r,units:w}}var A,z,B=function(){for(var e=0;e<l.enums.length;e++){if(l.enums[e]===n)return{name:t,value:n,strValue:""+n,bypass:r}}return null};if(l.number){var C,T="px";if(l.units&&(C=l.units),l.implicitUnits&&(T=l.implicitUnits),!l.unitless)if(s){var O="px|em"+(l.allowPercent?"|\\%":"");C&&(O=C);var P=n.match("^("+Lt+")("+O+")?$");P&&(n=P[1],C=P[2]||T)}else C&&!l.implicitUnits||(C=T);if(n=parseFloat(n),isNaN(n)&&void 0===l.enums)return null;if(isNaN(n)&&void 0!==l.enums)return n=o,B();if(l.integer&&(!St(z=n)||Math.floor(z)!==z))return null;if(void 0!==l.min&&(n<l.min||l.strictMin&&n===l.min)||void 0!==l.max&&(n>l.max||l.strictMax&&n===l.max))return null;var N={name:t,value:n,strValue:""+n+(C||""),units:C,bypass:r};return l.unitless||"px"!==C&&"em"!==C?N.pfValue=n:N.pfValue="px"!==C&&C?this.getEmSizeInPixels()*n:n,"ms"!==C&&"s"!==C||(N.pfValue="ms"===C?n:1e3*n),"deg"!==C&&"rad"!==C||(N.pfValue="rad"===C?n:(A=n,Math.PI*A/180)),"%"===C&&(N.pfValue=n/100),N}if(l.propList){var j=[],F=""+n;if("none"===F);else{for(var D=F.split(/\s*,\s*|\s+/),I=0;I<D.length;I++){var $=D[I].trim();i.properties[$]?j.push($):Qn("`"+$+"` is not a valid property name")}if(0===j.length)return null}return{name:t,value:j,strValue:0===j.length?"none":j.join(" "),bypass:r}}if(l.color){var L=Zt(n);return L?{name:t,value:L,pfValue:L,strValue:"rgb("+L[0]+","+L[1]+","+L[2]+")",bypass:r}:null}if(l.regex||l.regexes){if(l.enums){var R=B();if(R)return R}for(var _=l.regexes?l.regexes:[l.regex],q=0;q<_.length;q++){var V=new RegExp(_[q]).exec(n);if(V)return{name:t,value:l.singleRegexMatchValue?V[1]:V,strValue:""+n,bypass:r}}return null}return l.string?{name:t,value:""+n,strValue:""+n,bypass:r}:l.enums?B():null};var tf=function t(n){if(!(this instanceof t))return new t(n);Tt(n)?(this._private={cy:n,coreStyle:{}},this.length=0,this.resetToDefault()):Yn("A style must have a core reference")},nf=tf.prototype;nf.instanceString=function(){return"style"},nf.clear=function(){for(var t=this._private,n=t.cy.elements(),r=0;r<this.length;r++)this[r]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(n,!0),n.forEach((function(t){var n=t[0]._private;n.styleDirty=!0,n.appliedInitStyle=!1})),this},nf.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},nf.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)},nf.selector=function(t){var n="core"===t?null:new Vo(t),r=this.length++;return this[r]={selector:n,properties:[],mappedProperties:[],index:r},this},nf.css=function(){var t=arguments;if(1===t.length)for(var n=t[0],r=0;r<this.properties.length;r++){var e=this.properties[r],i=n[e.name];void 0===i&&(i=n[Dt(e.name)]),void 0!==i&&this.cssRule(e.name,i)}else 2===t.length&&this.cssRule(t[0],t[1]);return this},nf.style=nf.css,nf.cssRule=function(t,n){var r=this.parse(t,n);if(r){var e=this.length-1;this[e].properties.push(r),this[e].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.mapped&&this[e].mappedProperties.push(r),!this[e].selector&&(this._private.coreStyle[r.name]=r)}return this},nf.append=function(t){return Ot(t)?t.appendToStyle(this):kt(t)?this.appendFromJson(t):xt(t)&&this.appendFromString(t),this},tf.fromJson=function(t,n){var r=new tf(t);return r.fromJson(n),r},tf.fromString=function(t,n){return new tf(t).fromString(n)},[Ws,Hs,Ks,Gs,Ys,Xs,Qs,Js].forEach((function(t){Wt(nf,t)})),tf.types=nf.types,tf.properties=nf.properties,tf.propertyGroups=nf.propertyGroups,tf.propertyGroupNames=nf.propertyGroupNames,tf.propertyGroupKeys=nf.propertyGroupKeys;var rf={style:function(t){t&&this.setStyle(t).update();return this._private.style},setStyle:function(t){var n=this._private;return Ot(t)?n.style=t.generateStyle(this):kt(t)?n.style=tf.fromJson(this,t):xt(t)?n.style=tf.fromString(this,t):n.style=tf(this),n.style},updateStyle:function(){this.mutableElements().updateStyle()}},ef={autolock:function(t){return void 0===t?this._private.autolock:(this._private.autolock=!!t,this)},autoungrabify:function(t){return void 0===t?this._private.autoungrabify:(this._private.autoungrabify=!!t,this)},autounselectify:function(t){return void 0===t?this._private.autounselectify:(this._private.autounselectify=!!t,this)},selectionType:function(t){var n=this._private;return null==n.selectionType&&(n.selectionType="single"),void 0===t?n.selectionType:("additive"!==t&&"single"!==t||(n.selectionType=t),this)},panningEnabled:function(t){return void 0===t?this._private.panningEnabled:(this._private.panningEnabled=!!t,this)},userPanningEnabled:function(t){return void 0===t?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!t,this)},zoomingEnabled:function(t){return void 0===t?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!t,this)},userZoomingEnabled:function(t){return void 0===t?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!t,this)},boxSelectionEnabled:function(t){return void 0===t?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!t,this)},pan:function(){var t,n,r,e,i,a=arguments,o=this._private.pan;switch(a.length){case 0:return o;case 1:if(xt(a[0]))return o[t=a[0]];if(Et(a[0])){if(!this._private.panningEnabled)return this;e=(r=a[0]).x,i=r.y,St(e)&&(o.x=e),St(i)&&(o.y=i),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=a[1],"x"!==(t=a[0])&&"y"!==t||!St(n)||(o[t]=n),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(t,n){var r,e,i,a,o,u=arguments,s=this._private.pan;if(!this._private.panningEnabled)return this;switch(u.length){case 1:Et(t)&&(a=(i=u[0]).x,o=i.y,St(a)&&(s.x+=a),St(o)&&(s.y+=o),this.emit("pan viewport"));break;case 2:e=n,"x"!==(r=t)&&"y"!==r||!St(e)||(s[r]+=e),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(t,n){var r=this.getFitViewport(t,n);if(r){var e=this._private;e.zoom=r.zoom,e.pan=r.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(t,n){if(St(t)&&void 0===n&&(n=t,t=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var r,e;if(xt(t)){var i=t;t=this.$(i)}else if(Et(e=t)&&St(e.x1)&&St(e.x2)&&St(e.y1)&&St(e.y2)){var a=t;(r={x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2}).w=r.x2-r.x1,r.h=r.y2-r.y1}else zt(t)||(t=this.mutableElements());if(!zt(t)||!t.empty()){r=r||t.boundingBox();var o,u=this.width(),s=this.height();if(n=St(n)?n:0,!isNaN(u)&&!isNaN(s)&&u>0&&s>0&&!isNaN(r.w)&&!isNaN(r.h)&&r.w>0&&r.h>0)return{zoom:o=(o=(o=Math.min((u-2*n)/r.w,(s-2*n)/r.h))>this._private.maxZoom?this._private.maxZoom:o)<this._private.minZoom?this._private.minZoom:o,pan:{x:(u-o*(r.x1+r.x2))/2,y:(s-o*(r.y1+r.y2))/2}}}}},zoomRange:function(t,n){var r=this._private;if(null==n){var e=t;t=e.min,n=e.max}return St(t)&&St(n)&&t<=n?(r.minZoom=t,r.maxZoom=n):St(t)&&void 0===n&&t<=r.maxZoom?r.minZoom=t:St(n)&&void 0===t&&n>=r.minZoom&&(r.maxZoom=n),this},minZoom:function(t){return void 0===t?this._private.minZoom:this.zoomRange({min:t})},maxZoom:function(t){return void 0===t?this._private.maxZoom:this.zoomRange({max:t})},getZoomedViewport:function(t){var n,r,e=this._private,i=e.pan,a=e.zoom,o=!1;if(e.zoomingEnabled||(o=!0),St(t)?r=t:Et(t)&&(r=t.level,null!=t.position?n=Cr(t.position,a,i):null!=t.renderedPosition&&(n=t.renderedPosition),null==n||e.panningEnabled||(o=!0)),r=(r=r>e.maxZoom?e.maxZoom:r)<e.minZoom?e.minZoom:r,o||!St(r)||r===a||null!=n&&(!St(n.x)||!St(n.y)))return null;if(null!=n){var u=i,s=a,f=r;return{zoomed:!0,panned:!0,zoom:f,pan:{x:-f/s*(n.x-u.x)+n.x,y:-f/s*(n.y-u.y)+n.y}}}return{zoomed:!0,panned:!1,zoom:r,pan:i}},zoom:function(t){if(void 0===t)return this._private.zoom;var n=this.getZoomedViewport(t),r=this._private;return null!=n&&n.zoomed?(r.zoom=n.zoom,n.panned&&(r.pan.x=n.pan.x,r.pan.y=n.pan.y),this.emit("zoom"+(n.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(t){var n=this._private,r=!0,e=!0,i=[],a=!1,o=!1;if(!t)return this;if(St(t.zoom)||(r=!1),Et(t.pan)||(e=!1),!r&&!e)return this;if(r){var u=t.zoom;u<n.minZoom||u>n.maxZoom||!n.zoomingEnabled?a=!0:(n.zoom=u,i.push("zoom"))}if(e&&(!a||!t.cancelOnFailedZoom)&&n.panningEnabled){var s=t.pan;St(s.x)&&(n.pan.x=s.x,o=!1),St(s.y)&&(n.pan.y=s.y,o=!1),o||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(t){var n=this.getCenterPan(t);return n&&(this._private.pan=n,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(t,n){if(this._private.panningEnabled){if(xt(t)){var r=t;t=this.mutableElements().filter(r)}else zt(t)||(t=this.mutableElements());if(0!==t.length){var e=t.boundingBox(),i=this.width(),a=this.height();return{x:(i-(n=void 0===n?this._private.zoom:n)*(e.x1+e.x2))/2,y:(a-n*(e.y1+e.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var t,n,r=this._private,e=r.container,i=this;return r.sizeCache=r.sizeCache||(e?(t=i.window().getComputedStyle(e),n=function(n){return parseFloat(t.getPropertyValue(n))},{width:e.clientWidth-n("padding-left")-n("padding-right"),height:e.clientHeight-n("padding-top")-n("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var t=this._private.pan,n=this._private.zoom,r=this.renderedExtent(),e={x1:(r.x1-t.x)/n,x2:(r.x2-t.x)/n,y1:(r.y1-t.y)/n,y2:(r.y2-t.y)/n};return e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},renderedExtent:function(){var t=this.width(),n=this.height();return{x1:0,y1:0,x2:t,y2:n,w:t,h:n}},multiClickDebounceTime:function(t){return t?(this._private.multiClickDebounceTime=t,this):this._private.multiClickDebounceTime}};ef.centre=ef.center,ef.autolockNodes=ef.autolock,ef.autoungrabifyNodes=ef.autoungrabify;var af={data:io.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:io.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:io.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:io.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};af.attr=af.data,af.removeAttr=af.removeData;var of=function(t){var n=this,r=(t=Wt({},t)).container;r&&!At(r)&&At(r[0])&&(r=r[0]);var e=r?r._cyreg:null;(e=e||{})&&e.cy&&(e.cy.destroy(),e={});var i=e.readies=e.readies||[];r&&(r._cyreg=e),e.cy=n;var a=void 0!==dt&&void 0!==r&&!t.headless,o=t;o.layout=Wt({name:a?"grid":"null"},o.layout),o.renderer=Wt({name:a?"canvas":"null"},o.renderer);var u=function(t,n,r){return void 0!==n?n:void 0!==r?r:t},s=this._private={container:r,ready:!1,options:o,elements:new xs(this),listeners:[],aniEles:new xs(this),data:o.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,o.zoomingEnabled),userZoomingEnabled:u(!0,o.userZoomingEnabled),panningEnabled:u(!0,o.panningEnabled),userPanningEnabled:u(!0,o.userPanningEnabled),boxSelectionEnabled:u(!0,o.boxSelectionEnabled),autolock:u(!1,o.autolock,o.autolockNodes),autoungrabify:u(!1,o.autoungrabify,o.autoungrabifyNodes),autounselectify:u(!1,o.autounselectify),styleEnabled:void 0===o.styleEnabled?a:o.styleEnabled,zoom:St(o.zoom)?o.zoom:1,pan:{x:Et(o.pan)&&St(o.pan.x)?o.pan.x:0,y:Et(o.pan)&&St(o.pan.y)?o.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,o.multiClickDebounceTime)};this.createEmitter(),this.selectionType(o.selectionType),this.zoomRange({min:o.minZoom,max:o.maxZoom});s.styleEnabled&&n.setStyle([]);var f=Wt({},o,o.renderer);n.initRenderer(f);!function(t,n){if(t.some(Nt))return Ti.all(t).then(n);n(t)}([o.style,o.elements],(function(t){var r=t[0],a=t[1];s.styleEnabled&&n.style().append(r),function(t,r,e){n.notifications(!1);var i=n.mutableElements();i.length>0&&i.remove(),null!=t&&(Et(t)||kt(t))&&n.add(t),n.one("layoutready",(function(t){n.notifications(!0),n.emit(t),n.one("load",r),n.emitAndNotify("load")})).one("layoutstop",(function(){n.one("done",e),n.emit("done")}));var a=Wt({},n._private.options.layout);a.eles=n.elements(),n.layout(a).run()}(a,(function(){n.startAnimationLoop(),s.ready=!0,Mt(o.ready)&&n.on("ready",o.ready);for(var t=0;t<i.length;t++){var r=i[t];n.on("ready",r)}e&&(e.readies=[]),n.emit("ready")}),o.done)}))},uf=of.prototype;Wt(uf,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(t){return this.isReady()?this.emitter().emit("ready",[],t):this.on("ready",t),this},destroy:function(){var t=this;if(!t.destroyed())return t.stopAnimationLoop(),t.destroyRenderer(),this.emit("destroy"),t._private.destroyed=!0,t},hasElementWithId:function(t){return this._private.elements.hasElementWithId(t)},getElementById:function(t){return this._private.elements.getElementById(t)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(t){return this._private.elements.merge(t),this},removeFromPool:function(t){return this._private.elements.unmerge(t),this},container:function(){return this._private.container||null},window:function(){if(null==this._private.container)return dt;var t=this._private.container.ownerDocument;return void 0===t||null==t?dt:t.defaultView||dt},mount:function(t){if(null!=t){var n=this,r=n._private,e=r.options;return!At(t)&&At(t[0])&&(t=t[0]),n.stopAnimationLoop(),n.destroyRenderer(),r.container=t,r.styleEnabled=!0,n.invalidateSize(),n.initRenderer(Wt({},e,e.renderer,{name:"null"===e.renderer.name?"canvas":e.renderer.name})),n.startAnimationLoop(),n.style(e.style),n.emit("mount"),n}},unmount:function(){var t=this;return t.stopAnimationLoop(),t.destroyRenderer(),t.initRenderer({name:"null"}),t.emit("unmount"),t},options:function(){return Jn(this._private.options)},json:function(t){var n=this,r=n._private,e=n.mutableElements();if(Et(t)){if(n.startBatch(),t.elements){var i={},a=function(t,r){for(var e=[],a=[],o=0;o<t.length;o++){var u=t[o];if(u.data.id){var s=""+u.data.id,f=n.getElementById(s);i[s]=!0,0!==f.length?a.push({ele:f,json:u}):r?(u.group=r,e.push(u)):e.push(u)}else Qn("cy.json() cannot handle elements without an ID attribute")}n.add(e);for(var c=0;c<a.length;c++){var l=a[c],h=l.ele,v=l.json;h.json(v)}};if(kt(t.elements))a(t.elements);else for(var o=["nodes","edges"],u=0;u<o.length;u++){var s=o[u],f=t.elements[s];kt(f)&&a(f,s)}var c=n.collection();e.filter((function(t){return!i[t.id()]})).forEach((function(t){t.isParent()?c.merge(t):t.remove()})),c.forEach((function(t){return t.children().move({parent:null})})),c.forEach((function(t){return function(t){return n.getElementById(t.id())}(t).remove()}))}t.style&&n.style(t.style),null!=t.zoom&&t.zoom!==r.zoom&&n.zoom(t.zoom),t.pan&&(t.pan.x===r.pan.x&&t.pan.y===r.pan.y||n.pan(t.pan)),t.data&&n.data(t.data);for(var l=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],h=0;h<l.length;h++){var v=l[h];null!=t[v]&&n[v](t[v])}return n.endBatch(),this}var d={};!!t?d.elements=this.elements().map((function(t){return t.json()})):(d.elements={},e.forEach((function(t){var n=t.group();d.elements[n]||(d.elements[n]=[]),d.elements[n].push(t.json())}))),this._private.styleEnabled&&(d.style=n.style().json()),d.data=Jn(n.data());var g=r.options;return d.zoomingEnabled=r.zoomingEnabled,d.userZoomingEnabled=r.userZoomingEnabled,d.zoom=r.zoom,d.minZoom=r.minZoom,d.maxZoom=r.maxZoom,d.panningEnabled=r.panningEnabled,d.userPanningEnabled=r.userPanningEnabled,d.pan=Jn(r.pan),d.boxSelectionEnabled=r.boxSelectionEnabled,d.renderer=Jn(g.renderer),d.hideEdgesOnViewport=g.hideEdgesOnViewport,d.textureOnViewport=g.textureOnViewport,d.wheelSensitivity=g.wheelSensitivity,d.motionBlur=g.motionBlur,d.multiClickDebounceTime=g.multiClickDebounceTime,d}}),uf.$id=uf.getElementById,[ks,Fs,$s,Ls,Rs,_s,Vs,Us,rf,ef,af].forEach((function(t){Wt(uf,t)}));var sf={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,n){return!0},ready:void 0,stop:void 0,transform:function(t,n){return n}},ff={maximal:!1,acyclic:!1},cf=function(t){return t.scratch("breadthfirst")},lf=function(t,n){return t.scratch("breadthfirst",n)};function hf(t){this.options=Wt({},sf,ff,t)}hf.prototype.run=function(){var t,n=this.options,r=n,e=n.cy,i=r.eles,a=i.nodes().filter((function(t){return!t.isParent()})),o=i,u=r.directed,s=r.acyclic||r.maximal||r.maximalAdjustments>0,f=_r(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()});if(zt(r.roots))t=r.roots;else if(kt(r.roots)){for(var c=[],l=0;l<r.roots.length;l++){var h=r.roots[l],v=e.getElementById(h);c.push(v)}t=e.collection(c)}else if(xt(r.roots))t=e.$(r.roots);else if(u)t=a.roots();else{var d=i.components();t=e.collection();for(var g=function(n){var r=d[n],e=r.maxDegree(!1),i=r.filter((function(t){return t.degree(!1)===e}));t=t.add(i)},p=0;p<d.length;p++)g(p)}var y=[],m={},b=function(t,n){null==y[n]&&(y[n]=[]);var r=y[n].length;y[n].push(t),lf(t,{index:r,depth:n})};o.bfs({roots:t,directed:r.directed,visit:function(t,n,r,e,i){var a=t[0],o=a.id();b(a,i),m[o]=!0}});for(var w=[],x=0;x<a.length;x++){var M=a[x];m[M.id()]||w.push(M)}var k=function(t){for(var n=y[t],r=0;r<n.length;r++){var e=n[r];null!=e?lf(e,{depth:t,index:r}):(n.splice(r,1),r--)}},E=function(){for(var t=0;t<y.length;t++)k(t)},S=function(t,n){for(var e=cf(t),a=t.incomers().filter((function(t){return t.isNode()&&i.has(t)})),o=-1,u=t.id(),s=0;s<a.length;s++){var f=a[s],c=cf(f);o=Math.max(o,c.depth)}if(e.depth<=o){if(!r.acyclic&&n[u])return null;var l=o+1;return function(t,n){var r=cf(t),e=r.depth,i=r.index;y[e][i]=null,b(t,n)}(t,l),n[u]=l,!0}return!1};if(u&&s){var A=[],z={},B=function(t){return A.push(t)};for(a.forEach((function(t){return A.push(t)}));A.length>0;){var C=A.shift(),T=S(C,z);if(T)C.outgoers().filter((function(t){return t.isNode()&&i.has(t)})).forEach(B);else if(null===T){Qn("Detected double maximal shift for node `"+C.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}E();var O=0;if(r.avoidOverlap)for(var P=0;P<a.length;P++){var N=a[P].layoutDimensions(r),j=N.w,F=N.h;O=Math.max(O,j,F)}var D={},I=function(t){if(D[t.id()])return D[t.id()];for(var n=cf(t).depth,r=t.neighborhood(),e=0,i=0,o=0;o<r.length;o++){var u=r[o];if(!u.isEdge()&&!u.isParent()&&a.has(u)){var s=cf(u);if(null!=s){var f=s.index,c=s.depth;if(null!=f&&null!=c){var l=y[c].length;c<n&&(e+=f/l,i++)}}}}return e/=i=Math.max(1,i),0===i&&(e=0),D[t.id()]=e,e},$=function(t,n){var r=I(t)-I(n);return 0===r?Ut(t.id(),n.id()):r};void 0!==r.depthSort&&($=r.depthSort);for(var L=0;L<y.length;L++)y[L].sort($),k(L);for(var R=[],_=0;_<w.length;_++)R.push(w[_]);y.unshift(R),E();for(var q=0,V=0;V<y.length;V++)q=Math.max(y[V].length,q);var U=f.x1+f.w/2,W=f.x1+f.h/2,Z=y.reduce((function(t,n){return Math.max(t,n.length)}),0);return i.nodes().layoutPositions(this,r,(function(t){var n=cf(t),e=n.depth,i=n.index,a=y[e].length,o=Math.max(f.w/((r.grid?Z:a)+1),O),u=Math.max(f.h/(y.length+1),O),s=Math.min(f.w/2/y.length,f.h/2/y.length);if(s=Math.max(s,O),r.circle){var c=s*e+s-(y.length>0&&y[0].length<=3?s/2:0),l=2*Math.PI/y[e].length*i;return 0===e&&1===y[0].length&&(c=1),{x:U+c*Math.cos(l),y:W+c*Math.sin(l)}}return{x:U+(i+1-(a+1)/2)*o,y:(e+1)*u}})),this};var vf={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,n){return!0},ready:void 0,stop:void 0,transform:function(t,n){return n}};function df(t){this.options=Wt({},vf,t)}df.prototype.run=function(){var t=this.options,n=t,r=t.cy,e=n.eles,i=void 0!==n.counterclockwise?!n.counterclockwise:n.clockwise,a=e.nodes().not(":parent");n.sort&&(a=a.sort(n.sort));for(var o,u=_r(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),s=u.x1+u.w/2,f=u.y1+u.h/2,c=(void 0===n.sweep?2*Math.PI-2*Math.PI/a.length:n.sweep)/Math.max(1,a.length-1),l=0,h=0;h<a.length;h++){var v=a[h].layoutDimensions(n),d=v.w,g=v.h;l=Math.max(l,d,g)}if(o=St(n.radius)?n.radius:a.length<=1?0:Math.min(u.h,u.w)/2-l,a.length>1&&n.avoidOverlap){l*=1.75;var p=Math.cos(c)-Math.cos(0),y=Math.sin(c)-Math.sin(0),m=Math.sqrt(l*l/(p*p+y*y));o=Math.max(m,o)}return e.nodes().layoutPositions(this,n,(function(t,r){var e=n.startAngle+r*c*(i?1:-1),a=o*Math.cos(e),u=o*Math.sin(e);return{x:s+a,y:f+u}})),this};var gf,pf={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(t){return t.degree()},levelWidth:function(t){return t.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,n){return!0},ready:void 0,stop:void 0,transform:function(t,n){return n}};function yf(t){this.options=Wt({},pf,t)}yf.prototype.run=function(){for(var t=this.options,n=t,r=void 0!==n.counterclockwise?!n.counterclockwise:n.clockwise,e=t.cy,i=n.eles,a=i.nodes().not(":parent"),o=_r(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),u=o.x1+o.w/2,s=o.y1+o.h/2,f=[],c=0,l=0;l<a.length;l++){var h,v=a[l];h=n.concentric(v),f.push({value:h,node:v}),v._private.scratch.concentric=h}a.updateStyle();for(var d=0;d<a.length;d++){var g=a[d].layoutDimensions(n);c=Math.max(c,g.w,g.h)}f.sort((function(t,n){return n.value-t.value}));for(var p=n.levelWidth(a),y=[[]],m=y[0],b=0;b<f.length;b++){var w=f[b];if(m.length>0)Math.abs(m[0].value-w.value)>=p&&(m=[],y.push(m));m.push(w)}var x=c+n.minNodeSpacing;if(!n.avoidOverlap){var M=y.length>0&&y[0].length>1,k=(Math.min(o.w,o.h)/2-x)/(y.length+M?1:0);x=Math.min(x,k)}for(var E=0,S=0;S<y.length;S++){var A=y[S],z=void 0===n.sweep?2*Math.PI-2*Math.PI/A.length:n.sweep,B=A.dTheta=z/Math.max(1,A.length-1);if(A.length>1&&n.avoidOverlap){var C=Math.cos(B)-Math.cos(0),T=Math.sin(B)-Math.sin(0),O=Math.sqrt(x*x/(C*C+T*T));E=Math.max(O,E)}A.r=E,E+=x}if(n.equidistant){for(var P=0,N=0,j=0;j<y.length;j++){var F=y[j].r-N;P=Math.max(P,F)}N=0;for(var D=0;D<y.length;D++){var I=y[D];0===D&&(N=I.r),I.r=N,N+=P}}for(var $={},L=0;L<y.length;L++)for(var R=y[L],_=R.dTheta,q=R.r,V=0;V<R.length;V++){var U=R[V],W=n.startAngle+(r?1:-1)*_*V,Z={x:u+q*Math.cos(W),y:s+q*Math.sin(W)};$[U.node.id()]=Z}return i.nodes().layoutPositions(this,n,(function(t){var n=t.id();return $[n]})),this};var mf={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(t,n){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(t){return 2048},nodeOverlap:4,idealEdgeLength:function(t){return 32},edgeElasticity:function(t){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function bf(t){this.options=Wt({},mf,t),this.options.layout=this;var n=this.options.eles.nodes(),r=this.options.eles.edges().filter((function(t){var r=t.source().data("id"),e=t.target().data("id"),i=n.some((function(t){return t.data("id")===r})),a=n.some((function(t){return t.data("id")===e}));return!i||!a}));this.options.eles=this.options.eles.not(r)}bf.prototype.run=function(){var t=this.options,n=t.cy,r=this;r.stopped=!1,!0!==t.animate&&!1!==t.animate||r.emit({type:"layoutstart",layout:r}),gf=!0===t.debug;var e=wf(n,r,t);gf&&undefined(e),t.randomize&&kf(e);var i=On(),a=function(){Sf(e,n,t),!0===t.fit&&n.fit(t.padding)},o=function(n){return!(r.stopped||n>=t.numIter)&&(Af(e,t),e.temperature=e.temperature*t.coolingFactor,!(e.temperature<t.minTemp))},u=function(){if(!0===t.animate||!1===t.animate)a(),r.one("layoutstop",t.stop),r.emit({type:"layoutstop",layout:r});else{var n=t.eles.nodes(),i=Ef(e,t,n);n.layoutPositions(r,t,i)}},s=0,f=!0;if(!0===t.animate){!function n(){for(var r=0;f&&r<t.refresh;)f=o(s),s++,r++;f?(On()-i>=t.animationThreshold&&a(),Tn(n)):($f(e,t),u())}()}else{for(;f;)f=o(s),s++;$f(e,t),u()}return this},bf.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},bf.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var wf=function(t,n,r){for(var e=r.eles.edges(),i=r.eles.nodes(),a=_r(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),o={isCompound:t.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:e.size(),temperature:r.initialTemp,clientWidth:a.w,clientHeight:a.h,boundingBox:a},u=r.eles.components(),s={},f=0;f<u.length;f++)for(var c=u[f],l=0;l<c.length;l++){s[c[l].id()]=f}for(f=0;f<o.nodeSize;f++){var h=(y=i[f]).layoutDimensions(r);(N={}).isLocked=y.locked(),N.id=y.data("id"),N.parentId=y.data("parent"),N.cmptId=s[y.id()],N.children=[],N.positionX=y.position("x"),N.positionY=y.position("y"),N.offsetX=0,N.offsetY=0,N.height=h.w,N.width=h.h,N.maxX=N.positionX+N.width/2,N.minX=N.positionX-N.width/2,N.maxY=N.positionY+N.height/2,N.minY=N.positionY-N.height/2,N.padLeft=parseFloat(y.style("padding")),N.padRight=parseFloat(y.style("padding")),N.padTop=parseFloat(y.style("padding")),N.padBottom=parseFloat(y.style("padding")),N.nodeRepulsion=Mt(r.nodeRepulsion)?r.nodeRepulsion(y):r.nodeRepulsion,o.layoutNodes.push(N),o.idToIndex[N.id]=f}var v=[],d=0,g=-1,p=[];for(f=0;f<o.nodeSize;f++){var y,m=(y=o.layoutNodes[f]).parentId;null!=m?o.layoutNodes[o.idToIndex[m]].children.push(y.id):(v[++g]=y.id,p.push(y.id))}for(o.graphSet.push(p);d<=g;){var b=v[d++],w=o.idToIndex[b],x=o.layoutNodes[w].children;if(x.length>0){o.graphSet.push(x);for(f=0;f<x.length;f++)v[++g]=x[f]}}for(f=0;f<o.graphSet.length;f++){var M=o.graphSet[f];for(l=0;l<M.length;l++){var k=o.idToIndex[M[l]];o.indexToGraph[k]=f}}for(f=0;f<o.edgeSize;f++){var E=e[f],S={};S.id=E.data("id"),S.sourceId=E.data("source"),S.targetId=E.data("target");var A=Mt(r.idealEdgeLength)?r.idealEdgeLength(E):r.idealEdgeLength,z=Mt(r.edgeElasticity)?r.edgeElasticity(E):r.edgeElasticity,B=o.idToIndex[S.sourceId],C=o.idToIndex[S.targetId];if(o.indexToGraph[B]!=o.indexToGraph[C]){for(var T=xf(S.sourceId,S.targetId,o),O=o.graphSet[T],P=0,N=o.layoutNodes[B];-1===O.indexOf(N.id);)N=o.layoutNodes[o.idToIndex[N.parentId]],P++;for(N=o.layoutNodes[C];-1===O.indexOf(N.id);)N=o.layoutNodes[o.idToIndex[N.parentId]],P++;A*=P*r.nestingFactor}S.idealLength=A,S.elasticity=z,o.layoutEdges.push(S)}return o},xf=function(t,n,r){var e=Mf(t,n,0,r);return 2>e.count?0:e.graph},Mf=function t(n,r,e,i){var a=i.graphSet[e];if(-1<a.indexOf(n)&&-1<a.indexOf(r))return{count:2,graph:e};for(var o=0,u=0;u<a.length;u++){var s=a[u],f=i.idToIndex[s],c=i.layoutNodes[f].children;if(0!==c.length){var l=t(n,r,i.indexToGraph[i.idToIndex[c[0]]],i);if(0!==l.count){if(1!==l.count)return l;if(2===++o)break}}}return{count:o,graph:e}},kf=function(t,n){for(var r=t.clientWidth,e=t.clientHeight,i=0;i<t.nodeSize;i++){var a=t.layoutNodes[i];0!==a.children.length||a.isLocked||(a.positionX=Math.random()*r,a.positionY=Math.random()*e)}},Ef=function(t,n,r){var e=t.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return n.boundingBox&&(r.forEach((function(n){var r=t.layoutNodes[t.idToIndex[n.data("id")]];i.x1=Math.min(i.x1,r.positionX),i.x2=Math.max(i.x2,r.positionX),i.y1=Math.min(i.y1,r.positionY),i.y2=Math.max(i.y2,r.positionY)})),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(r,a){var o=t.layoutNodes[t.idToIndex[r.data("id")]];if(n.boundingBox){var u=(o.positionX-i.x1)/i.w,s=(o.positionY-i.y1)/i.h;return{x:e.x1+u*e.w,y:e.y1+s*e.h}}return{x:o.positionX,y:o.positionY}}},Sf=function(t,n,r){var e=r.layout,i=r.eles.nodes(),a=Ef(t,r,i);i.positions(a),!0!==t.ready&&(t.ready=!0,e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:this}))},Af=function(t,n,r){zf(t,n),Pf(t),Nf(t,n),jf(t),Ff(t)},zf=function(t,n){for(var r=0;r<t.graphSet.length;r++)for(var e=t.graphSet[r],i=e.length,a=0;a<i;a++)for(var o=t.layoutNodes[t.idToIndex[e[a]]],u=a+1;u<i;u++){var s=t.layoutNodes[t.idToIndex[e[u]]];Cf(o,s,t,n)}},Bf=function(t){return-t+2*t*Math.random()},Cf=function(t,n,r,e){if(t.cmptId===n.cmptId||r.isCompound){var i=n.positionX-t.positionX,a=n.positionY-t.positionY;0===i&&0===a&&(i=Bf(1),a=Bf(1));var o=Tf(t,n,i,a);if(o>0)var u=(f=e.nodeOverlap*o)*i/(g=Math.sqrt(i*i+a*a)),s=f*a/g;else{var f,c=Of(t,i,a),l=Of(n,-1*i,-1*a),h=l.x-c.x,v=l.y-c.y,d=h*h+v*v,g=Math.sqrt(d);u=(f=(t.nodeRepulsion+n.nodeRepulsion)/d)*h/g,s=f*v/g}t.isLocked||(t.offsetX-=u,t.offsetY-=s),n.isLocked||(n.offsetX+=u,n.offsetY+=s)}},Tf=function(t,n,r,e){if(r>0)var i=t.maxX-n.minX;else i=n.maxX-t.minX;if(e>0)var a=t.maxY-n.minY;else a=n.maxY-t.minY;return i>=0&&a>=0?Math.sqrt(i*i+a*a):0},Of=function(t,n,r){var e=t.positionX,i=t.positionY,a=t.height||1,o=t.width||1,u=r/n,s=a/o,f={};return 0===n&&0<r||0===n&&0>r?(f.x=e,f.y=i+a/2,f):0<n&&-1*s<=u&&u<=s?(f.x=e+o/2,f.y=i+o*r/2/n,f):0>n&&-1*s<=u&&u<=s?(f.x=e-o/2,f.y=i-o*r/2/n,f):0<r&&(u<=-1*s||u>=s)?(f.x=e+a*n/2/r,f.y=i+a/2,f):0>r&&(u<=-1*s||u>=s)?(f.x=e-a*n/2/r,f.y=i-a/2,f):f},Pf=function(t,n){for(var r=0;r<t.edgeSize;r++){var e=t.layoutEdges[r],i=t.idToIndex[e.sourceId],a=t.layoutNodes[i],o=t.idToIndex[e.targetId],u=t.layoutNodes[o],s=u.positionX-a.positionX,f=u.positionY-a.positionY;if(0!==s||0!==f){var c=Of(a,s,f),l=Of(u,-1*s,-1*f),h=l.x-c.x,v=l.y-c.y,d=Math.sqrt(h*h+v*v),g=Math.pow(e.idealLength-d,2)/e.elasticity;if(0!==d)var p=g*h/d,y=g*v/d;else p=0,y=0;a.isLocked||(a.offsetX+=p,a.offsetY+=y),u.isLocked||(u.offsetX-=p,u.offsetY-=y)}}},Nf=function(t,n){if(0!==n.gravity)for(var r=0;r<t.graphSet.length;r++){var e=t.graphSet[r],i=e.length;if(0===r)var a=t.clientHeight/2,o=t.clientWidth/2;else{var u=t.layoutNodes[t.idToIndex[e[0]]],s=t.layoutNodes[t.idToIndex[u.parentId]];a=s.positionX,o=s.positionY}for(var f=0;f<i;f++){var c=t.layoutNodes[t.idToIndex[e[f]]];if(!c.isLocked){var l=a-c.positionX,h=o-c.positionY,v=Math.sqrt(l*l+h*h);if(v>1){var d=n.gravity*l/v,g=n.gravity*h/v;c.offsetX+=d,c.offsetY+=g}}}}},jf=function(t,n){var r=[],e=0,i=-1;for(r.push.apply(r,t.graphSet[0]),i+=t.graphSet[0].length;e<=i;){var a=r[e++],o=t.idToIndex[a],u=t.layoutNodes[o],s=u.children;if(0<s.length&&!u.isLocked){for(var f=u.offsetX,c=u.offsetY,l=0;l<s.length;l++){var h=t.layoutNodes[t.idToIndex[s[l]]];h.offsetX+=f,h.offsetY+=c,r[++i]=s[l]}u.offsetX=0,u.offsetY=0}}},Ff=function(t,n){for(var r=0;r<t.nodeSize;r++){0<(i=t.layoutNodes[r]).children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(r=0;r<t.nodeSize;r++){if(!(0<(i=t.layoutNodes[r]).children.length||i.isLocked)){var e=Df(i.offsetX,i.offsetY,t.temperature);i.positionX+=e.x,i.positionY+=e.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,If(i,t)}}for(r=0;r<t.nodeSize;r++){var i;0<(i=t.layoutNodes[r]).children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},Df=function(t,n,r){var e=Math.sqrt(t*t+n*n);if(e>r)var i={x:r*t/e,y:r*n/e};else i={x:t,y:n};return i},If=function t(n,r){var e=n.parentId;if(null!=e){var i=r.layoutNodes[r.idToIndex[e]],a=!1;return(null==i.maxX||n.maxX+i.padRight>i.maxX)&&(i.maxX=n.maxX+i.padRight,a=!0),(null==i.minX||n.minX-i.padLeft<i.minX)&&(i.minX=n.minX-i.padLeft,a=!0),(null==i.maxY||n.maxY+i.padBottom>i.maxY)&&(i.maxY=n.maxY+i.padBottom,a=!0),(null==i.minY||n.minY-i.padTop<i.minY)&&(i.minY=n.minY-i.padTop,a=!0),a?t(i,r):void 0}},$f=function(t,n){for(var r=t.layoutNodes,e=[],i=0;i<r.length;i++){var a=r[i],o=a.cmptId;(e[o]=e[o]||[]).push(a)}var u=0;for(i=0;i<e.length;i++){if(g=e[i]){g.x1=1/0,g.x2=-1/0,g.y1=1/0,g.y2=-1/0;for(var s=0;s<g.length;s++){var f=g[s];g.x1=Math.min(g.x1,f.positionX-f.width/2),g.x2=Math.max(g.x2,f.positionX+f.width/2),g.y1=Math.min(g.y1,f.positionY-f.height/2),g.y2=Math.max(g.y2,f.positionY+f.height/2)}g.w=g.x2-g.x1,g.h=g.y2-g.y1,u+=g.w*g.h}}e.sort((function(t,n){return n.w*n.h-t.w*t.h}));var c=0,l=0,h=0,v=0,d=Math.sqrt(u)*t.clientWidth/t.clientHeight;for(i=0;i<e.length;i++){var g;if(g=e[i]){for(s=0;s<g.length;s++){(f=g[s]).isLocked||(f.positionX+=c-g.x1,f.positionY+=l-g.y1)}c+=g.w+n.componentSpacing,h+=g.w+n.componentSpacing,v=Math.max(v,g.h),h>d&&(l+=v+n.componentSpacing,c=0,h=0,v=0)}}},Lf={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(t){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,n){return!0},ready:void 0,stop:void 0,transform:function(t,n){return n}};function Rf(t){this.options=Wt({},Lf,t)}Rf.prototype.run=function(){var t=this.options,n=t,r=t.cy,e=n.eles,i=e.nodes().not(":parent");n.sort&&(i=i.sort(n.sort));var a=_r(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(0===a.h||0===a.w)e.nodes().layoutPositions(this,n,(function(t){return{x:a.x1,y:a.y1}}));else{var o=i.size(),u=Math.sqrt(o*a.h/a.w),s=Math.round(u),f=Math.round(a.w/a.h*u),c=function(t){if(null==t)return Math.min(s,f);Math.min(s,f)==s?s=t:f=t},l=function(t){if(null==t)return Math.max(s,f);Math.max(s,f)==s?s=t:f=t},h=n.rows,v=null!=n.cols?n.cols:n.columns;if(null!=h&&null!=v)s=h,f=v;else if(null!=h&&null==v)s=h,f=Math.ceil(o/s);else if(null==h&&null!=v)f=v,s=Math.ceil(o/f);else if(f*s>o){var d=c(),g=l();(d-1)*g>=o?c(d-1):(g-1)*d>=o&&l(g-1)}else for(;f*s<o;){var p=c(),y=l();(y+1)*p>=o?l(y+1):c(p+1)}var m=a.w/f,b=a.h/s;if(n.condense&&(m=0,b=0),n.avoidOverlap)for(var w=0;w<i.length;w++){var x=i[w],M=x._private.position;null!=M.x&&null!=M.y||(M.x=0,M.y=0);var k=x.layoutDimensions(n),E=n.avoidOverlapPadding,S=k.w+E,A=k.h+E;m=Math.max(m,S),b=Math.max(b,A)}for(var z={},B=function(t,n){return!!z["c-"+t+"-"+n]},C=function(t,n){z["c-"+t+"-"+n]=!0},T=0,O=0,P=function(){++O>=f&&(O=0,T++)},N={},j=0;j<i.length;j++){var F=i[j],D=n.position(F);if(D&&(void 0!==D.row||void 0!==D.col)){var I={row:D.row,col:D.col};if(void 0===I.col)for(I.col=0;B(I.row,I.col);)I.col++;else if(void 0===I.row)for(I.row=0;B(I.row,I.col);)I.row++;N[F.id()]=I,C(I.row,I.col)}}i.layoutPositions(this,n,(function(t,n){var r,e;if(t.locked()||t.isParent())return!1;var i=N[t.id()];if(i)r=i.col*m+m/2+a.x1,e=i.row*b+b/2+a.y1;else{for(;B(T,O);)P();r=O*m+m/2+a.x1,e=T*b+b/2+a.y1,C(T,O),P()}return{x:r,y:e}}))}return this};var _f={ready:function(){},stop:function(){}};function qf(t){this.options=Wt({},_f,t)}qf.prototype.run=function(){var t=this.options,n=t.eles,r=this;return t.cy,r.emit("layoutstart"),n.nodes().positions((function(){return{x:0,y:0}})),r.one("layoutready",t.ready),r.emit("layoutready"),r.one("layoutstop",t.stop),r.emit("layoutstop"),this},qf.prototype.stop=function(){return this};var Vf={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,n){return!0},ready:void 0,stop:void 0,transform:function(t,n){return n}};function Uf(t){this.options=Wt({},Vf,t)}Uf.prototype.run=function(){var t=this.options,n=t.eles.nodes(),r=Mt(t.positions);return n.layoutPositions(this,t,(function(n,e){var i=function(n){if(null==t.positions)return function(t){return{x:t.x,y:t.y}}(n.position());if(r)return t.positions(n);var e=t.positions[n._private.data.id];return e??null}(n);return!n.locked()&&null!=i&&i})),this};var Wf={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,n){return!0},ready:void 0,stop:void 0,transform:function(t,n){return n}};function Zf(t){this.options=Wt({},Wf,t)}Zf.prototype.run=function(){var t=this.options,n=t.cy,r=t.eles,e=_r(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});return r.nodes().layoutPositions(this,t,(function(t,n){return{x:e.x1+Math.round(Math.random()*e.w),y:e.y1+Math.round(Math.random()*e.h)}})),this};var Hf=[{name:"breadthfirst",impl:hf},{name:"circle",impl:df},{name:"concentric",impl:yf},{name:"cose",impl:bf},{name:"grid",impl:Rf},{name:"null",impl:qf},{name:"preset",impl:Uf},{name:"random",impl:Zf}];function Kf(t){this.options=t,this.notifications=0}var Gf=function(){},Yf=function(){throw new Error("A headless instance can not render images")};Kf.prototype={recalculateRenderedStyle:Gf,notify:function(){this.notifications++},init:Gf,isHeadless:function(){return!0},png:Yf,jpg:Yf};var Xf={arrowShapeWidth:.3,registerArrowShapes:function(){var t=this.arrowShapes={},n=this,r=function(t,n,r,e,i,a,o){var u=i.x-r/2-o,s=i.x+r/2+o,f=i.y-r/2-o,c=i.y+r/2+o;return u<=t&&t<=s&&f<=n&&n<=c},e=function(t,n,r,e,i){var a=t*Math.cos(e)-n*Math.sin(e),o=(t*Math.sin(e)+n*Math.cos(e))*r;return{x:a*r+i.x,y:o+i.y}},i=function(t,n,r,i){for(var a=[],o=0;o<t.length;o+=2){var u=t[o],s=t[o+1];a.push(e(u,s,n,r,i))}return a},a=function(t){for(var n=[],r=0;r<t.length;r++){var e=t[r];n.push(e.x,e.y)}return n},o=function(t){return t.pstyle("width").pfValue*t.pstyle("arrow-scale").pfValue*2},u=function(e,u){xt(u)&&(u=t[u]),t[e]=Wt({name:e,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(t,n,r,e,o,u){var s=a(i(this.points,r+2*u,e,o));return ne(t,n,s)},roughCollide:r,draw:function(t,r,e,a){var o=i(this.points,r,e,a);n.arrowShapeImpl("polygon")(t,o)},spacing:function(t){return 0},gap:o},u)};u("none",{collide:Hn,roughCollide:Hn,draw:Gn,spacing:Kn,gap:Kn}),u("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),u("arrow","triangle"),u("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(t,r,a,o,u){var s=i(this.points,r,a,o),f=this.controlPoint,c=e(f[0],f[1],r,a,o);n.arrowShapeImpl(this.name)(t,s,c)},gap:function(t){return.8*o(t)}}),u("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(t,n,r,e,o,u,s){var f=a(i(this.points,r+2*s,e,o)),c=a(i(this.pointsTee,r+2*s,e,o));return ne(t,n,f)||ne(t,n,c)},draw:function(t,r,e,a,o){var u=i(this.points,r,e,a),s=i(this.pointsTee,r,e,a);n.arrowShapeImpl(this.name)(t,u,s)}}),u("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(t,n,r,e,o,u,s){var f=o,c=Math.pow(f.x-t,2)+Math.pow(f.y-n,2)<=Math.pow((r+2*s)*this.radius,2),l=a(i(this.points,r+2*s,e,o));return ne(t,n,l)||c},draw:function(t,r,e,a,o){var u=i(this.pointsTr,r,e,a);n.arrowShapeImpl(this.name)(t,u,a.x,a.y,this.radius*r)},spacing:function(t){return n.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.radius}}),u("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(t,n){var r=this.baseCrossLinePts.slice(),e=n/t;return r[3]=r[3]-e,r[5]=r[5]-e,r},collide:function(t,n,r,e,o,u,s){var f=a(i(this.points,r+2*s,e,o)),c=a(i(this.crossLinePts(r,u),r+2*s,e,o));return ne(t,n,f)||ne(t,n,c)},draw:function(t,r,e,a,o){var u=i(this.points,r,e,a),s=i(this.crossLinePts(r,o),r,e,a);n.arrowShapeImpl(this.name)(t,u,s)}}),u("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(t){return.525*o(t)}}),u("circle",{radius:.15,collide:function(t,n,r,e,i,a,o){var u=i;return Math.pow(u.x-t,2)+Math.pow(u.y-n,2)<=Math.pow((r+2*o)*this.radius,2)},draw:function(t,r,e,i,a){n.arrowShapeImpl(this.name)(t,i.x,i.y,this.radius*r)},spacing:function(t){return n.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.radius}}),u("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(t){return 1},gap:function(t){return 1}}),u("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),u("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(t){return t.pstyle("width").pfValue*t.pstyle("arrow-scale").value}}),u("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(t){return.95*t.pstyle("width").pfValue*t.pstyle("arrow-scale").value}})}},Qf={projectIntoViewport:function(t,n){var r=this.cy,e=this.findContainerClientCoords(),i=e[0],a=e[1],o=e[4],u=r.pan(),s=r.zoom();return[((t-i)/o-u.x)/s,((n-a)/o-u.y)/s]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var t=this.container,n=t.getBoundingClientRect(),r=this.cy.window().getComputedStyle(t),e=function(t){return parseFloat(r.getPropertyValue(t))},i=e("padding-left"),a=e("padding-right"),o=e("padding-top"),u=e("padding-bottom"),s=e("border-left-width"),f=e("border-right-width"),c=e("border-top-width"),l=(e("border-bottom-width"),t.clientWidth),h=t.clientHeight,v=i+a,d=o+u,g=s+f,p=n.width/(l+g),y=l-v,m=h-d,b=n.left+i+s,w=n.top+o+c;return this.containerBB=[b,w,y,m,p]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(t,n,r,e){return this.findNearestElements(t,n,r,e)[0]},findNearestElements:function(t,n,r,e){var i,a,o=this,u=this,s=u.getCachedZSortedEles(),f=[],c=u.cy.zoom(),l=u.cy.hasCompoundNodes(),h=(e?24:8)/c,v=(e?8:2)/c,d=(e?8:2)/c,g=1/0;function p(t,n){if(t.isNode()){if(a)return;a=t,f.push(t)}if(t.isEdge()&&(null==n||n<g))if(i){if(i.pstyle("z-compound-depth").value===t.pstyle("z-compound-depth").value&&i.pstyle("z-compound-depth").value===t.pstyle("z-compound-depth").value)for(var r=0;r<f.length;r++)if(f[r].isEdge()){f[r]=t,i=t,g=null!=n?n:g;break}}else f.push(t),i=t,g=null!=n?n:g}function y(r){var e=r.outerWidth()+2*v,i=r.outerHeight()+2*v,a=e/2,s=i/2,f=r.position(),c="auto"===r.pstyle("corner-radius").value?"auto":r.pstyle("corner-radius").pfValue,l=r._private.rscratch;if(f.x-a<=t&&t<=f.x+a&&f.y-s<=n&&n<=f.y+s&&u.nodeShapes[o.getNodeShape(r)].checkPoint(t,n,0,e,i,f.x,f.y,c,l))return p(r,0),!0}function m(r){var e,i=r._private,a=i.rscratch,s=r.pstyle("width").pfValue,c=r.pstyle("arrow-scale").value,v=s/2+h,d=v*v,g=2*v,m=i.source,b=i.target;if("segments"===a.edgeType||"straight"===a.edgeType||"haystack"===a.edgeType){for(var w=a.allpts,x=0;x+3<w.length;x+=2)if(Xr(t,n,w[x],w[x+1],w[x+2],w[x+3],g)&&d>(e=te(t,n,w[x],w[x+1],w[x+2],w[x+3])))return p(r,e),!0}else if("bezier"===a.edgeType||"multibezier"===a.edgeType||"self"===a.edgeType||"compound"===a.edgeType)for(w=a.allpts,x=0;x+5<a.allpts.length;x+=4)if(Qr(t,n,w[x],w[x+1],w[x+2],w[x+3],w[x+4],w[x+5],g)&&d>(e=Jr(t,n,w[x],w[x+1],w[x+2],w[x+3],w[x+4],w[x+5])))return p(r,e),!0;m=m||i.source,b=b||i.target;var M=o.getArrowWidth(s,c),k=[{name:"source",x:a.arrowStartX,y:a.arrowStartY,angle:a.srcArrowAngle},{name:"target",x:a.arrowEndX,y:a.arrowEndY,angle:a.tgtArrowAngle},{name:"mid-source",x:a.midX,y:a.midY,angle:a.midsrcArrowAngle},{name:"mid-target",x:a.midX,y:a.midY,angle:a.midtgtArrowAngle}];for(x=0;x<k.length;x++){var E=k[x],S=u.arrowShapes[r.pstyle(E.name+"-arrow-shape").value],A=r.pstyle("width").pfValue;if(S.roughCollide(t,n,M,E.angle,{x:E.x,y:E.y},A,h)&&S.collide(t,n,M,E.angle,{x:E.x,y:E.y},A,h))return p(r),!0}l&&f.length>0&&(y(m),y(b))}function b(t,n,r){return or(t,n,r)}function w(r,e){var i,a=r._private,o=d;i=e?e+"-":"",r.boundingBox();var u=a.labelBounds[e||"main"],s=r.pstyle(i+"label").value;if("yes"===r.pstyle("text-events").strValue&&s){var f=b(a.rscratch,"labelX",e),c=b(a.rscratch,"labelY",e),l=b(a.rscratch,"labelAngle",e),h=r.pstyle(i+"text-margin-x").pfValue,v=r.pstyle(i+"text-margin-y").pfValue,g=u.x1-o-h,y=u.x2+o-h,m=u.y1-o-v,w=u.y2+o-v;if(l){var x=Math.cos(l),M=Math.sin(l),k=function(t,n){return{x:(t-=f)*x-(n-=c)*M+f,y:t*M+n*x+c}},E=k(g,m),S=k(g,w),A=k(y,m),z=k(y,w),B=[E.x+h,E.y+v,A.x+h,A.y+v,z.x+h,z.y+v,S.x+h,S.y+v];if(ne(t,n,B))return p(r),!0}else if(Kr(u,t,n))return p(r),!0}}r&&(s=s.interactive);for(var x=s.length-1;x>=0;x--){var M=s[x];M.isNode()?y(M)||w(M):m(M)||w(M)||w(M,"source")||w(M,"target")}return f},getAllInBox:function(t,n,r,e){for(var i,a,o=this.getCachedZSortedEles().interactive,u=[],s=Math.min(t,r),f=Math.max(t,r),c=Math.min(n,e),l=Math.max(n,e),h=_r({x1:t=s,y1:n=c,x2:r=f,y2:e=l}),v=0;v<o.length;v++){var d=o[v];if(d.isNode()){var g=d,p=g.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});Hr(h,p)&&!Gr(p,h)&&u.push(g)}else{var y=d,m=y._private,b=m.rscratch;if(null!=b.startX&&null!=b.startY&&!Kr(h,b.startX,b.startY))continue;if(null!=b.endX&&null!=b.endY&&!Kr(h,b.endX,b.endY))continue;if("bezier"===b.edgeType||"multibezier"===b.edgeType||"self"===b.edgeType||"compound"===b.edgeType||"segments"===b.edgeType||"haystack"===b.edgeType){for(var w=m.rstyle.bezierPts||m.rstyle.linePts||m.rstyle.haystackPts,x=!0,M=0;M<w.length;M++)if(i=h,a=w[M],!Kr(i,a.x,a.y)){x=!1;break}x&&u.push(y)}else"haystack"!==b.edgeType&&"straight"!==b.edgeType||u.push(y)}}return u}},Jf={calculateArrowAngles:function(t){var n,r,e,i,a,o,u=t._private.rscratch,s="haystack"===u.edgeType,f="bezier"===u.edgeType,c="multibezier"===u.edgeType,l="segments"===u.edgeType,h="compound"===u.edgeType,v="self"===u.edgeType;if(s?(e=u.haystackPts[0],i=u.haystackPts[1],a=u.haystackPts[2],o=u.haystackPts[3]):(e=u.arrowStartX,i=u.arrowStartY,a=u.arrowEndX,o=u.arrowEndY),g=u.midX,p=u.midY,l)n=e-u.segpts[0],r=i-u.segpts[1];else if(c||h||v||f){var d=u.allpts;n=e-$r(d[0],d[2],d[4],.1),r=i-$r(d[1],d[3],d[5],.1)}else n=e-g,r=i-p;u.srcArrowAngle=Pr(n,r);var g=u.midX,p=u.midY;if(s&&(g=(e+a)/2,p=(i+o)/2),n=a-e,r=o-i,l)if((d=u.allpts).length/2%2==0){var y=(S=d.length/2)-2;n=d[S]-d[y],r=d[S+1]-d[y+1]}else if(u.isRound)n=u.midVector[1],r=-u.midVector[0];else{y=(S=d.length/2-1)-2;n=d[S]-d[y],r=d[S+1]-d[y+1]}else if(c||h||v){var m,b,w,x,d=u.allpts;if(u.ctrlpts.length/2%2==0){var M=(k=(E=d.length/2-1)+2)+2;m=$r(d[E],d[k],d[M],0),b=$r(d[E+1],d[k+1],d[M+1],0),w=$r(d[E],d[k],d[M],1e-4),x=$r(d[E+1],d[k+1],d[M+1],1e-4)}else{var k,E;M=(k=d.length/2-1)+2;m=$r(d[E=k-2],d[k],d[M],.4999),b=$r(d[E+1],d[k+1],d[M+1],.4999),w=$r(d[E],d[k],d[M],.5),x=$r(d[E+1],d[k+1],d[M+1],.5)}n=w-m,r=x-b}if(u.midtgtArrowAngle=Pr(n,r),u.midDispX=n,u.midDispY=r,n*=-1,r*=-1,l)if((d=u.allpts).length/2%2==0);else if(!u.isRound){var S,A=(S=d.length/2-1)+2;n=-(d[A]-d[S]),r=-(d[A+1]-d[S+1])}if(u.midsrcArrowAngle=Pr(n,r),l)n=a-u.segpts[u.segpts.length-2],r=o-u.segpts[u.segpts.length-1];else if(c||h||v||f){var z=(d=u.allpts).length;n=a-$r(d[z-6],d[z-4],d[z-2],.9),r=o-$r(d[z-5],d[z-3],d[z-1],.9)}else n=a-g,r=o-p;u.tgtArrowAngle=Pr(n,r)}};Jf.getArrowWidth=Jf.getArrowHeight=function(t,n){var r=this.arrowWidthCache=this.arrowWidthCache||{},e=r[t+", "+n];return e||(e=Math.max(Math.pow(13.37*t,.9),29)*n,r[t+", "+n]=e,e)};var tc,nc,rc,ec,ic,ac,oc,uc,sc,fc,cc,lc,hc,vc,dc,gc,pc,yc={},mc={},bc=function(t,n,r){r.x=n.x-t.x,r.y=n.y-t.y,r.len=Math.sqrt(r.x*r.x+r.y*r.y),r.nx=r.x/r.len,r.ny=r.y/r.len,r.ang=Math.atan2(r.ny,r.nx)},wc=function(t,n,r,e,i){var a,o;if(t!==pc?bc(n,t,yc):((o=yc).x=-1*(a=mc).x,o.y=-1*a.y,o.nx=-1*a.nx,o.ny=-1*a.ny,o.ang=a.ang>0?-(Math.PI-a.ang):Math.PI+a.ang),bc(n,r,mc),rc=yc.nx*mc.ny-yc.ny*mc.nx,ec=yc.nx*mc.nx-yc.ny*-mc.ny,oc=Math.asin(Math.max(-1,Math.min(1,rc))),Math.abs(oc)<1e-6)return tc=n.x,nc=n.y,void(sc=cc=0);ic=1,ac=!1,ec<0?oc<0?oc=Math.PI+oc:(oc=Math.PI-oc,ic=-1,ac=!0):oc>0&&(ic=-1,ac=!0),cc=void 0!==n.radius?n.radius:e,uc=oc/2,lc=Math.min(yc.len/2,mc.len/2),i?(fc=Math.abs(Math.cos(uc)*cc/Math.sin(uc)))>lc?(fc=lc,sc=Math.abs(fc*Math.sin(uc)/Math.cos(uc))):sc=cc:(fc=Math.min(lc,cc),sc=Math.abs(fc*Math.sin(uc)/Math.cos(uc))),dc=n.x+mc.nx*fc,gc=n.y+mc.ny*fc,tc=dc-mc.ny*sc*ic,nc=gc+mc.nx*sc*ic,hc=n.x+yc.nx*fc,vc=n.y+yc.ny*fc,pc=n};function xc(t,n){0===n.radius?t.lineTo(n.cx,n.cy):t.arc(n.cx,n.cy,n.radius,n.startAngle,n.endAngle,n.counterClockwise)}function Mc(t,n,r,e){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return 0===e||0===n.radius?{cx:n.x,cy:n.y,radius:0,startX:n.x,startY:n.y,stopX:n.x,stopY:n.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(wc(t,n,r,e,i),{cx:tc,cy:nc,radius:sc,startX:hc,startY:vc,stopX:dc,stopY:gc,startAngle:yc.ang+Math.PI/2*ic,endAngle:mc.ang-Math.PI/2*ic,counterClockwise:ac})}var kc={};function Ec(t){var n=[];if(null!=t){for(var r=0;r<t.length;r+=2){var e=t[r],i=t[r+1];n.push({x:e,y:i})}return n}}kc.findMidptPtsEtc=function(t,n){var r,e=n.posPts,i=n.intersectionPts,a=n.vectorNormInverse,o=t.pstyle("source-endpoint"),u=t.pstyle("target-endpoint"),s=null!=o.units&&null!=u.units;switch(t.pstyle("edge-distances").value){case"node-position":r=e;break;case"intersection":r=i;break;case"endpoints":if(s){var f=ct(this.manualEndptToPx(t.source()[0],o),2),c=f[0],l=f[1],h=ct(this.manualEndptToPx(t.target()[0],u),2),v=h[0],d=h[1],g={x1:c,y1:l,x2:v,y2:d};a=function(t,n,r,e){var i=e-n,a=r-t,o=Math.sqrt(a*a+i*i);return{x:-i/o,y:a/o}}(c,l,v,d),r=g}else Qn("Edge ".concat(t.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),r=i}return{midptPts:r,vectorNormInverse:a}},kc.findHaystackPoints=function(t){for(var n=0;n<t.length;n++){var r=t[n],e=r._private,i=e.rscratch;if(!i.haystack){var a=2*Math.random()*Math.PI;i.source={x:Math.cos(a),y:Math.sin(a)},a=2*Math.random()*Math.PI,i.target={x:Math.cos(a),y:Math.sin(a)}}var o=e.source,u=e.target,s=o.position(),f=u.position(),c=o.width(),l=u.width(),h=o.height(),v=u.height(),d=r.pstyle("haystack-radius").value/2;i.haystackPts=i.allpts=[i.source.x*c*d+s.x,i.source.y*h*d+s.y,i.target.x*l*d+f.x,i.target.y*v*d+f.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}},kc.findSegmentsPoints=function(t,n){var r=t._private.rscratch,e=t.pstyle("segment-weights"),i=t.pstyle("segment-distances"),a=t.pstyle("segment-radii"),o=t.pstyle("radius-type"),u=Math.min(e.pfValue.length,i.pfValue.length),s=a.pfValue[a.pfValue.length-1],f=o.pfValue[o.pfValue.length-1];r.edgeType="segments",r.segpts=[],r.radii=[],r.isArcRadius=[];for(var c=0;c<u;c++){var l=e.pfValue[c],h=i.pfValue[c],v=1-l,d=l,g=this.findMidptPtsEtc(t,n),p=g.midptPts,y=g.vectorNormInverse,m={x:p.x1*v+p.x2*d,y:p.y1*v+p.y2*d};r.segpts.push(m.x+y.x*h,m.y+y.y*h),r.radii.push(void 0!==a.pfValue[c]?a.pfValue[c]:s),r.isArcRadius.push("arc-radius"===(void 0!==o.pfValue[c]?o.pfValue[c]:f))}},kc.findLoopPoints=function(t,n,r,e){var i=t._private.rscratch,a=n.dirCounts,o=n.srcPos,u=t.pstyle("control-point-distances"),s=u?u.pfValue[0]:void 0,f=t.pstyle("loop-direction").pfValue,c=t.pstyle("loop-sweep").pfValue,l=t.pstyle("control-point-step-size").pfValue;i.edgeType="self";var h=r,v=l;e&&(h=0,v=s);var d=f-Math.PI/2,g=d-c/2,p=d+c/2,y=String(f+"_"+c);h=void 0===a[y]?a[y]=0:++a[y],i.ctrlpts=[o.x+1.4*Math.cos(g)*v*(h/3+1),o.y+1.4*Math.sin(g)*v*(h/3+1),o.x+1.4*Math.cos(p)*v*(h/3+1),o.y+1.4*Math.sin(p)*v*(h/3+1)]},kc.findCompoundLoopPoints=function(t,n,r,e){var i=t._private.rscratch;i.edgeType="compound";var a=n.srcPos,o=n.tgtPos,u=n.srcW,s=n.srcH,f=n.tgtW,c=n.tgtH,l=t.pstyle("control-point-step-size").pfValue,h=t.pstyle("control-point-distances"),v=h?h.pfValue[0]:void 0,d=r,g=l;e&&(d=0,g=v);var p={x:a.x-u/2,y:a.y-s/2},y={x:o.x-f/2,y:o.y-c/2},m={x:Math.min(p.x,y.x),y:Math.min(p.y,y.y)},b=Math.max(.5,Math.log(.01*u)),w=Math.max(.5,Math.log(.01*f));i.ctrlpts=[m.x,m.y-(1+Math.pow(50,1.12)/100)*g*(d/3+1)*b,m.x-(1+Math.pow(50,1.12)/100)*g*(d/3+1)*w,m.y]},kc.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"},kc.findBezierPoints=function(t,n,r,e,i){var a=t._private.rscratch,o=t.pstyle("control-point-step-size").pfValue,u=t.pstyle("control-point-distances"),s=t.pstyle("control-point-weights"),f=u&&s?Math.min(u.value.length,s.value.length):1,c=u?u.pfValue[0]:void 0,l=s.value[0],h=e;a.edgeType=h?"multibezier":"bezier",a.ctrlpts=[];for(var v=0;v<f;v++){var d=(.5-n.eles.length/2+r)*o*(i?-1:1),g=void 0,p=jr(d);h&&(c=u?u.pfValue[v]:o,l=s.value[v]);var y=void 0!==(g=e?c:void 0!==c?p*c:void 0)?g:d,m=1-l,b=l,w=this.findMidptPtsEtc(t,n),x=w.midptPts,M=w.vectorNormInverse,k={x:x.x1*m+x.x2*b,y:x.y1*m+x.y2*b};a.ctrlpts.push(k.x+M.x*y,k.y+M.y*y)}},kc.findTaxiPoints=function(t,n){var r=t._private.rscratch;r.edgeType="segments";var e="vertical",i="horizontal",a="leftward",o="rightward",u="downward",s="upward",f=n.posPts,c=n.srcW,l=n.srcH,h=n.tgtW,v=n.tgtH,d="node-position"!==t.pstyle("edge-distances").value,g=t.pstyle("taxi-direction").value,p=g,y=t.pstyle("taxi-turn"),m="%"===y.units,b=y.pfValue,w=b<0,x=t.pstyle("taxi-turn-min-distance").pfValue,M=d?(c+h)/2:0,k=d?(l+v)/2:0,E=f.x2-f.x1,S=f.y2-f.y1,A=function(t,n){return t>0?Math.max(t-n,0):Math.min(t+n,0)},z=A(E,M),B=A(S,k),C=!1;"auto"===p?g=Math.abs(z)>Math.abs(B)?i:e:p===s||p===u?(g=e,C=!0):p!==a&&p!==o||(g=i,C=!0);var T,O=g===e,P=O?B:z,N=O?S:E,j=jr(N),F=!1;(C&&(m||w)||!(p===u&&N<0||p===s&&N>0||p===a&&N>0||p===o&&N<0)||(P=(j*=-1)*Math.abs(P),F=!0),m)?T=(b<0?1+b:b)*P:T=(b<0?P:0)+b*j;var D=function(t){return Math.abs(t)<x||Math.abs(t)>=Math.abs(P)},I=D(T),$=D(Math.abs(P)-Math.abs(T));if((I||$)&&!F)if(O){var L=Math.abs(N)<=l/2,R=Math.abs(E)<=h/2;if(L){var _=(f.x1+f.x2)/2,q=f.y1,V=f.y2;r.segpts=[_,q,_,V]}else if(R){var U=(f.y1+f.y2)/2,W=f.x1,Z=f.x2;r.segpts=[W,U,Z,U]}else r.segpts=[f.x1,f.y2]}else{var H=Math.abs(N)<=c/2,K=Math.abs(S)<=v/2;if(H){var G=(f.y1+f.y2)/2,Y=f.x1,X=f.x2;r.segpts=[Y,G,X,G]}else if(K){var Q=(f.x1+f.x2)/2,J=f.y1,tt=f.y2;r.segpts=[Q,J,Q,tt]}else r.segpts=[f.x2,f.y1]}else if(O){var nt=f.y1+T+(d?l/2*j:0),rt=f.x1,et=f.x2;r.segpts=[rt,nt,et,nt]}else{var it=f.x1+T+(d?c/2*j:0),at=f.y1,ot=f.y2;r.segpts=[it,at,it,ot]}if(r.isRound){var ut=t.pstyle("taxi-radius").value,st="arc-radius"===t.pstyle("radius-type").value[0];r.radii=new Array(r.segpts.length/2).fill(ut),r.isArcRadius=new Array(r.segpts.length/2).fill(st)}},kc.tryToCorrectInvalidPoints=function(t,n){var r=t._private.rscratch;if("bezier"===r.edgeType){var e=n.srcPos,i=n.tgtPos,a=n.srcW,o=n.srcH,u=n.tgtW,s=n.tgtH,f=n.srcShape,c=n.tgtShape,l=n.srcCornerRadius,h=n.tgtCornerRadius,v=n.srcRs,d=n.tgtRs,g=!St(r.startX)||!St(r.startY),p=!St(r.arrowStartX)||!St(r.arrowStartY),y=!St(r.endX)||!St(r.endY),m=!St(r.arrowEndX)||!St(r.arrowEndY),b=3*(this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth),w=Fr({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),x=w<b,M=Fr({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),k=M<b,E=!1;if(g||p||x){E=!0;var S={x:r.ctrlpts[0]-e.x,y:r.ctrlpts[1]-e.y},A=Math.sqrt(S.x*S.x+S.y*S.y),z={x:S.x/A,y:S.y/A},B=Math.max(a,o),C={x:r.ctrlpts[0]+2*z.x*B,y:r.ctrlpts[1]+2*z.y*B},T=f.intersectLine(e.x,e.y,a,o,C.x,C.y,0,l,v);x?(r.ctrlpts[0]=r.ctrlpts[0]+z.x*(b-w),r.ctrlpts[1]=r.ctrlpts[1]+z.y*(b-w)):(r.ctrlpts[0]=T[0]+z.x*b,r.ctrlpts[1]=T[1]+z.y*b)}if(y||m||k){E=!0;var O={x:r.ctrlpts[0]-i.x,y:r.ctrlpts[1]-i.y},P=Math.sqrt(O.x*O.x+O.y*O.y),N={x:O.x/P,y:O.y/P},j=Math.max(a,o),F={x:r.ctrlpts[0]+2*N.x*j,y:r.ctrlpts[1]+2*N.y*j},D=c.intersectLine(i.x,i.y,u,s,F.x,F.y,0,h,d);k?(r.ctrlpts[0]=r.ctrlpts[0]+N.x*(b-M),r.ctrlpts[1]=r.ctrlpts[1]+N.y*(b-M)):(r.ctrlpts[0]=D[0]+N.x*b,r.ctrlpts[1]=D[1]+N.y*b)}E&&this.findEndpoints(t)}},kc.storeAllpts=function(t){var n=t._private.rscratch;if("multibezier"===n.edgeType||"bezier"===n.edgeType||"self"===n.edgeType||"compound"===n.edgeType){n.allpts=[],n.allpts.push(n.startX,n.startY);for(var r=0;r+1<n.ctrlpts.length;r+=2)n.allpts.push(n.ctrlpts[r],n.ctrlpts[r+1]),r+3<n.ctrlpts.length&&n.allpts.push((n.ctrlpts[r]+n.ctrlpts[r+2])/2,(n.ctrlpts[r+1]+n.ctrlpts[r+3])/2);var e;n.allpts.push(n.endX,n.endY),n.ctrlpts.length/2%2==0?(e=n.allpts.length/2-1,n.midX=n.allpts[e],n.midY=n.allpts[e+1]):(e=n.allpts.length/2-3,n.midX=$r(n.allpts[e],n.allpts[e+2],n.allpts[e+4],.5),n.midY=$r(n.allpts[e+1],n.allpts[e+3],n.allpts[e+5],.5))}else if("straight"===n.edgeType)n.allpts=[n.startX,n.startY,n.endX,n.endY],n.midX=(n.startX+n.endX+n.arrowStartX+n.arrowEndX)/4,n.midY=(n.startY+n.endY+n.arrowStartY+n.arrowEndY)/4;else if("segments"===n.edgeType){if(n.allpts=[],n.allpts.push(n.startX,n.startY),n.allpts.push.apply(n.allpts,n.segpts),n.allpts.push(n.endX,n.endY),n.isRound){n.roundCorners=[];for(var i=2;i+3<n.allpts.length;i+=2){var a=n.radii[i/2-1],o=n.isArcRadius[i/2-1];n.roundCorners.push(Mc({x:n.allpts[i-2],y:n.allpts[i-1]},{x:n.allpts[i],y:n.allpts[i+1],radius:a},{x:n.allpts[i+2],y:n.allpts[i+3]},a,o))}}if(n.segpts.length%4==0){var u=n.segpts.length/2,s=u-2;n.midX=(n.segpts[s]+n.segpts[u])/2,n.midY=(n.segpts[s+1]+n.segpts[u+1])/2}else{var f=n.segpts.length/2-1;if(n.isRound){var c={x:n.segpts[f],y:n.segpts[f+1]},l=n.roundCorners[f/2],h=[c.x-l.cx,c.y-l.cy],v=l.radius/Math.sqrt(Math.pow(h[0],2)+Math.pow(h[1],2));h=h.map((function(t){return t*v})),n.midX=l.cx+h[0],n.midY=l.cy+h[1],n.midVector=h}else n.midX=n.segpts[f],n.midY=n.segpts[f+1]}}},kc.checkForInvalidEdgeWarning=function(t){var n=t[0]._private.rscratch;n.nodesOverlap||St(n.startX)&&St(n.startY)&&St(n.endX)&&St(n.endY)?n.loggedErr=!1:n.loggedErr||(n.loggedErr=!0,Qn("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},kc.findEdgeControlPoints=function(t){var n=this;if(t&&0!==t.length){for(var r=this,e=r.cy.hasCompoundNodes(),i={map:new sr,get:function(t){var n=this.map.get(t[0]);return null!=n?n.get(t[1]):null},set:function(t,n){var r=this.map.get(t[0]);null==r&&(r=new sr,this.map.set(t[0],r)),r.set(t[1],n)}},a=[],o=[],u=0;u<t.length;u++){var s=t[u],f=s._private,c=s.pstyle("curve-style").value;if(!s.removed()&&s.takesUpSpace())if("haystack"!==c){var l="unbundled-bezier"===c||c.endsWith("segments")||"straight"===c||"straight-triangle"===c||c.endsWith("taxi"),h="unbundled-bezier"===c||"bezier"===c,v=f.source,d=f.target,g=[v.poolIndex(),d.poolIndex()].sort(),p=i.get(g);null==p&&(p={eles:[]},i.set(g,p),a.push(g)),p.eles.push(s),l&&(p.hasUnbundled=!0),h&&(p.hasBezier=!0)}else o.push(s)}for(var y=function(t){var o=a[t],u=i.get(o),s=void 0;if(!u.hasUnbundled){var f=u.eles[0].parallelEdges().filter((function(t){return t.isBundledBezier()}));ar(u.eles),f.forEach((function(t){return u.eles.push(t)})),u.eles.sort((function(t,n){return t.poolIndex()-n.poolIndex()}))}var c=u.eles[0],l=c.source(),h=c.target();if(l.poolIndex()>h.poolIndex()){var v=l;l=h,h=v}var d=u.srcPos=l.position(),g=u.tgtPos=h.position(),p=u.srcW=l.outerWidth(),y=u.srcH=l.outerHeight(),m=u.tgtW=h.outerWidth(),b=u.tgtH=h.outerHeight(),w=u.srcShape=r.nodeShapes[n.getNodeShape(l)],x=u.tgtShape=r.nodeShapes[n.getNodeShape(h)],M=u.srcCornerRadius="auto"===l.pstyle("corner-radius").value?"auto":l.pstyle("corner-radius").pfValue,k=u.tgtCornerRadius="auto"===h.pstyle("corner-radius").value?"auto":h.pstyle("corner-radius").pfValue,E=u.tgtRs=h._private.rscratch,S=u.srcRs=l._private.rscratch;u.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var A=0;A<u.eles.length;A++){var z=u.eles[A],B=z[0]._private.rscratch,C=z.pstyle("curve-style").value,T="unbundled-bezier"===C||C.endsWith("segments")||C.endsWith("taxi"),O=!l.same(z.source());if(!u.calculatedIntersection&&l!==h&&(u.hasBezier||u.hasUnbundled)){u.calculatedIntersection=!0;var P=w.intersectLine(d.x,d.y,p,y,g.x,g.y,0,M,S),N=u.srcIntn=P,j=x.intersectLine(g.x,g.y,m,b,d.x,d.y,0,k,E),F=u.tgtIntn=j,D=u.intersectionPts={x1:P[0],x2:j[0],y1:P[1],y2:j[1]},I=u.posPts={x1:d.x,x2:g.x,y1:d.y,y2:g.y},$=j[1]-P[1],L=j[0]-P[0],R=Math.sqrt(L*L+$*$),_=u.vector={x:L,y:$},q=u.vectorNorm={x:_.x/R,y:_.y/R},V={x:-q.y,y:q.x};u.nodesOverlap=!St(R)||x.checkPoint(P[0],P[1],0,m,b,g.x,g.y,k,E)||w.checkPoint(j[0],j[1],0,p,y,d.x,d.y,M,S),u.vectorNormInverse=V,s={nodesOverlap:u.nodesOverlap,dirCounts:u.dirCounts,calculatedIntersection:!0,hasBezier:u.hasBezier,hasUnbundled:u.hasUnbundled,eles:u.eles,srcPos:g,srcRs:E,tgtPos:d,tgtRs:S,srcW:m,srcH:b,tgtW:p,tgtH:y,srcIntn:F,tgtIntn:N,srcShape:x,tgtShape:w,posPts:{x1:I.x2,y1:I.y2,x2:I.x1,y2:I.y1},intersectionPts:{x1:D.x2,y1:D.y2,x2:D.x1,y2:D.y1},vector:{x:-_.x,y:-_.y},vectorNorm:{x:-q.x,y:-q.y},vectorNormInverse:{x:-V.x,y:-V.y}}}var U=O?s:u;B.nodesOverlap=U.nodesOverlap,B.srcIntn=U.srcIntn,B.tgtIntn=U.tgtIntn,B.isRound=C.startsWith("round"),e&&(l.isParent()||l.isChild()||h.isParent()||h.isChild())&&(l.parents().anySame(h)||h.parents().anySame(l)||l.same(h)&&l.isParent())?n.findCompoundLoopPoints(z,U,A,T):l===h?n.findLoopPoints(z,U,A,T):C.endsWith("segments")?n.findSegmentsPoints(z,U):C.endsWith("taxi")?n.findTaxiPoints(z,U):"straight"===C||!T&&u.eles.length%2==1&&A===Math.floor(u.eles.length/2)?n.findStraightEdgePoints(z):n.findBezierPoints(z,U,A,T,O),n.findEndpoints(z),n.tryToCorrectInvalidPoints(z,U),n.checkForInvalidEdgeWarning(z),n.storeAllpts(z),n.storeEdgeProjections(z),n.calculateArrowAngles(z),n.recalculateEdgeLabelProjections(z),n.calculateLabelAngles(z)}},m=0;m<a.length;m++)y(m);this.findHaystackPoints(o)}},kc.getSegmentPoints=function(t){var n=t[0]._private.rscratch;if(this.recalculateRenderedStyle(t),"segments"===n.edgeType)return Ec(n.segpts)},kc.getControlPoints=function(t){var n=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var r=n.edgeType;if("bezier"===r||"multibezier"===r||"self"===r||"compound"===r)return Ec(n.ctrlpts)},kc.getEdgeMidpoint=function(t){var n=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:n.midX,y:n.midY}};var Sc={manualEndptToPx:function(t,n){var r=t.position(),e=t.outerWidth(),i=t.outerHeight(),a=t._private.rscratch;if(2===n.value.length){var o=[n.pfValue[0],n.pfValue[1]];return"%"===n.units[0]&&(o[0]=o[0]*e),"%"===n.units[1]&&(o[1]=o[1]*i),o[0]+=r.x,o[1]+=r.y,o}var u=n.pfValue[0];u=-Math.PI/2+u;var s=2*Math.max(e,i),f=[r.x+Math.cos(u)*s,r.y+Math.sin(u)*s];return this.nodeShapes[this.getNodeShape(t)].intersectLine(r.x,r.y,e,i,f[0],f[1],0,"auto"===t.pstyle("corner-radius").value?"auto":t.pstyle("corner-radius").pfValue,a)},findEndpoints:function(t){var n,r,e,i,a,o=this,u=t.source()[0],s=t.target()[0],f=u.position(),c=s.position(),l=t.pstyle("target-arrow-shape").value,h=t.pstyle("source-arrow-shape").value,v=t.pstyle("target-distance-from-node").pfValue,d=t.pstyle("source-distance-from-node").pfValue,g=u._private.rscratch,p=s._private.rscratch,y=t.pstyle("curve-style").value,m=t._private.rscratch,b=m.edgeType,w="self"===b||"compound"===b,x="bezier"===b||"multibezier"===b||w,M="bezier"!==b,k="straight"===b||"segments"===b,E="segments"===b,S=x||M||k,A=w||"taxi"===y,z=t.pstyle("source-endpoint"),B=A?"outside-to-node":z.value,C="auto"===u.pstyle("corner-radius").value?"auto":u.pstyle("corner-radius").pfValue,T=t.pstyle("target-endpoint"),O=A?"outside-to-node":T.value,P="auto"===s.pstyle("corner-radius").value?"auto":s.pstyle("corner-radius").pfValue;if(m.srcManEndpt=z,m.tgtManEndpt=T,x){var N=[m.ctrlpts[0],m.ctrlpts[1]];r=M?[m.ctrlpts[m.ctrlpts.length-2],m.ctrlpts[m.ctrlpts.length-1]]:N,e=N}else if(k){var j=E?m.segpts.slice(0,2):[c.x,c.y];r=E?m.segpts.slice(m.segpts.length-2):[f.x,f.y],e=j}if("inside-to-node"===O)n=[c.x,c.y];else if(T.units)n=this.manualEndptToPx(s,T);else if("outside-to-line"===O)n=m.tgtIntn;else if("outside-to-node"===O||"outside-to-node-or-label"===O?i=r:"outside-to-line"!==O&&"outside-to-line-or-label"!==O||(i=[f.x,f.y]),n=o.nodeShapes[this.getNodeShape(s)].intersectLine(c.x,c.y,s.outerWidth(),s.outerHeight(),i[0],i[1],0,P,p),"outside-to-node-or-label"===O||"outside-to-line-or-label"===O){var F=s._private.rscratch,D=F.labelWidth,I=F.labelHeight,$=F.labelX,L=F.labelY,R=D/2,_=I/2,q=s.pstyle("text-valign").value;"top"===q?L-=_:"bottom"===q&&(L+=_);var V=s.pstyle("text-halign").value;"left"===V?$-=R:"right"===V&&($+=R);var U=fe(i[0],i[1],[$-R,L-_,$+R,L-_,$+R,L+_,$-R,L+_],c.x,c.y);if(U.length>0){var W=f,Z=Dr(W,Or(n)),H=Dr(W,Or(U)),K=Z;if(H<Z&&(n=U,K=H),U.length>2)Dr(W,{x:U[2],y:U[3]})<K&&(n=[U[2],U[3]])}}var G=ce(n,r,o.arrowShapes[l].spacing(t)+v),Y=ce(n,r,o.arrowShapes[l].gap(t)+v);if(m.endX=Y[0],m.endY=Y[1],m.arrowEndX=G[0],m.arrowEndY=G[1],"inside-to-node"===B)n=[f.x,f.y];else if(z.units)n=this.manualEndptToPx(u,z);else if("outside-to-line"===B)n=m.srcIntn;else if("outside-to-node"===B||"outside-to-node-or-label"===B?a=e:"outside-to-line"!==B&&"outside-to-line-or-label"!==B||(a=[c.x,c.y]),n=o.nodeShapes[this.getNodeShape(u)].intersectLine(f.x,f.y,u.outerWidth(),u.outerHeight(),a[0],a[1],0,C,g),"outside-to-node-or-label"===B||"outside-to-line-or-label"===B){var X=u._private.rscratch,Q=X.labelWidth,J=X.labelHeight,tt=X.labelX,nt=X.labelY,rt=Q/2,et=J/2,it=u.pstyle("text-valign").value;"top"===it?nt-=et:"bottom"===it&&(nt+=et);var at=u.pstyle("text-halign").value;"left"===at?tt-=rt:"right"===at&&(tt+=rt);var ot=fe(a[0],a[1],[tt-rt,nt-et,tt+rt,nt-et,tt+rt,nt+et,tt-rt,nt+et],f.x,f.y);if(ot.length>0){var ut=c,st=Dr(ut,Or(n)),ft=Dr(ut,Or(ot)),ct=st;if(ft<st&&(n=[ot[0],ot[1]],ct=ft),ot.length>2)Dr(ut,{x:ot[2],y:ot[3]})<ct&&(n=[ot[2],ot[3]])}}var lt=ce(n,e,o.arrowShapes[h].spacing(t)+d),ht=ce(n,e,o.arrowShapes[h].gap(t)+d);m.startX=ht[0],m.startY=ht[1],m.arrowStartX=lt[0],m.arrowStartY=lt[1],S&&(St(m.startX)&&St(m.startY)&&St(m.endX)&&St(m.endY)?m.badLine=!1:m.badLine=!0)},getSourceEndpoint:function(t){var n=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),"haystack"===n.edgeType?{x:n.haystackPts[0],y:n.haystackPts[1]}:{x:n.arrowStartX,y:n.arrowStartY}},getTargetEndpoint:function(t){var n=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),"haystack"===n.edgeType?{x:n.haystackPts[2],y:n.haystackPts[3]}:{x:n.arrowEndX,y:n.arrowEndY}}},Ac={};function zc(t,n,r){for(var e=function(t,n,r,e){return $r(t,n,r,e)},i=n._private.rstyle.bezierPts,a=0;a<t.bezierProjPcts.length;a++){var o=t.bezierProjPcts[a];i.push({x:e(r[0],r[2],r[4],o),y:e(r[1],r[3],r[5],o)})}}Ac.storeEdgeProjections=function(t){var n=t._private,r=n.rscratch,e=r.edgeType;if(n.rstyle.bezierPts=null,n.rstyle.linePts=null,n.rstyle.haystackPts=null,"multibezier"===e||"bezier"===e||"self"===e||"compound"===e){n.rstyle.bezierPts=[];for(var i=0;i+5<r.allpts.length;i+=4)zc(this,t,r.allpts.slice(i,i+6))}else if("segments"===e){var a=n.rstyle.linePts=[];for(i=0;i+1<r.allpts.length;i+=2)a.push({x:r.allpts[i],y:r.allpts[i+1]})}else if("haystack"===e){var o=r.haystackPts;n.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}n.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth},Ac.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var Bc={recalculateNodeLabelProjection:function(t){var n=t.pstyle("label").strValue;if(!Pt(n)){var r,e,i=t._private,a=t.width(),o=t.height(),u=t.padding(),s=t.position(),f=t.pstyle("text-halign").strValue,c=t.pstyle("text-valign").strValue,l=i.rscratch,h=i.rstyle;switch(f){case"left":r=s.x-a/2-u;break;case"right":r=s.x+a/2+u;break;default:r=s.x}switch(c){case"top":e=s.y-o/2-u;break;case"bottom":e=s.y+o/2+u;break;default:e=s.y}l.labelX=r,l.labelY=e,h.labelX=r,h.labelY=e,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}}},Cc=function(t,n){var r=Math.atan(n/t);return 0===t&&r<0&&(r*=-1),r},Tc=function(t,n){var r=n.x-t.x,e=n.y-t.y;return Cc(r,e)};Bc.recalculateEdgeLabelProjections=function(t){var n,r=t._private,e=r.rscratch,i=this,a={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(a.mid||a.source||a.target){n={x:e.midX,y:e.midY};var o=function(t,n,e){ur(r.rscratch,t,n,e),ur(r.rstyle,t,n,e)};o("labelX",null,n.x),o("labelY",null,n.y);var u=Cc(e.midDispX,e.midDispY);o("labelAutoAngle",null,u);var s=function t(){if(t.cache)return t.cache;for(var n=[],a=0;a+5<e.allpts.length;a+=4){var o={x:e.allpts[a],y:e.allpts[a+1]},u={x:e.allpts[a+2],y:e.allpts[a+3]},s={x:e.allpts[a+4],y:e.allpts[a+5]};n.push({p0:o,p1:u,p2:s,startDist:0,length:0,segments:[]})}var f=r.rstyle.bezierPts,c=i.bezierProjPcts.length;function l(t,n,r,e,i){var a=Fr(n,r),o=t.segments[t.segments.length-1],u={p0:n,p1:r,t0:e,t1:i,startDist:o?o.startDist+o.length:0,length:a};t.segments.push(u),t.length+=a}for(var h=0;h<n.length;h++){var v=n[h],d=n[h-1];d&&(v.startDist=d.startDist+d.length),l(v,v.p0,f[h*c],0,i.bezierProjPcts[0]);for(var g=0;g<c-1;g++)l(v,f[h*c+g],f[h*c+g+1],i.bezierProjPcts[g],i.bezierProjPcts[g+1]);l(v,f[h*c+c-1],v.p2,i.bezierProjPcts[c-1],1)}return t.cache=n},f=function(r){var i,u="source"===r;if(a[r]){var f=t.pstyle(r+"-text-offset").pfValue;switch(e.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var c,l=s(),h=0,v=0,d=0;d<l.length;d++){for(var g=l[u?d:l.length-1-d],p=0;p<g.segments.length;p++){var y=g.segments[u?p:g.segments.length-1-p],m=d===l.length-1&&p===g.segments.length-1;if(h=v,(v+=y.length)>=f||m){c={cp:g,segment:y};break}}if(c)break}var b=c.cp,w=c.segment,x=(f-h)/w.length,M=w.t1-w.t0,k=u?w.t0+M*x:w.t1-M*x;k=Rr(0,k,1),n=Lr(b.p0,b.p1,b.p2,k),i=function(t,n,r,e){var i=Rr(0,e-.001,1),a=Rr(0,e+.001,1),o=Lr(t,n,r,i),u=Lr(t,n,r,a);return Tc(o,u)}(b.p0,b.p1,b.p2,k);break;case"straight":case"segments":case"haystack":for(var E,S,A,z,B=0,C=e.allpts.length,T=0;T+3<C&&(u?(A={x:e.allpts[T],y:e.allpts[T+1]},z={x:e.allpts[T+2],y:e.allpts[T+3]}):(A={x:e.allpts[C-2-T],y:e.allpts[C-1-T]},z={x:e.allpts[C-4-T],y:e.allpts[C-3-T]}),S=B,!((B+=E=Fr(A,z))>=f));T+=2);var O=(f-S)/E;O=Rr(0,O,1),n=function(t,n,r,e){var i=n.x-t.x,a=n.y-t.y,o=Fr(t,n),u=i/o,s=a/o;return r=r??0,e=null!=e?e:r*o,{x:t.x+u*e,y:t.y+s*e}}(A,z,O),i=Tc(A,z)}o("labelX",r,n.x),o("labelY",r,n.y),o("labelAutoAngle",r,i)}};f("source"),f("target"),this.applyLabelDimensions(t)}},Bc.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))},Bc.applyPrefixedLabelDimensions=function(t,n){var r=t._private,e=this.getLabelText(t,n),i=this.calculateLabelDimensions(t,e),a=t.pstyle("line-height").pfValue,o=t.pstyle("text-wrap").strValue,u=or(r.rscratch,"labelWrapCachedLines",n)||[],s="wrap"!==o?1:Math.max(u.length,1),f=i.height/s,c=f*a,l=i.width,h=i.height+(s-1)*(a-1)*f;ur(r.rstyle,"labelWidth",n,l),ur(r.rscratch,"labelWidth",n,l),ur(r.rstyle,"labelHeight",n,h),ur(r.rscratch,"labelHeight",n,h),ur(r.rscratch,"labelLineHeight",n,c)},Bc.getLabelText=function(t,n){var r=t._private,e=n?n+"-":"",i=t.pstyle(e+"label").strValue,a=t.pstyle("text-transform").value,o=function(t,e){return e?(ur(r.rscratch,t,n,e),e):or(r.rscratch,t,n)};if(!i)return"";"none"==a||("uppercase"==a?i=i.toUpperCase():"lowercase"==a&&(i=i.toLowerCase()));var u=t.pstyle("text-wrap").value;if("wrap"===u){var s=o("labelKey");if(null!=s&&o("labelWrapKey")===s)return o("labelWrapCachedText");for(var f=i.split("\n"),c=t.pstyle("text-max-width").pfValue,l="anywhere"===t.pstyle("text-overflow-wrap").value,h=[],v=/[\s\u200b]+|$/g,d=0;d<f.length;d++){var g=f[d],p=this.calculateLabelDimensions(t,g).width;if(l){var y=g.split("").join("");g=y}if(p>c){var m,b="",w=0,x=vt(g.matchAll(v));try{for(x.s();!(m=x.n()).done;){var M=m.value,k=M[0],E=g.substring(w,M.index);w=M.index+k.length;var S=0===b.length?E:b+E+k;this.calculateLabelDimensions(t,S).width<=c?b+=E+k:(b&&h.push(b),b=E+k)}}catch(t){x.e(t)}finally{x.f()}b.match(/^[\s\u200b]+$/)||h.push(b)}else h.push(g)}o("labelWrapCachedLines",h),i=o("labelWrapCachedText",h.join("\n")),o("labelWrapKey",s)}else if("ellipsis"===u){var A=t.pstyle("text-max-width").pfValue,z="",B=!1;if(this.calculateLabelDimensions(t,i).width<A)return i;for(var C=0;C<i.length;C++){if(this.calculateLabelDimensions(t,z+i[C]+"").width>A)break;z+=i[C],C===i.length-1&&(B=!0)}return B||(z+=""),z}return i},Bc.getLabelJustification=function(t){var n=t.pstyle("text-justification").strValue,r=t.pstyle("text-halign").strValue;if("auto"!==n)return n;if(!t.isNode())return"center";switch(r){case"left":return"right";case"right":return"left";default:return"center"}},Bc.calculateLabelDimensions=function(t,n){var r=this,e=r.cy.window().document,i=Ln(n,t._private.labelDimsKey),a=r.labelDimCache||(r.labelDimCache=[]),o=a[i];if(null!=o)return o;var u=t.pstyle("font-style").strValue,s=t.pstyle("font-size").pfValue,f=t.pstyle("font-family").strValue,c=t.pstyle("font-weight").strValue,l=this.labelCalcCanvas,h=this.labelCalcCanvasContext;if(!l){l=this.labelCalcCanvas=e.createElement("canvas"),h=this.labelCalcCanvasContext=l.getContext("2d");var v=l.style;v.position="absolute",v.left="-9999px",v.top="-9999px",v.zIndex="-1",v.visibility="hidden",v.pointerEvents="none"}h.font="".concat(u," ").concat(c," ").concat(s,"px ").concat(f);for(var d=0,g=0,p=n.split("\n"),y=0;y<p.length;y++){var m=p[y],b=h.measureText(m),w=Math.ceil(b.width),x=s;d=Math.max(w,d),g+=x}return d+=0,g+=0,a[i]={width:d,height:g}},Bc.calculateLabelAngle=function(t,n){var r=t._private.rscratch,e=t.isEdge(),i=n?n+"-":"",a=t.pstyle(i+"text-rotation"),o=a.strValue;return"none"===o?0:e&&"autorotate"===o?r.labelAutoAngle:"autorotate"===o?0:a.pfValue},Bc.calculateLabelAngles=function(t){var n=this,r=t.isEdge(),e=t._private.rscratch;e.labelAngle=n.calculateLabelAngle(t),r&&(e.sourceLabelAngle=n.calculateLabelAngle(t,"source"),e.targetLabelAngle=n.calculateLabelAngle(t,"target"))};var Oc={},Pc=!1;Oc.getNodeShape=function(t){var n=t.pstyle("shape").value;if("cutrectangle"===n&&(t.width()<28||t.height()<28))return Pc||(Qn("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Pc=!0),"rectangle";if(t.isParent())return"rectangle"===n||"roundrectangle"===n||"round-rectangle"===n||"cutrectangle"===n||"cut-rectangle"===n||"barrel"===n?n:"rectangle";if("polygon"===n){var r=t.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(r).name}return n};var Nc={registerCalculationListeners:function(){var t=this.cy,n=t.collection(),r=this,e=function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(n.merge(t),r)for(var e=0;e<t.length;e++){var i=t[e]._private.rstyle;i.clean=!1,i.cleanConnected=!1}};r.binder(t).on("bounds.* dirty.*",(function(t){var n=t.target;e(n)})).on("style.* background.*",(function(t){var n=t.target;e(n,!1)}));var i=function(i){if(i){var a=r.onUpdateEleCalcsFns;n.cleanStyle();for(var o=0;o<n.length;o++){var u=n[o],s=u._private.rstyle;u.isNode()&&!s.cleanConnected&&(e(u.connectedEdges()),s.cleanConnected=!0)}if(a)for(var f=0;f<a.length;f++){(0,a[f])(i,n)}r.recalculateRenderedStyle(n),n=t.collection()}};r.flushRenderedStyleQueue=function(){i(!0)},r.beforeRender(i,r.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(t){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(t)},recalculateRenderedStyle:function(t,n){var r=function(t){return t._private.rstyle.cleanConnected},e=[],i=[];if(!this.destroyed){void 0===n&&(n=!0);for(var a=0;a<t.length;a++){var o=t[a],u=o._private,s=u.rstyle;!o.isEdge()||r(o.source())&&r(o.target())||(s.clean=!1),n&&s.clean||o.removed()||"none"!==o.pstyle("display").value&&("nodes"===u.group?i.push(o):e.push(o),s.clean=!0)}for(var f=0;f<i.length;f++){var c=i[f],l=c._private.rstyle,h=c.position();this.recalculateNodeLabelProjection(c),l.nodeX=h.x,l.nodeY=h.y,l.nodeW=c.pstyle("width").pfValue,l.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(e);for(var v=0;v<e.length;v++){var d=e[v]._private,g=d.rstyle,p=d.rscratch;g.srcX=p.arrowStartX,g.srcY=p.arrowStartY,g.tgtX=p.arrowEndX,g.tgtY=p.arrowEndY,g.midX=p.midX,g.midY=p.midY,g.labelAngle=p.labelAngle,g.sourceLabelAngle=p.sourceLabelAngle,g.targetLabelAngle=p.targetLabelAngle}}}},jc={updateCachedGrabbedEles:function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var n=[],r=0;r<t.length;r++){var e=(i=t[r])._private.rscratch;i.grabbed()&&!i.isParent()?n.push(i):e.inDragLayer?t.drag.push(i):t.nondrag.push(i)}for(r=0;r<n.length;r++){var i=n[r];t.drag.push(i)}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(t){if(t||!this.cachedZSortedEles){var n=this.cy.mutableElements().toArray();n.sort(Gu),n.interactive=n.filter((function(t){return t.interactive()})),this.cachedZSortedEles=n,this.updateCachedGrabbedEles()}else n=this.cachedZSortedEles;return n}},Fc={};[Qf,Jf,kc,Sc,Ac,Bc,Oc,Nc,jc].forEach((function(t){Wt(Fc,t)}));var Dc={getCachedImage:function(t,n,r){var e=this.imageCache=this.imageCache||{},i=e[t];if(i)return i.image.complete||i.image.addEventListener("load",r),i.image;var a=(i=e[t]=e[t]||{}).image=new Image;a.addEventListener("load",r),a.addEventListener("error",(function(){a.error=!0}));var o="data:";return t.substring(0,5).toLowerCase()===o||(n="null"===n?null:n,a.crossOrigin=n),a.src=t,a}},Ic={registerBinding:function(t,n,r,e){var i=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(t)){for(var a=[],o=0;o<t.length;o++){var u=t[o];if(void 0!==u){var s=this.binder(u);a.push(s.on.apply(s,i))}}return a}return(s=this.binder(t)).on.apply(s,i)}};Ic.binder=function(t){var n,r=this,e=r.cy.window(),i=t===e||t===e.document||t===e.document.body||(n=t,"undefined"!=typeof HTMLElement&&n instanceof HTMLElement);if(null==r.supportsPassiveEvents){var a=!1;try{var o=Object.defineProperty({},"passive",{get:function(){return a=!0,!0}});e.addEventListener("test",null,o)}catch(t){}r.supportsPassiveEvents=a}var u=function(n,e,a){var o=Array.prototype.slice.call(arguments);return i&&r.supportsPassiveEvents&&(o[2]={capture:null!=a&&a,passive:!1,once:!1}),r.bindings.push({target:t,args:o}),(t.addEventListener||t.on).apply(t,o),this};return{on:u,addEventListener:u,addListener:u,bind:u}},Ic.nodeIsDraggable=function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()},Ic.nodeIsGrabbable=function(t){return this.nodeIsDraggable(t)&&t.interactive()},Ic.load=function(){var t=this,n=t.cy.window(),r=function(t){return t.selected()},e=function(n,r,e,i){null==n&&(n=t.cy);for(var a=0;a<r.length;a++){var o=r[a];n.emit({originalEvent:e,type:o,position:i})}},i=function(t){return t.shiftKey||t.metaKey||t.ctrlKey},a=function(n,r){var e=!0;if(t.cy.hasCompoundNodes()&&n&&n.pannable())for(var i=0;r&&i<r.length;i++){if((n=r[i]).isNode()&&n.isParent()&&!n.pannable()){e=!1;break}}else e=!0;return e},o=function(t){t[0]._private.rscratch.inDragLayer=!0},u=function(t){t[0]._private.rscratch.isGrabTarget=!0},s=function(t,n){var r=n.addToList;r.has(t)||!t.grabbable()||t.locked()||(r.merge(t),function(t){t[0]._private.grabbed=!0}(t))},f=function(n,r){r=r||{};var e=n.cy().hasCompoundNodes();r.inDragLayer&&(n.forEach(o),n.neighborhood().stdFilter((function(t){return!e||t.isEdge()})).forEach(o)),r.addToList&&n.forEach((function(t){s(t,r)})),function(t,n){if(t.cy().hasCompoundNodes()&&(null!=n.inDragLayer||null!=n.addToList)){var r=t.descendants();n.inDragLayer&&(r.forEach(o),r.connectedEdges().forEach(o)),n.addToList&&s(r,n)}}(n,r),h(n,{inDragLayer:r.inDragLayer}),t.updateCachedGrabbedEles()},c=f,l=function(n){n&&(t.getCachedZSortedEles().forEach((function(t){!function(t){t[0]._private.grabbed=!1}(t),function(t){t[0]._private.rscratch.inDragLayer=!1}(t),function(t){t[0]._private.rscratch.isGrabTarget=!1}(t)})),t.updateCachedGrabbedEles())},h=function(t,n){if((null!=n.inDragLayer||null!=n.addToList)&&t.cy().hasCompoundNodes()){var r=t.ancestors().orphans();if(!r.same(t)){var e=r.descendants().spawnSelf().merge(r).unmerge(t).unmerge(t.descendants()),i=e.connectedEdges();n.inDragLayer&&(i.forEach(o),e.forEach(o)),n.addToList&&e.forEach((function(t){s(t,n)}))}}},v=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},d="undefined"!=typeof MutationObserver,g="undefined"!=typeof ResizeObserver;d?(t.removeObserver=new MutationObserver((function(n){for(var r=0;r<n.length;r++){var e=n[r].removedNodes;if(e)for(var i=0;i<e.length;i++){if(e[i]===t.container){t.destroy();break}}}})),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",(function(n){t.destroy()}));var p=An((function(){t.cy.resize()}),100);d&&(t.styleObserver=new MutationObserver(p),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(n,"resize",p),g&&(t.resizeObserver=new ResizeObserver(p),t.resizeObserver.observe(t.container));var y=function(){t.invalidateContainerClientCoordsCache()};!function(t,n){for(;null!=t;)n(t),t=t.parentNode}(t.container,(function(n){t.registerBinding(n,"transitionend",y),t.registerBinding(n,"animationend",y),t.registerBinding(n,"scroll",y)})),t.registerBinding(t.container,"contextmenu",(function(t){t.preventDefault()}));var m=function(n){for(var r=t.findContainerClientCoords(),e=r[0],i=r[1],a=r[2],o=r[3],u=n.touches?n.touches:[n],s=!1,f=0;f<u.length;f++){var c=u[f];if(e<=c.clientX&&c.clientX<=e+a&&i<=c.clientY&&c.clientY<=i+o){s=!0;break}}if(!s)return!1;for(var l=t.container,h=n.target.parentNode,v=!1;h;){if(h===l){v=!0;break}h=h.parentNode}return!!v};t.registerBinding(t.container,"mousedown",(function(n){if(m(n)&&(1!==t.hoverData.which||1===n.which)){n.preventDefault(),v(),t.hoverData.capture=!0,t.hoverData.which=n.which;var r=t.cy,i=[n.clientX,n.clientY],a=t.projectIntoViewport(i[0],i[1]),o=t.selection,s=t.findNearestElements(a[0],a[1],!0,!1),l=s[0],h=t.dragData.possibleDragElements;t.hoverData.mdownPos=a,t.hoverData.mdownGPos=i;if(3==n.which){t.hoverData.cxtStarted=!0;var d={originalEvent:n,type:"cxttapstart",position:{x:a[0],y:a[1]}};l?(l.activate(),l.emit(d),t.hoverData.down=l):r.emit(d),t.hoverData.downTime=(new Date).getTime(),t.hoverData.cxtDragged=!1}else if(1==n.which){if(l&&l.activate(),null!=l&&t.nodeIsGrabbable(l)){var g=function(t){return{originalEvent:n,type:t,position:{x:a[0],y:a[1]}}};if(u(l),l.selected()){h=t.dragData.possibleDragElements=r.collection();var p=r.$((function(n){return n.isNode()&&n.selected()&&t.nodeIsGrabbable(n)}));f(p,{addToList:h}),l.emit(g("grabon")),p.forEach((function(t){t.emit(g("grab"))}))}else h=t.dragData.possibleDragElements=r.collection(),c(l,{addToList:h}),l.emit(g("grabon")).emit(g("grab"));t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=l,t.hoverData.downs=s,t.hoverData.downTime=(new Date).getTime(),e(l,["mousedown","tapstart","vmousedown"],n,{x:a[0],y:a[1]}),null==l?(o[4]=1,t.data.bgActivePosistion={x:a[0],y:a[1]},t.redrawHint("select",!0),t.redraw()):l.pannable()&&(o[4]=1),t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout((function(){if(!t.hoverData.tapholdCancelled){var e=t.hoverData.down;e?e.emit({originalEvent:n,type:"taphold",position:{x:a[0],y:a[1]}}):r.emit({originalEvent:n,type:"taphold",position:{x:a[0],y:a[1]}})}}),t.tapholdDuration)}o[0]=o[2]=a[0],o[1]=o[3]=a[1]}}),!1);var b,w,x,M=function(t){var n=t.getRootNode();if(n&&11===n.nodeType&&void 0!==n.host)return n}(t.container);t.registerBinding([n,M],"mousemove",(function(n){if(t.hoverData.capture||m(n)){var r=!1,o=t.cy,u=o.zoom(),s=[n.clientX,n.clientY],c=t.projectIntoViewport(s[0],s[1]),h=t.hoverData.mdownPos,v=t.hoverData.mdownGPos,d=t.selection,g=null;t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.selecting||(g=t.findNearestElement(c[0],c[1],!0,!1));var p,y=t.hoverData.last,b=t.hoverData.down,w=[c[0]-d[2],c[1]-d[3]],x=t.dragData.possibleDragElements;if(v){var M=s[0]-v[0],k=M*M,E=s[1]-v[1],S=k+E*E;t.hoverData.isOverThresholdDrag=p=S>=t.desktopTapThreshold2}var A=i(n);p&&(t.hoverData.tapholdCancelled=!0);r=!0,e(g,["mousemove","vmousemove","tapdrag"],n,{x:c[0],y:c[1]});var z=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||o.emit({originalEvent:n,type:"boxstart",position:{x:c[0],y:c[1]}}),d[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(3===t.hoverData.which){if(p){var B={originalEvent:n,type:"cxtdrag",position:{x:c[0],y:c[1]}};b?b.emit(B):o.emit(B),t.hoverData.cxtDragged=!0,t.hoverData.cxtOver&&g===t.hoverData.cxtOver||(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:n,type:"cxtdragout",position:{x:c[0],y:c[1]}}),t.hoverData.cxtOver=g,g&&g.emit({originalEvent:n,type:"cxtdragover",position:{x:c[0],y:c[1]}}))}}else if(t.hoverData.dragging){if(r=!0,o.panningEnabled()&&o.userPanningEnabled()){var C;if(t.hoverData.justStartedPan){var T=t.hoverData.mdownPos;C={x:(c[0]-T[0])*u,y:(c[1]-T[1])*u},t.hoverData.justStartedPan=!1}else C={x:w[0]*u,y:w[1]*u};o.panBy(C),o.emit("dragpan"),t.hoverData.dragged=!0}c=t.projectIntoViewport(n.clientX,n.clientY)}else if(1!=d[4]||null!=b&&!b.pannable()){if(b&&b.pannable()&&b.active()&&b.unactivate(),b&&b.grabbed()||g==y||(y&&e(y,["mouseout","tapdragout"],n,{x:c[0],y:c[1]}),g&&e(g,["mouseover","tapdragover"],n,{x:c[0],y:c[1]}),t.hoverData.last=g),b)if(p){if(o.boxSelectionEnabled()&&A)b&&b.grabbed()&&(l(x),b.emit("freeon"),x.emit("free"),t.dragData.didDrag&&(b.emit("dragfreeon"),x.emit("dragfree"))),z();else if(b&&b.grabbed()&&t.nodeIsDraggable(b)){var O=!t.dragData.didDrag;O&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||f(x,{inDragLayer:!0});var P={x:0,y:0};if(St(w[0])&&St(w[1])&&(P.x+=w[0],P.y+=w[1],O)){var N=t.hoverData.dragDelta;N&&St(N[0])&&St(N[1])&&(P.x+=N[0],P.y+=N[1])}t.hoverData.draggingEles=!0,x.silentShift(P).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else!function(){var n=t.hoverData.dragDelta=t.hoverData.dragDelta||[];0===n.length?(n.push(w[0]),n.push(w[1])):(n[0]+=w[0],n[1]+=w[1])}();r=!0}else if(p){if(t.hoverData.dragging||!o.boxSelectionEnabled()||!A&&o.panningEnabled()&&o.userPanningEnabled()){if(!t.hoverData.selecting&&o.panningEnabled()&&o.userPanningEnabled()){a(b,t.hoverData.downs)&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,d[4]=0,t.data.bgActivePosistion=Or(h),t.redrawHint("select",!0),t.redraw())}}else z();b&&b.pannable()&&b.active()&&b.unactivate()}return d[2]=c[0],d[3]=c[1],r?(n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault(),!1):void 0}}),!1),t.registerBinding(n,"mouseup",(function(n){if((1!==t.hoverData.which||1===n.which||!t.hoverData.capture)&&t.hoverData.capture){t.hoverData.capture=!1;var a=t.cy,o=t.projectIntoViewport(n.clientX,n.clientY),u=t.selection,s=t.findNearestElement(o[0],o[1],!0,!1),f=t.dragData.possibleDragElements,c=t.hoverData.down,h=i(n);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,c&&c.unactivate(),3===t.hoverData.which){var v={originalEvent:n,type:"cxttapend",position:{x:o[0],y:o[1]}};if(c?c.emit(v):a.emit(v),!t.hoverData.cxtDragged){var d={originalEvent:n,type:"cxttap",position:{x:o[0],y:o[1]}};c?c.emit(d):a.emit(d)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(1===t.hoverData.which){if(e(s,["mouseup","tapend","vmouseup"],n,{x:o[0],y:o[1]}),t.dragData.didDrag||t.hoverData.dragged||t.hoverData.selecting||t.hoverData.isOverThresholdDrag||(e(c,["click","tap","vclick"],n,{x:o[0],y:o[1]}),w=!1,n.timeStamp-x<=a.multiClickDebounceTime()?(b&&clearTimeout(b),w=!0,x=null,e(c,["dblclick","dbltap","vdblclick"],n,{x:o[0],y:o[1]})):(b=setTimeout((function(){w||e(c,["oneclick","onetap","voneclick"],n,{x:o[0],y:o[1]})}),a.multiClickDebounceTime()),x=n.timeStamp)),null!=c||t.dragData.didDrag||t.hoverData.selecting||t.hoverData.dragged||i(n)||(a.$(r).unselect(["tapunselect"]),f.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=f=a.collection()),s!=c||t.dragData.didDrag||t.hoverData.selecting||null!=s&&s._private.selectable&&(t.hoverData.dragging||("additive"===a.selectionType()||h?s.selected()?s.unselect(["tapunselect"]):s.select(["tapselect"]):h||(a.$(r).unmerge(s).unselect(["tapunselect"]),s.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var g=a.collection(t.getAllInBox(u[0],u[1],u[2],u[3]));t.redrawHint("select",!0),g.length>0&&t.redrawHint("eles",!0),a.emit({type:"boxend",originalEvent:n,position:{x:o[0],y:o[1]}});var p=function(t){return t.selectable()&&!t.selected()};"additive"===a.selectionType()||h||a.$(r).unmerge(g).unselect(),g.emit("box").stdFilter(p).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!u[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var y=c&&c.grabbed();l(f),y&&(c.emit("freeon"),f.emit("free"),t.dragData.didDrag&&(c.emit("dragfreeon"),f.emit("dragfree")))}}u[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null,t.hoverData.which=null}}),!1);var k,E,S,A,z,B,C,T,O,P,N,j,F,D=function(n){if(!t.scrollingPage){var r=t.cy,e=r.zoom(),i=r.pan(),a=t.projectIntoViewport(n.clientX,n.clientY),o=[a[0]*e+i.x,a[1]*e+i.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||0!==t.selection[4])n.preventDefault();else if(r.panningEnabled()&&r.userPanningEnabled()&&r.zoomingEnabled()&&r.userZoomingEnabled()){var u;n.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout((function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()}),150),u=null!=n.deltaY?n.deltaY/-250:null!=n.wheelDeltaY?n.wheelDeltaY/1e3:n.wheelDelta/1e3,u*=t.wheelSensitivity,1===n.deltaMode&&(u*=33);var s=r.zoom()*Math.pow(10,u);"gesturechange"===n.type&&(s=t.gestureStartZoom*n.scale),r.zoom({level:s,renderedPosition:{x:o[0],y:o[1]}}),r.emit("gesturechange"===n.type?"pinchzoom":"scrollzoom")}}};t.registerBinding(t.container,"wheel",D,!0),t.registerBinding(n,"scroll",(function(n){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout((function(){t.scrollingPage=!1}),250)}),!0),t.registerBinding(t.container,"gesturestart",(function(n){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||n.preventDefault()}),!0),t.registerBinding(t.container,"gesturechange",(function(n){t.hasTouchStarted||D(n)}),!0),t.registerBinding(t.container,"mouseout",(function(n){var r=t.projectIntoViewport(n.clientX,n.clientY);t.cy.emit({originalEvent:n,type:"mouseout",position:{x:r[0],y:r[1]}})}),!1),t.registerBinding(t.container,"mouseover",(function(n){var r=t.projectIntoViewport(n.clientX,n.clientY);t.cy.emit({originalEvent:n,type:"mouseover",position:{x:r[0],y:r[1]}})}),!1);var I,$,L,R,_,q,V,U=function(t,n,r,e){return Math.sqrt((r-t)*(r-t)+(e-n)*(e-n))},W=function(t,n,r,e){return(r-t)*(r-t)+(e-n)*(e-n)};if(t.registerBinding(t.container,"touchstart",I=function(n){if(t.hasTouchStarted=!0,m(n)){v(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var r=t.cy,i=t.touchData.now,a=t.touchData.earlier;if(n.touches[0]){var o=t.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);i[0]=o[0],i[1]=o[1]}if(n.touches[1]){o=t.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);i[2]=o[0],i[3]=o[1]}if(n.touches[2]){o=t.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);i[4]=o[0],i[5]=o[1]}if(n.touches[1]){t.touchData.singleTouchMoved=!0,l(t.dragData.touchDragEles);var s=t.findContainerClientCoords();O=s[0],P=s[1],N=s[2],j=s[3],k=n.touches[0].clientX-O,E=n.touches[0].clientY-P,S=n.touches[1].clientX-O,A=n.touches[1].clientY-P,F=0<=k&&k<=N&&0<=S&&S<=N&&0<=E&&E<=j&&0<=A&&A<=j;var h=r.pan(),d=r.zoom();z=U(k,E,S,A),B=W(k,E,S,A),T=[((C=[(k+S)/2,(E+A)/2])[0]-h.x)/d,(C[1]-h.y)/d];if(B<4e4&&!n.touches[2]){var g=t.findNearestElement(i[0],i[1],!0,!0),p=t.findNearestElement(i[2],i[3],!0,!0);return g&&g.isNode()?(g.activate().emit({originalEvent:n,type:"cxttapstart",position:{x:i[0],y:i[1]}}),t.touchData.start=g):p&&p.isNode()?(p.activate().emit({originalEvent:n,type:"cxttapstart",position:{x:i[0],y:i[1]}}),t.touchData.start=p):r.emit({originalEvent:n,type:"cxttapstart",position:{x:i[0],y:i[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,void t.redraw()}}if(n.touches[2])r.boxSelectionEnabled()&&n.preventDefault();else if(n.touches[1]);else if(n.touches[0]){var y=t.findNearestElements(i[0],i[1],!0,!0),b=y[0];if(null!=b&&(b.activate(),t.touchData.start=b,t.touchData.starts=y,t.nodeIsGrabbable(b))){var w=t.dragData.touchDragEles=r.collection(),x=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),b.selected()?(x=r.$((function(n){return n.selected()&&t.nodeIsGrabbable(n)})),f(x,{addToList:w})):c(b,{addToList:w}),u(b);var M=function(t){return{originalEvent:n,type:t,position:{x:i[0],y:i[1]}}};b.emit(M("grabon")),x?x.forEach((function(t){t.emit(M("grab"))})):b.emit(M("grab"))}e(b,["touchstart","tapstart","vmousedown"],n,{x:i[0],y:i[1]}),null==b&&(t.data.bgActivePosistion={x:o[0],y:o[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout((function(){!1!==t.touchData.singleTouchMoved||t.pinching||t.touchData.selecting||e(t.touchData.start,["taphold"],n,{x:i[0],y:i[1]})}),t.tapholdDuration)}if(n.touches.length>=1){for(var D=t.touchData.startPosition=[null,null,null,null,null,null],I=0;I<i.length;I++)D[I]=a[I]=i[I];var $=n.touches[0];t.touchData.startGPosition=[$.clientX,$.clientY]}}},!1),t.registerBinding(n,"touchmove",$=function(n){var r=t.touchData.capture;if(r||m(n)){var i=t.selection,o=t.cy,u=t.touchData.now,s=t.touchData.earlier,c=o.zoom();if(n.touches[0]){var h=t.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);u[0]=h[0],u[1]=h[1]}if(n.touches[1]){h=t.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);u[2]=h[0],u[3]=h[1]}if(n.touches[2]){h=t.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);u[4]=h[0],u[5]=h[1]}var v,d=t.touchData.startGPosition;if(r&&n.touches[0]&&d){for(var g=[],p=0;p<u.length;p++)g[p]=u[p]-s[p];var y=n.touches[0].clientX-d[0],b=y*y,w=n.touches[0].clientY-d[1];v=b+w*w>=t.touchTapThreshold2}if(r&&t.touchData.cxt){n.preventDefault();var x=n.touches[0].clientX-O,M=n.touches[0].clientY-P,C=n.touches[1].clientX-O,N=n.touches[1].clientY-P,j=W(x,M,C,N);if(j/B>=2.25||j>=22500){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var D={originalEvent:n,type:"cxttapend",position:{x:u[0],y:u[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(D),t.touchData.start=null):o.emit(D)}}if(r&&t.touchData.cxt){D={originalEvent:n,type:"cxtdrag",position:{x:u[0],y:u[1]}};t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(D):o.emit(D),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var I=t.findNearestElement(u[0],u[1],!0,!0);t.touchData.cxtOver&&I===t.touchData.cxtOver||(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:n,type:"cxtdragout",position:{x:u[0],y:u[1]}}),t.touchData.cxtOver=I,I&&I.emit({originalEvent:n,type:"cxtdragover",position:{x:u[0],y:u[1]}}))}else if(r&&n.touches[2]&&o.boxSelectionEnabled())n.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||o.emit({originalEvent:n,type:"boxstart",position:{x:u[0],y:u[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,i[4]=1,i&&0!==i.length&&void 0!==i[0]?(i[2]=(u[0]+u[2]+u[4])/3,i[3]=(u[1]+u[3]+u[5])/3):(i[0]=(u[0]+u[2]+u[4])/3,i[1]=(u[1]+u[3]+u[5])/3,i[2]=(u[0]+u[2]+u[4])/3+1,i[3]=(u[1]+u[3]+u[5])/3+1),t.redrawHint("select",!0),t.redraw();else if(r&&n.touches[1]&&!t.touchData.didSelect&&o.zoomingEnabled()&&o.panningEnabled()&&o.userZoomingEnabled()&&o.userPanningEnabled()){if(n.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),J=t.dragData.touchDragEles){t.redrawHint("drag",!0);for(var $=0;$<J.length;$++){var L=J[$]._private;L.grabbed=!1,L.rscratch.inDragLayer=!1}}var R=t.touchData.start,_=(x=n.touches[0].clientX-O,M=n.touches[0].clientY-P,C=n.touches[1].clientX-O,N=n.touches[1].clientY-P,U(x,M,C,N)),q=_/z;if(F){var V=(x-k+(C-S))/2,Z=(M-E+(N-A))/2,H=o.zoom(),K=H*q,G=o.pan(),Y=T[0]*H+G.x,X=T[1]*H+G.y,Q={x:-K/H*(Y-G.x-V)+Y,y:-K/H*(X-G.y-Z)+X};if(R&&R.active()){var J=t.dragData.touchDragEles;l(J),t.redrawHint("drag",!0),t.redrawHint("eles",!0),R.unactivate().emit("freeon"),J.emit("free"),t.dragData.didDrag&&(R.emit("dragfreeon"),J.emit("dragfree"))}o.viewport({zoom:K,pan:Q,cancelOnFailedZoom:!0}),o.emit("pinchzoom"),z=_,k=x,E=M,S=C,A=N,t.pinching=!0}if(n.touches[0]){h=t.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);u[0]=h[0],u[1]=h[1]}if(n.touches[1]){h=t.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);u[2]=h[0],u[3]=h[1]}if(n.touches[2]){h=t.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);u[4]=h[0],u[5]=h[1]}}else if(n.touches[0]&&!t.touchData.didSelect){var tt=t.touchData.start,nt=t.touchData.last;if(t.hoverData.draggingEles||t.swipePanning||(I=t.findNearestElement(u[0],u[1],!0,!0)),r&&null!=tt&&n.preventDefault(),r&&null!=tt&&t.nodeIsDraggable(tt))if(v){J=t.dragData.touchDragEles;var rt=!t.dragData.didDrag;rt&&f(J,{inDragLayer:!0}),t.dragData.didDrag=!0;var et={x:0,y:0};if(St(g[0])&&St(g[1]))if(et.x+=g[0],et.y+=g[1],rt)t.redrawHint("eles",!0),(it=t.touchData.dragDelta)&&St(it[0])&&St(it[1])&&(et.x+=it[0],et.y+=it[1]);t.hoverData.draggingEles=!0,J.silentShift(et).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==s[0]&&t.touchData.startPosition[1]==s[1]&&t.redrawHint("eles",!0),t.redraw()}else{var it;0===(it=t.touchData.dragDelta=t.touchData.dragDelta||[]).length?(it.push(g[0]),it.push(g[1])):(it[0]+=g[0],it[1]+=g[1])}if(e(tt||I,["touchmove","tapdrag","vmousemove"],n,{x:u[0],y:u[1]}),tt&&tt.grabbed()||I==nt||(nt&&nt.emit({originalEvent:n,type:"tapdragout",position:{x:u[0],y:u[1]}}),I&&I.emit({originalEvent:n,type:"tapdragover",position:{x:u[0],y:u[1]}})),t.touchData.last=I,r)for($=0;$<u.length;$++)u[$]&&t.touchData.startPosition[$]&&v&&(t.touchData.singleTouchMoved=!0);if(r&&(null==tt||tt.pannable())&&o.panningEnabled()&&o.userPanningEnabled()){a(tt,t.touchData.starts)&&(n.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=Or(t.touchData.startPosition)),t.swipePanning?(o.panBy({x:g[0]*c,y:g[1]*c}),o.emit("dragpan")):v&&(t.swipePanning=!0,o.panBy({x:y*c,y:w*c}),o.emit("dragpan"),tt&&(tt.unactivate(),t.redrawHint("select",!0),t.touchData.start=null)));h=t.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);u[0]=h[0],u[1]=h[1]}}for(p=0;p<u.length;p++)s[p]=u[p];r&&n.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&null!=t.data.bgActivePosistion&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1),t.registerBinding(n,"touchcancel",L=function(n){var r=t.touchData.start;t.touchData.capture=!1,r&&r.unactivate()}),t.registerBinding(n,"touchend",R=function(n){var i=t.touchData.start;if(t.touchData.capture){0===n.touches.length&&(t.touchData.capture=!1),n.preventDefault();var a=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var o,u=t.cy,s=u.zoom(),f=t.touchData.now,c=t.touchData.earlier;if(n.touches[0]){var h=t.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);f[0]=h[0],f[1]=h[1]}if(n.touches[1]){h=t.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);f[2]=h[0],f[3]=h[1]}if(n.touches[2]){h=t.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);f[4]=h[0],f[5]=h[1]}if(i&&i.unactivate(),t.touchData.cxt){if(o={originalEvent:n,type:"cxttapend",position:{x:f[0],y:f[1]}},i?i.emit(o):u.emit(o),!t.touchData.cxtDragged){var v={originalEvent:n,type:"cxttap",position:{x:f[0],y:f[1]}};i?i.emit(v):u.emit(v)}return t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,void t.redraw()}if(!n.touches[2]&&u.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var d=u.collection(t.getAllInBox(a[0],a[1],a[2],a[3]));a[0]=void 0,a[1]=void 0,a[2]=void 0,a[3]=void 0,a[4]=0,t.redrawHint("select",!0),u.emit({type:"boxend",originalEvent:n,position:{x:f[0],y:f[1]}});d.emit("box").stdFilter((function(t){return t.selectable()&&!t.selected()})).select().emit("boxselect"),d.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(null!=i&&i.unactivate(),n.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(n.touches[1]);else if(n.touches[0]);else if(!n.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var g=t.dragData.touchDragEles;if(null!=i){var p=i._private.grabbed;l(g),t.redrawHint("drag",!0),t.redrawHint("eles",!0),p&&(i.emit("freeon"),g.emit("free"),t.dragData.didDrag&&(i.emit("dragfreeon"),g.emit("dragfree"))),e(i,["touchend","tapend","vmouseup","tapdragout"],n,{x:f[0],y:f[1]}),i.unactivate(),t.touchData.start=null}else{var y=t.findNearestElement(f[0],f[1],!0,!0);e(y,["touchend","tapend","vmouseup","tapdragout"],n,{x:f[0],y:f[1]})}var m=t.touchData.startPosition[0]-f[0],b=m*m,w=t.touchData.startPosition[1]-f[1],x=(b+w*w)*s*s;t.touchData.singleTouchMoved||(i||u.$(":selected").unselect(["tapunselect"]),e(i,["tap","vclick"],n,{x:f[0],y:f[1]}),_=!1,n.timeStamp-V<=u.multiClickDebounceTime()?(q&&clearTimeout(q),_=!0,V=null,e(i,["dbltap","vdblclick"],n,{x:f[0],y:f[1]})):(q=setTimeout((function(){_||e(i,["onetap","voneclick"],n,{x:f[0],y:f[1]})}),u.multiClickDebounceTime()),V=n.timeStamp)),null!=i&&!t.dragData.didDrag&&i._private.selectable&&x<t.touchTapThreshold2&&!t.pinching&&("single"===u.selectionType()?(u.$(r).unmerge(i).unselect(["tapunselect"]),i.select(["tapselect"])):i.selected()?i.unselect(["tapunselect"]):i.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}for(var M=0;M<f.length;M++)c[M]=f[M];t.dragData.didDrag=!1,0===n.touches.length&&(t.touchData.dragDelta=[],t.touchData.startPosition=[null,null,null,null,null,null],t.touchData.startGPosition=null,t.touchData.didSelect=!1),n.touches.length<2&&(1===n.touches.length&&(t.touchData.startGPosition=[n.touches[0].clientX,n.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())}},!1),"undefined"==typeof TouchEvent){var Z=[],H=function(t){return{clientX:t.clientX,clientY:t.clientY,force:1,identifier:t.pointerId,pageX:t.pageX,pageY:t.pageY,radiusX:t.width/2,radiusY:t.height/2,screenX:t.screenX,screenY:t.screenY,target:t.target}},K=function(t){Z.push(function(t){return{event:t,touch:H(t)}}(t))},G=function(t){for(var n=0;n<Z.length;n++){if(Z[n].event.pointerId===t.pointerId)return void Z.splice(n,1)}},Y=function(t){t.touches=Z.map((function(t){return t.touch}))},X=function(t){return"mouse"===t.pointerType||4===t.pointerType};t.registerBinding(t.container,"pointerdown",(function(t){X(t)||(t.preventDefault(),K(t),Y(t),I(t))})),t.registerBinding(t.container,"pointerup",(function(t){X(t)||(G(t),Y(t),R(t))})),t.registerBinding(t.container,"pointercancel",(function(t){X(t)||(G(t),Y(t),L())})),t.registerBinding(t.container,"pointermove",(function(t){X(t)||(t.preventDefault(),function(t){var n=Z.filter((function(n){return n.event.pointerId===t.pointerId}))[0];n.event=t,n.touch=H(t)}(t),Y(t),$(t))}))}};var $c={generatePolygon:function(t,n){return this.nodeShapes[t]={renderer:this,name:t,points:n,draw:function(t,n,r,e,i,a){this.renderer.nodeShapeImpl("polygon",t,n,r,e,i,this.points)},intersectLine:function(t,n,r,e,i,a,o,u){return fe(i,a,this.points,t,n,r/2,e/2,o)},checkPoint:function(t,n,r,e,i,a,o,u){return re(t,n,this.points,a,o,e,i,[0,-1],r)}}}};$c.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(t,n,r,e,i,a){this.renderer.nodeShapeImpl(this.name,t,n,r,e,i)},intersectLine:function(t,n,r,e,i,a,o,u){return function(t,n,r,e,i,a){var o=r-t,u=e-n;o/=i,u/=a;var s=Math.sqrt(o*o+u*u),f=s-1;if(f<0)return[];var c=f/s;return[(r-t)*c+t,(e-n)*c+n]}(i,a,t,n,r/2+o,e/2+o)},checkPoint:function(t,n,r,e,i,a,o,u){return ae(t,n,e,i,a,o,r)}}},$c.generateRoundPolygon=function(t,n){return this.nodeShapes[t]={renderer:this,name:t,points:n,getOrCreateCorners:function(t,r,e,i,a,o,u){if(void 0!==o[u]&&o[u+"-cx"]===t&&o[u+"-cy"]===r)return o[u];o[u]=new Array(n.length/2),o[u+"-cx"]=t,o[u+"-cy"]=r;var s=e/2,f=i/2;a="auto"===a?ge(e,i):a;for(var c=new Array(n.length/2),l=0;l<n.length/2;l++)c[l]={x:t+s*n[2*l],y:r+f*n[2*l+1]};var h,v,d,g,p=c.length;for(v=c[p-1],h=0;h<p;h++)d=c[h%p],g=c[(h+1)%p],o[u][h]=Mc(v,d,g,a),v=d,d=g;return o[u]},draw:function(t,n,r,e,i,a,o){this.renderer.nodeShapeImpl("round-polygon",t,n,r,e,i,this.points,this.getOrCreateCorners(n,r,e,i,a,o,"drawCorners"))},intersectLine:function(t,n,r,e,i,a,o,u,s){return function(t,n,r,e,i,a,o,u,s){var f,c=[],l=new Array(2*r.length);s.forEach((function(r,a){0===a?(l[l.length-2]=r.startX,l[l.length-1]=r.startY):(l[4*a-2]=r.startX,l[4*a-1]=r.startY),l[4*a]=r.stopX,l[4*a+1]=r.stopY,0!==(f=oe(t,n,e,i,r.cx,r.cy,r.radius)).length&&c.push(f[0],f[1])}));for(var h=0;h<l.length/4;h++)0!==(f=se(t,n,e,i,l[4*h],l[4*h+1],l[4*h+2],l[4*h+3],!1)).length&&c.push(f[0],f[1]);if(c.length>2){for(var v=[c[0],c[1]],d=Math.pow(v[0]-t,2)+Math.pow(v[1]-n,2),g=1;g<c.length/2;g++){var p=Math.pow(c[2*g]-t,2)+Math.pow(c[2*g+1]-n,2);p<=d&&(v[0]=c[2*g],v[1]=c[2*g+1],d=p)}return v}return c}(i,a,this.points,t,n,0,0,0,this.getOrCreateCorners(t,n,r,e,u,s,"corners"))},checkPoint:function(t,n,r,e,i,a,o,u,s){return function(t,n,r,e,i,a,o,u){for(var s=new Array(2*r.length),f=0;f<u.length;f++){var c=u[f];if(s[4*f+0]=c.startX,s[4*f+1]=c.startY,s[4*f+2]=c.stopX,s[4*f+3]=c.stopY,Math.pow(c.cx-t,2)+Math.pow(c.cy-n,2)<=Math.pow(c.radius,2))return!0}return ne(t,n,s)}(t,n,this.points,0,0,0,0,this.getOrCreateCorners(a,o,e,i,u,s,"corners"))}}},$c.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:le(4,0),draw:function(t,n,r,e,i,a){this.renderer.nodeShapeImpl(this.name,t,n,r,e,i,this.points,a)},intersectLine:function(t,n,r,e,i,a,o,u){return Yr(i,a,t,n,r,e,o,u)},checkPoint:function(t,n,r,e,i,a,o,u){var s=e/2,f=i/2;u="auto"===u?de(e,i):u;var c=2*(u=Math.min(s,f,u));return!!re(t,n,this.points,a,o,e,i-c,[0,-1],r)||(!!re(t,n,this.points,a,o,e-c,i,[0,-1],r)||(!!ae(t,n,c,c,a-s+u,o-f+u,r)||(!!ae(t,n,c,c,a+s-u,o-f+u,r)||(!!ae(t,n,c,c,a+s-u,o+f-u,r)||!!ae(t,n,c,c,a-s+u,o+f-u,r)))))}}},$c.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:le(4,0),draw:function(t,n,r,e,i,a){this.renderer.nodeShapeImpl(this.name,t,n,r,e,i,null,a)},generateCutTrianglePts:function(t,n,r,e,i){var a="auto"===i?this.cornerLength:i,o=n/2,u=t/2,s=r-u,f=r+u,c=e-o,l=e+o;return{topLeft:[s,c+a,s+a,c,s+a,c+a],topRight:[f-a,c,f,c+a,f-a,c+a],bottomRight:[f,l-a,f-a,l,f-a,l-a],bottomLeft:[s+a,l,s,l-a,s+a,l-a]}},intersectLine:function(t,n,r,e,i,a,o,u){var s=this.generateCutTrianglePts(r+2*o,e+2*o,t,n,u),f=[].concat.apply([],[s.topLeft.splice(0,4),s.topRight.splice(0,4),s.bottomRight.splice(0,4),s.bottomLeft.splice(0,4)]);return fe(i,a,f,t,n)},checkPoint:function(t,n,r,e,i,a,o,u){var s="auto"===u?this.cornerLength:u;if(re(t,n,this.points,a,o,e,i-2*s,[0,-1],r))return!0;if(re(t,n,this.points,a,o,e-2*s,i,[0,-1],r))return!0;var f=this.generateCutTrianglePts(e,i,a,o);return ne(t,n,f.topLeft)||ne(t,n,f.topRight)||ne(t,n,f.bottomRight)||ne(t,n,f.bottomLeft)}}},$c.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:le(4,0),draw:function(t,n,r,e,i,a){this.renderer.nodeShapeImpl(this.name,t,n,r,e,i)},intersectLine:function(t,n,r,e,i,a,o,u){var s=this.generateBarrelBezierPts(r+2*o,e+2*o,t,n),f=function(t){var n=Lr({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},.15),r=Lr({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},.5),e=Lr({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},.85);return[t[0],t[1],n.x,n.y,r.x,r.y,e.x,e.y,t[4],t[5]]},c=[].concat(f(s.topLeft),f(s.topRight),f(s.bottomRight),f(s.bottomLeft));return fe(i,a,c,t,n)},generateBarrelBezierPts:function(t,n,r,e){var i=n/2,a=t/2,o=r-a,u=r+a,s=e-i,f=e+i,c=pe(t,n),l=c.heightOffset,h=c.widthOffset,v=c.ctrlPtOffsetPct*t,d={topLeft:[o,s+l,o+v,s,o+h,s],topRight:[u-h,s,u-v,s,u,s+l],bottomRight:[u,f-l,u-v,f,u-h,f],bottomLeft:[o+h,f,o+v,f,o,f-l]};return d.topLeft.isTop=!0,d.topRight.isTop=!0,d.bottomLeft.isBottom=!0,d.bottomRight.isBottom=!0,d},checkPoint:function(t,n,r,e,i,a,o,u){var s=pe(e,i),f=s.heightOffset,c=s.widthOffset;if(re(t,n,this.points,a,o,e,i-2*f,[0,-1],r))return!0;if(re(t,n,this.points,a,o,e-2*c,i,[0,-1],r))return!0;for(var l=this.generateBarrelBezierPts(e,i,a,o),h=function(t,n,r){var e,i,a=r[4],o=r[2],u=r[0],s=r[5],f=r[1],c=Math.min(a,u),l=Math.max(a,u),h=Math.min(s,f),v=Math.max(s,f);if(c<=t&&t<=l&&h<=n&&n<=v){var d=[(e=a)-2*(i=o)+u,2*(i-e),e],g=function(t,n,r,e){var i=n*n-4*t*(r-=e);if(i<0)return[];var a=Math.sqrt(i),o=2*t;return[(-n+a)/o,(-n-a)/o]}(d[0],d[1],d[2],t),p=g.filter((function(t){return 0<=t&&t<=1}));if(p.length>0)return p[0]}return null},v=Object.keys(l),d=0;d<v.length;d++){var g=l[v[d]],p=h(t,n,g);if(null!=p){var y=g[5],m=g[3],b=g[1],w=$r(y,m,b,p);if(g.isTop&&w<=n)return!0;if(g.isBottom&&n<=w)return!0}}return!1}}},$c.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:le(4,0),draw:function(t,n,r,e,i,a){this.renderer.nodeShapeImpl(this.name,t,n,r,e,i,this.points,a)},intersectLine:function(t,n,r,e,i,a,o,u){var s=n-(e/2+o),f=se(i,a,t,n,t-(r/2+o),s,t+(r/2+o),s,!1);return f.length>0?f:Yr(i,a,t,n,r,e,o,u)},checkPoint:function(t,n,r,e,i,a,o,u){var s=2*(u="auto"===u?de(e,i):u);if(re(t,n,this.points,a,o,e,i-s,[0,-1],r))return!0;if(re(t,n,this.points,a,o,e-s,i,[0,-1],r))return!0;var f=e/2+2*r,c=i/2+2*r;return!!ne(t,n,[a-f,o-c,a-f,o,a+f,o,a+f,o-c])||(!!ae(t,n,s,s,a+e/2-u,o+i/2-u,r)||!!ae(t,n,s,s,a-e/2+u,o+i/2-u,r))}}},$c.registerNodeShapes=function(){var t=this.nodeShapes={},n=this;this.generateEllipse(),this.generatePolygon("triangle",le(3,0)),this.generateRoundPolygon("round-triangle",le(3,0)),this.generatePolygon("rectangle",le(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r),this.generatePolygon("pentagon",le(5,0)),this.generateRoundPolygon("round-pentagon",le(5,0)),this.generatePolygon("hexagon",le(6,0)),this.generateRoundPolygon("round-hexagon",le(6,0)),this.generatePolygon("heptagon",le(7,0)),this.generateRoundPolygon("round-heptagon",le(7,0)),this.generatePolygon("octagon",le(8,0)),this.generateRoundPolygon("round-octagon",le(8,0));var e=new Array(20),i=ve(5,0),a=ve(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var u=0;u<a.length/2;u++)a[2*u]*=o,a[2*u+1]*=o;for(u=0;u<5;u++)e[4*u]=i[2*u],e[4*u+1]=i[2*u+1],e[4*u+2]=a[2*u],e[4*u+3]=a[2*u+1];e=he(e),this.generatePolygon("star",e),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var s=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",s),this.generateRoundPolygon("round-tag",s),t.makePolygon=function(t){var r,e="polygon-"+t.join("$");return(r=this[e])?r:n.generatePolygon(e,t)}};var Lc={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(t){t=t||rr();var n=this;void 0===n.averageRedrawTime&&(n.averageRedrawTime=0),void 0===n.lastRedrawTime&&(n.lastRedrawTime=0),void 0===n.lastDrawTime&&(n.lastDrawTime=0),n.requestedFrame=!0,n.renderOptions=t},beforeRender:function(t,n){if(!this.destroyed){null==n&&Yn("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:t,priority:n}),r.sort((function(t,n){return n.priority-t.priority}))}}},Rc=function(t,n,r){for(var e=t.beforeRenderCallbacks,i=0;i<e.length;i++)e[i].fn(n,r)};Lc.startRenderLoop=function(){var t=this,n=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;Tn((function r(e){if(!t.destroyed){if(n.batching());else if(t.requestedFrame&&!t.skipFrame){Rc(t,!0,e);var i=On();t.render(t.renderOptions);var a=t.lastDrawTime=On();void 0===t.averageRedrawTime&&(t.averageRedrawTime=a-i),void 0===t.redrawCount&&(t.redrawCount=0),t.redrawCount++,void 0===t.redrawTotalTime&&(t.redrawTotalTime=0);var o=a-i;t.redrawTotalTime+=o,t.lastRedrawTime=o,t.averageRedrawTime=t.averageRedrawTime/2+o/2,t.requestedFrame=!1}else Rc(t,!1,e);t.skipFrame=!1,Tn(r)}}))}};var _c=function(t){this.init(t)},qc=_c.prototype;qc.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],qc.init=function(t){var n=this;n.options=t,n.cy=t.cy;var r=n.container=t.cy.container(),e=n.cy.window();if(e){var i=e.document,a=i.head,o="__________cytoscape_stylesheet",u="__________cytoscape_container",s=null!=i.getElementById(o);if(r.className.indexOf(u)<0&&(r.className=(r.className||"")+" "+u),!s){var f=i.createElement("style");f.id=o,f.textContent="."+u+" { position: relative; }",a.insertBefore(f,a.children[0])}"static"===e.getComputedStyle(r).getPropertyValue("position")&&Qn("A Cytoscape container has style position:static and so can not use UI extensions properly")}n.selection=[void 0,void 0,void 0,void 0,0],n.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],n.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},n.dragData={possibleDragElements:[]},n.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},n.redraws=0,n.showFps=t.showFps,n.debug=t.debug,n.hideEdgesOnViewport=t.hideEdgesOnViewport,n.textureOnViewport=t.textureOnViewport,n.wheelSensitivity=t.wheelSensitivity,n.motionBlurEnabled=t.motionBlur,n.forcedPixelRatio=St(t.pixelRatio)?t.pixelRatio:null,n.motionBlur=t.motionBlur,n.motionBlurOpacity=t.motionBlurOpacity,n.motionBlurTransparency=1-n.motionBlurOpacity,n.motionBlurPxRatio=1,n.mbPxRBlurry=1,n.minMbLowQualFrames=4,n.fullQualityMb=!1,n.clearedForMotionBlur=[],n.desktopTapThreshold=t.desktopTapThreshold,n.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,n.touchTapThreshold=t.touchTapThreshold,n.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,n.tapholdDuration=500,n.bindings=[],n.beforeRenderCallbacks=[],n.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},n.registerNodeShapes(),n.registerArrowShapes(),n.registerCalculationListeners()},qc.notify=function(t,n){var r=this,e=r.cy;this.destroyed||("init"!==t?"destroy"!==t?(("add"===t||"remove"===t||"move"===t&&e.hasCompoundNodes()||"load"===t||"zorder"===t||"mount"===t)&&r.invalidateCachedZSortedEles(),"viewport"===t&&r.redrawHint("select",!0),"load"!==t&&"resize"!==t&&"mount"!==t||(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()):r.destroy():r.load())},qc.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var n=0;n<t.bindings.length;n++){var r=t.bindings[n],e=r.target;(e.off||e.removeEventListener).apply(e,r.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch(t){}},qc.isHeadless=function(){return!1},[Xf,Fc,Dc,Ic,$c,Lc].forEach((function(t){Wt(qc,t)}));var Vc=1e3/60,Uc=function(t){return function(){var n=this,r=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var e=An((function(){r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()}),t.deqRedrawThreshold),i=t.priority||Gn;r.beforeRender((function(i,a){var o=On(),u=r.averageRedrawTime,s=r.lastRedrawTime,f=[],c=r.cy.extent(),l=r.getPixelRatio();for(i||r.flushRenderedStyleQueue();;){var h=On(),v=h-o,d=h-a;if(s<Vc){var g=Vc-(i?u:0);if(d>=t.deqFastCost*g)break}else if(i){if(v>=t.deqCost*s||v>=t.deqAvgCost*u)break}else if(d>=t.deqNoDrawCost*Vc)break;var p=t.deq(n,l,c);if(!(p.length>0))break;for(var y=0;y<p.length;y++)f.push(p[y])}f.length>0&&(t.onDeqd(n,f),!i&&t.shouldRedraw(n,f,l,c)&&e())}),i(n))}}},Wc=function(){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hn;ut(this,t),this.idsByKey=new sr,this.keyForId=new sr,this.cachesByLvl=new sr,this.lvls=[],this.getKey=n,this.doesEleInvalidateKey=r}return st(t,[{key:"getIdsFor",value:function(t){null==t&&Yn("Can not get id list for null key");var n=this.idsByKey,r=this.idsByKey.get(t);return r||(r=new cr,n.set(t,r)),r}},{key:"addIdForKey",value:function(t,n){null!=t&&this.getIdsFor(t).add(n)}},{key:"deleteIdForKey",value:function(t,n){null!=t&&this.getIdsFor(t).delete(n)}},{key:"getNumberOfIdsForKey",value:function(t){return null==t?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var n=t.id(),r=this.keyForId.get(n),e=this.getKey(t);this.deleteIdForKey(r,n),this.addIdForKey(e,n),this.keyForId.set(n,e)}},{key:"deleteKeyMappingFor",value:function(t){var n=t.id(),r=this.keyForId.get(n);this.deleteIdForKey(r,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(t){var n=t.id();return this.keyForId.get(n)!==this.getKey(t)}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var n=this.cachesByLvl,r=this.lvls,e=n.get(t);return e||(e=new sr,n.set(t,e),r.push(t)),e}},{key:"getCache",value:function(t,n){return this.getCachesAt(n).get(t)}},{key:"get",value:function(t,n){var r=this.getKey(t),e=this.getCache(r,n);return null!=e&&this.updateKeyMappingFor(t),e}},{key:"getForCachedKey",value:function(t,n){var r=this.keyForId.get(t.id());return this.getCache(r,n)}},{key:"hasCache",value:function(t,n){return this.getCachesAt(n).has(t)}},{key:"has",value:function(t,n){var r=this.getKey(t);return this.hasCache(r,n)}},{key:"setCache",value:function(t,n,r){r.key=t,this.getCachesAt(n).set(t,r)}},{key:"set",value:function(t,n,r){var e=this.getKey(t);this.setCache(e,n,r),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,n){this.getCachesAt(n).delete(t)}},{key:"delete",value:function(t,n){var r=this.getKey(t);this.deleteCache(r,n)}},{key:"invalidateKey",value:function(t){var n=this;this.lvls.forEach((function(r){return n.deleteCache(t,r)}))}},{key:"invalidate",value:function(t){var n=t.id(),r=this.keyForId.get(n);this.deleteKeyMappingFor(t);var e=this.doesEleInvalidateKey(t);return e&&this.invalidateKey(r),e||0===this.getNumberOfIdsForKey(r)}}]),t}(),Zc={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},Hc=er({getKey:null,doesEleInvalidateKey:Hn,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Zn,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Kc=function(t,n){var r=this;r.renderer=t,r.onDequeues=[];var e=Hc(n);Wt(r,e),r.lookup=new Wc(e.getKey,e.doesEleInvalidateKey),r.setupDequeueing()},Gc=Kc.prototype;Gc.reasons=Zc,Gc.getTextureQueue=function(t){var n=this;return n.eleImgCaches=n.eleImgCaches||{},n.eleImgCaches[t]=n.eleImgCaches[t]||[]},Gc.getRetiredTextureQueue=function(t){var n=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return n[t]=n[t]||[]},Gc.getElementQueue=function(){var t=this.eleCacheQueue=this.eleCacheQueue||new gr((function(t,n){return n.reqs-t.reqs}));return t},Gc.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},Gc.getElement=function(t,n,r,e,i){var a=this,o=this.renderer,u=o.cy.zoom(),s=this.lookup;if(!n||0===n.w||0===n.h||isNaN(n.w)||isNaN(n.h)||!t.visible()||t.removed())return null;if(!a.allowEdgeTxrCaching&&t.isEdge()||!a.allowParentTxrCaching&&t.isParent())return null;if(null==e&&(e=Math.ceil(Nr(u*r))),e<-4)e=-4;else if(u>=7.99||e>3)return null;var f=Math.pow(2,e),c=n.h*f,l=n.w*f,h=o.eleTextBiggerThanMin(t,f);if(!this.isVisible(t,h))return null;var v,d=s.get(t,e);if(d&&d.invalidated&&(d.invalidated=!1,d.texture.invalidatedWidth-=d.width),d)return d;if(v=c<=25?25:c<=50?50:50*Math.ceil(c/50),c>1024||l>1024)return null;var g=a.getTextureQueue(v),p=g[g.length-2],y=function(){return a.recycleTexture(v,l)||a.addTexture(v,l)};p||(p=g[g.length-1]),p||(p=y()),p.width-p.usedWidth<l&&(p=y());for(var m,b=function(t){return t&&t.scaledLabelShown===h},w=i&&i===Zc.dequeue,x=i&&i===Zc.highQuality,M=i&&i===Zc.downscale,k=e+1;k<=3;k++){var E=s.get(t,k);if(E){m=E;break}}var S=m&&m.level===e+1?m:null,A=function(){p.context.drawImage(S.texture.canvas,S.x,0,S.width,S.height,p.usedWidth,0,l,c)};if(p.context.setTransform(1,0,0,1,0,0),p.context.clearRect(p.usedWidth,0,l,v),b(S))A();else if(b(m)){if(!x)return a.queueElement(t,m.level-1),m;for(var z=m.level;z>e;z--)S=a.getElement(t,n,r,z,Zc.downscale);A()}else{var B;if(!w&&!x&&!M)for(var C=e-1;C>=-4;C--){var T=s.get(t,C);if(T){B=T;break}}if(b(B))return a.queueElement(t,e),B;p.context.translate(p.usedWidth,0),p.context.scale(f,f),this.drawElement(p.context,t,n,h,!1),p.context.scale(1/f,1/f),p.context.translate(-p.usedWidth,0)}return d={x:p.usedWidth,texture:p,level:e,scale:f,width:l,height:c,scaledLabelShown:h},p.usedWidth+=Math.ceil(l+8),p.eleCaches.push(d),s.set(t,e,d),a.checkTextureFullness(p),d},Gc.invalidateElements=function(t){for(var n=0;n<t.length;n++)this.invalidateElement(t[n])},Gc.invalidateElement=function(t){var n=this,r=n.lookup,e=[];if(r.isInvalid(t)){for(var i=-4;i<=3;i++){var a=r.getForCachedKey(t,i);a&&e.push(a)}if(r.invalidate(t))for(var o=0;o<e.length;o++){var u=e[o],s=u.texture;s.invalidatedWidth+=u.width,u.invalidated=!0,n.checkTextureUtility(s)}n.removeFromQueue(t)}},Gc.checkTextureUtility=function(t){t.invalidatedWidth>=.2*t.width&&this.retireTexture(t)},Gc.checkTextureFullness=function(t){var n=this.getTextureQueue(t.height);t.usedWidth/t.width>.8&&t.fullnessChecks>=10?ir(n,t):t.fullnessChecks++},Gc.retireTexture=function(t){var n=t.height,r=this.getTextureQueue(n),e=this.lookup;ir(r,t),t.retired=!0;for(var i=t.eleCaches,a=0;a<i.length;a++){var o=i[a];e.deleteCache(o.key,o.level)}ar(i),this.getRetiredTextureQueue(n).push(t)},Gc.addTexture=function(t,n){var r={};return this.getTextureQueue(t).push(r),r.eleCaches=[],r.height=t,r.width=Math.max(1024,n),r.usedWidth=0,r.invalidatedWidth=0,r.fullnessChecks=0,r.canvas=this.renderer.makeOffscreenCanvas(r.width,r.height),r.context=r.canvas.getContext("2d"),r},Gc.recycleTexture=function(t,n){for(var r=this.getTextureQueue(t),e=this.getRetiredTextureQueue(t),i=0;i<e.length;i++){var a=e[i];if(a.width>=n)return a.retired=!1,a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,ar(a.eleCaches),a.context.setTransform(1,0,0,1,0,0),a.context.clearRect(0,0,a.width,a.height),ir(e,a),r.push(a),a}},Gc.queueElement=function(t,n){var r=this.getElementQueue(),e=this.getElementKeyToQueue(),i=this.getKey(t),a=e[i];if(a)a.level=Math.max(a.level,n),a.eles.merge(t),a.reqs++,r.updateItem(a);else{var o={eles:t.spawn().merge(t),level:n,reqs:1,key:i};r.push(o),e[i]=o}},Gc.dequeue=function(t){for(var n=this,r=n.getElementQueue(),e=n.getElementKeyToQueue(),i=[],a=n.lookup,o=0;o<1&&r.size()>0;o++){var u=r.pop(),s=u.key,f=u.eles[0],c=a.hasCache(f,u.level);if(e[s]=null,!c){i.push(u);var l=n.getBoundingBox(f);n.getElement(f,l,t,u.level,Zc.dequeue)}}return i},Gc.removeFromQueue=function(t){var n=this.getElementQueue(),r=this.getElementKeyToQueue(),e=this.getKey(t),i=r[e];null!=i&&(1===i.eles.length?(i.reqs=Wn,n.updateItem(i),n.pop(),r[e]=null):i.eles.unmerge(t))},Gc.onDequeue=function(t){this.onDequeues.push(t)},Gc.offDequeue=function(t){ir(this.onDequeues,t)},Gc.setupDequeueing=Uc({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,n,r){return t.dequeue(n,r)},onDeqd:function(t,n){for(var r=0;r<t.onDequeues.length;r++){(0,t.onDequeues[r])(n)}},shouldRedraw:function(t,n,r,e){for(var i=0;i<n.length;i++)for(var a=n[i].eles,o=0;o<a.length;o++){var u=a[o].boundingBox();if(Hr(u,e))return!0}return!1},priority:function(t){return t.renderer.beforeRenderPriorities.eleTxrDeq}});var Yc=function(t){var n=this,r=n.renderer=t,e=r.cy;n.layersByLevel={},n.firstGet=!0,n.lastInvalidationTime=On()-500,n.skipping=!1,n.eleTxrDeqs=e.collection(),n.scheduleElementRefinement=An((function(){n.refineElementTextures(n.eleTxrDeqs),n.eleTxrDeqs.unmerge(n.eleTxrDeqs)}),50),r.beforeRender((function(t,r){r-n.lastInvalidationTime<=250?n.skipping=!0:n.skipping=!1}),r.beforeRenderPriorities.lyrTxrSkip);n.layersQueue=new gr((function(t,n){return n.reqs-t.reqs})),n.setupDequeueing()},Xc=Yc.prototype,Qc=0,Jc=Math.pow(2,53)-1;Xc.makeLayer=function(t,n){var r=Math.pow(2,n),e=Math.ceil(t.w*r),i=Math.ceil(t.h*r),a=this.renderer.makeOffscreenCanvas(e,i),o={id:Qc=++Qc%Jc,bb:t,level:n,width:e,height:i,canvas:a,context:a.getContext("2d"),eles:[],elesQueue:[],reqs:0},u=o.context,s=-o.bb.x1,f=-o.bb.y1;return u.scale(r,r),u.translate(s,f),o},Xc.getLayers=function(t,n,r){var e=this,i=e.renderer.cy.zoom(),a=e.firstGet;if(e.firstGet=!1,null==r)if((r=Math.ceil(Nr(i*n)))<-4)r=-4;else if(i>=3.99||r>2)return null;e.validateLayersElesOrdering(r,t);var o,u,s=e.layersByLevel,f=Math.pow(2,r),c=s[r]=s[r]||[];if(e.levelIsComplete(r,t))return c;!function(){var n=function(n){if(e.validateLayersElesOrdering(n,t),e.levelIsComplete(n,t))return u=s[n],!0},i=function(t){if(!u)for(var e=r+t;-4<=e&&e<=2&&!n(e);e+=t);};i(1),i(-1);for(var a=c.length-1;a>=0;a--){var o=c[a];o.invalid&&ir(c,o)}}();var l=function(n){var i=(n=n||{}).after;!function(){if(!o){o=_r();for(var n=0;n<t.length;n++)qr(o,t[n].boundingBox())}}();var a=Math.ceil(o.w*f),u=Math.ceil(o.h*f);if(a>32767||u>32767)return null;if(a*u>16e6)return null;var s=e.makeLayer(o,r);if(null!=i){var l=c.indexOf(i)+1;c.splice(l,0,s)}else(void 0===n.insert||n.insert)&&c.unshift(s);return s};if(e.skipping&&!a)return null;for(var h=null,v=t.length/1,d=!a,g=0;g<t.length;g++){var p=t[g],y=p._private.rscratch,m=y.imgLayerCaches=y.imgLayerCaches||{},b=m[r];if(b)h=b;else{if((!h||h.eles.length>=v||!Gr(h.bb,p.boundingBox()))&&!(h=l({insert:!0,after:h})))return null;u||d?e.queueLayer(h,p):e.drawEleInLayer(h,p,r,n),h.eles.push(p),m[r]=h}}return u||(d?null:c)},Xc.getEleLevelForLayerLevel=function(t,n){return t},Xc.drawEleInLayer=function(t,n,r,e){var i=this.renderer,a=t.context,o=n.boundingBox();0!==o.w&&0!==o.h&&n.visible()&&(r=this.getEleLevelForLayerLevel(r,e),i.setImgSmoothing(a,!1),i.drawCachedElement(a,n,null,null,r,true),i.setImgSmoothing(a,!0))},Xc.levelIsComplete=function(t,n){var r=this.layersByLevel[t];if(!r||0===r.length)return!1;for(var e=0,i=0;i<r.length;i++){var a=r[i];if(a.reqs>0)return!1;if(a.invalid)return!1;e+=a.eles.length}return e===n.length},Xc.validateLayersElesOrdering=function(t,n){var r=this.layersByLevel[t];if(r)for(var e=0;e<r.length;e++){for(var i=r[e],a=-1,o=0;o<n.length;o++)if(i.eles[0]===n[o]){a=o;break}if(a<0)this.invalidateLayer(i);else{var u=a;for(o=0;o<i.eles.length;o++)if(i.eles[o]!==n[u+o]){this.invalidateLayer(i);break}}}},Xc.updateElementsInLayers=function(t,n){for(var r=Bt(t[0]),e=0;e<t.length;e++)for(var i=r?null:t[e],a=r?t[e]:t[e].ele,o=a._private.rscratch,u=o.imgLayerCaches=o.imgLayerCaches||{},s=-4;s<=2;s++){var f=u[s];f&&(i&&this.getEleLevelForLayerLevel(f.level)!==i.level||n(f,a,i))}},Xc.haveLayers=function(){for(var t=!1,n=-4;n<=2;n++){var r=this.layersByLevel[n];if(r&&r.length>0){t=!0;break}}return t},Xc.invalidateElements=function(t){var n=this;0!==t.length&&(n.lastInvalidationTime=On(),0!==t.length&&n.haveLayers()&&n.updateElementsInLayers(t,(function(t,r,e){n.invalidateLayer(t)})))},Xc.invalidateLayer=function(t){if(this.lastInvalidationTime=On(),!t.invalid){var n=t.level,r=t.eles,e=this.layersByLevel[n];ir(e,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var i=0;i<r.length;i++){var a=r[i]._private.rscratch.imgLayerCaches;a&&(a[n]=null)}}},Xc.refineElementTextures=function(t){var n=this;n.updateElementsInLayers(t,(function(t,r,e){var i=t.replacement;if(i||((i=t.replacement=n.makeLayer(t.bb,t.level)).replaces=t,i.eles=t.eles),!i.reqs)for(var a=0;a<i.eles.length;a++)n.queueLayer(i,i.eles[a])}))},Xc.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()},Xc.queueLayer=function(t,n){var r=this.layersQueue,e=t.elesQueue,i=e.hasId=e.hasId||{};if(!t.replacement){if(n){if(i[n.id()])return;e.push(n),i[n.id()]=!0}t.reqs?(t.reqs++,r.updateItem(t)):(t.reqs=1,r.push(t))}},Xc.dequeue=function(t){for(var n=this,r=n.layersQueue,e=[],i=0;i<1&&0!==r.size();){var a=r.peek();if(a.replacement)r.pop();else if(a.replaces&&a!==a.replaces.replacement)r.pop();else if(a.invalid)r.pop();else{var o=a.elesQueue.shift();o&&(n.drawEleInLayer(a,o,a.level,t),i++),0===e.length&&e.push(!0),0===a.elesQueue.length&&(r.pop(),a.reqs=0,a.replaces&&n.applyLayerReplacement(a),n.requestRedraw())}}return e},Xc.applyLayerReplacement=function(t){var n=this.layersByLevel[t.level],r=t.replaces,e=n.indexOf(r);if(!(e<0||r.invalid)){n[e]=t;for(var i=0;i<t.eles.length;i++){var a=t.eles[i]._private,o=a.imgLayerCaches=a.imgLayerCaches||{};o&&(o[t.level]=t)}this.requestRedraw()}},Xc.requestRedraw=An((function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()}),100),Xc.setupDequeueing=Uc({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,n){return t.dequeue(n)},onDeqd:Gn,shouldRedraw:Zn,priority:function(t){return t.renderer.beforeRenderPriorities.lyrTxrDeq}});var tl,nl={};function rl(t,n){for(var r=0;r<n.length;r++){var e=n[r];t.lineTo(e.x,e.y)}}function el(t,n,r){for(var e,i=0;i<n.length;i++){var a=n[i];0===i&&(e=a),t.lineTo(a.x,a.y)}t.quadraticCurveTo(r.x,r.y,e.x,e.y)}function il(t,n,r){t.beginPath&&t.beginPath();for(var e=n,i=0;i<e.length;i++){var a=e[i];t.lineTo(a.x,a.y)}var o=r,u=r[0];t.moveTo(u.x,u.y);for(i=1;i<o.length;i++){a=o[i];t.lineTo(a.x,a.y)}t.closePath&&t.closePath()}function al(t,n,r,e,i){t.beginPath&&t.beginPath(),t.arc(r,e,i,0,2*Math.PI,!1);var a=n,o=a[0];t.moveTo(o.x,o.y);for(var u=0;u<a.length;u++){var s=a[u];t.lineTo(s.x,s.y)}t.closePath&&t.closePath()}function ol(t,n,r,e){t.arc(n,r,e,0,2*Math.PI,!1)}nl.arrowShapeImpl=function(t){return(tl||(tl={polygon:rl,"triangle-backcurve":el,"triangle-tee":il,"circle-triangle":al,"triangle-cross":il,circle:ol}))[t]};var ul={drawElement:function(t,n,r,e,i,a){n.isNode()?this.drawNode(t,n,r,e,i,a):this.drawEdge(t,n,r,e,i,a)},drawElementOverlay:function(t,n){n.isNode()?this.drawNodeOverlay(t,n):this.drawEdgeOverlay(t,n)},drawElementUnderlay:function(t,n){n.isNode()?this.drawNodeUnderlay(t,n):this.drawEdgeUnderlay(t,n)},drawCachedElementPortion:function(t,n,r,e,i,a,o,u){var s=this,f=r.getBoundingBox(n);if(0!==f.w&&0!==f.h){var c=r.getElement(n,f,e,i,a);if(null!=c){var l=u(s,n);if(0===l)return;var h,v,d,g,p,y,m=o(s,n),b=f.x1,w=f.y1,x=f.w,M=f.h;if(0!==m){var k=r.getRotationPoint(n);d=k.x,g=k.y,t.translate(d,g),t.rotate(m),(p=s.getImgSmoothing(t))||s.setImgSmoothing(t,!0);var E=r.getRotationOffset(n);h=E.x,v=E.y}else h=b,v=w;1!==l&&(y=t.globalAlpha,t.globalAlpha=y*l),t.drawImage(c.texture.canvas,c.x,0,c.width,c.height,h,v,x,M),1!==l&&(t.globalAlpha=y),0!==m&&(t.rotate(-m),t.translate(-d,-g),p||s.setImgSmoothing(t,!1))}else r.drawElement(t,n)}}},sl=function(){return 0},fl=function(t,n){return t.getTextAngle(n,null)},cl=function(t,n){return t.getTextAngle(n,"source")},ll=function(t,n){return t.getTextAngle(n,"target")},hl=function(t,n){return n.effectiveOpacity()},vl=function(t,n){return n.pstyle("text-opacity").pfValue*n.effectiveOpacity()};ul.drawCachedElement=function(t,n,r,e,i,a){var o=this,u=o.data,s=u.eleTxrCache,f=u.lblTxrCache,c=u.slbTxrCache,l=u.tlbTxrCache,h=n.boundingBox(),v=!0===a?s.reasons.highQuality:null;if(0!==h.w&&0!==h.h&&n.visible()&&(!e||Hr(h,e))){var d=n.isEdge(),g=n.element()._private.rscratch.badLine;o.drawElementUnderlay(t,n),o.drawCachedElementPortion(t,n,s,r,i,v,sl,hl),d&&g||o.drawCachedElementPortion(t,n,f,r,i,v,fl,vl),d&&!g&&(o.drawCachedElementPortion(t,n,c,r,i,v,cl,vl),o.drawCachedElementPortion(t,n,l,r,i,v,ll,vl)),o.drawElementOverlay(t,n)}},ul.drawElements=function(t,n){for(var r=0;r<n.length;r++){var e=n[r];this.drawElement(t,e)}},ul.drawCachedElements=function(t,n,r,e){for(var i=0;i<n.length;i++){var a=n[i];this.drawCachedElement(t,a,r,e)}},ul.drawCachedNodes=function(t,n,r,e){for(var i=0;i<n.length;i++){var a=n[i];a.isNode()&&this.drawCachedElement(t,a,r,e)}},ul.drawLayeredElements=function(t,n,r,e){var i=this.data.lyrTxrCache.getLayers(n,r);if(i)for(var a=0;a<i.length;a++){var o=i[a],u=o.bb;0!==u.w&&0!==u.h&&t.drawImage(o.canvas,u.x1,u.y1,u.w,u.h)}else this.drawCachedElements(t,n,r,e)};var dl={drawEdge:function(t,n,r){var e=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=this,u=n._private.rscratch;if((!a||n.visible())&&!u.badLine&&null!=u.allpts&&!isNaN(u.allpts[0])){var s;r&&(s=r,t.translate(-s.x1,-s.y1));var f=a?n.pstyle("opacity").value:1,c=a?n.pstyle("line-opacity").value:1,l=n.pstyle("curve-style").value,h=n.pstyle("line-style").value,v=n.pstyle("width").pfValue,d=n.pstyle("line-cap").value,g=n.pstyle("line-outline-width").value,p=n.pstyle("line-outline-color").value,y=f*c,m=f*c,b=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;"straight-triangle"===l?(o.eleStrokeStyle(t,n,r),o.drawEdgeTrianglePath(n,t,u.allpts)):(t.lineWidth=v,t.lineCap=d,o.eleStrokeStyle(t,n,r),o.drawEdgePath(n,t,u.allpts,h),t.lineCap="butt")},w=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;o.drawArrowheads(t,n,r)};if(t.lineJoin="round","yes"===n.pstyle("ghost").value){var x=n.pstyle("ghost-offset-x").pfValue,M=n.pstyle("ghost-offset-y").pfValue,k=n.pstyle("ghost-opacity").value,E=y*k;t.translate(x,M),b(E),w(E),t.translate(-x,-M)}else!function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;t.lineWidth=v+g,t.lineCap=d,g>0?(o.colorStrokeStyle(t,p[0],p[1],p[2],r),"straight-triangle"===l?o.drawEdgeTrianglePath(n,t,u.allpts):(o.drawEdgePath(n,t,u.allpts,h),t.lineCap="butt")):t.lineCap="butt"}();i&&o.drawEdgeUnderlay(t,n),b(),w(),i&&o.drawEdgeOverlay(t,n),o.drawElementText(t,n,null,e),r&&t.translate(s.x1,s.y1)}}},gl=function(t){if(!["overlay","underlay"].includes(t))throw new Error("Invalid state");return function(n,r){if(r.visible()){var e=r.pstyle("".concat(t,"-opacity")).value;if(0!==e){var i=this,a=i.usePaths(),o=r._private.rscratch,u=2*r.pstyle("".concat(t,"-padding")).pfValue,s=r.pstyle("".concat(t,"-color")).value;n.lineWidth=u,"self"!==o.edgeType||a?n.lineCap="round":n.lineCap="butt",i.colorStrokeStyle(n,s[0],s[1],s[2],e),i.drawEdgePath(r,n,o.allpts,"solid")}}}};dl.drawEdgeOverlay=gl("overlay"),dl.drawEdgeUnderlay=gl("underlay"),dl.drawEdgePath=function(t,n,r,e){var i,a=t._private.rscratch,o=n,u=!1,s=this.usePaths(),f=t.pstyle("line-dash-pattern").pfValue,c=t.pstyle("line-dash-offset").pfValue;if(s){var l=r.join("$");a.pathCacheKey&&a.pathCacheKey===l?(i=n=a.pathCache,u=!0):(i=n=new Path2D,a.pathCacheKey=l,a.pathCache=i)}if(o.setLineDash)switch(e){case"dotted":o.setLineDash([1,1]);break;case"dashed":o.setLineDash(f),o.lineDashOffset=c;break;case"solid":o.setLineDash([])}if(!u&&!a.badLine)switch(n.beginPath&&n.beginPath(),n.moveTo(r[0],r[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var h=2;h+3<r.length;h+=4)n.quadraticCurveTo(r[h],r[h+1],r[h+2],r[h+3]);break;case"straight":case"haystack":for(var v=2;v+1<r.length;v+=2)n.lineTo(r[v],r[v+1]);break;case"segments":if(a.isRound){var d,g=vt(a.roundCorners);try{for(g.s();!(d=g.n()).done;){xc(n,d.value)}}catch(t){g.e(t)}finally{g.f()}n.lineTo(r[r.length-2],r[r.length-1])}else for(var p=2;p+1<r.length;p+=2)n.lineTo(r[p],r[p+1])}n=o,s?n.stroke(i):n.stroke(),n.setLineDash&&n.setLineDash([])},dl.drawEdgeTrianglePath=function(t,n,r){n.fillStyle=n.strokeStyle;for(var e=t.pstyle("width").pfValue,i=0;i+1<r.length;i+=2){var a=[r[i+2]-r[i],r[i+3]-r[i+1]],o=Math.sqrt(a[0]*a[0]+a[1]*a[1]),u=[a[1]/o,-a[0]/o],s=[u[0]*e/2,u[1]*e/2];n.beginPath(),n.moveTo(r[i]-s[0],r[i+1]-s[1]),n.lineTo(r[i]+s[0],r[i+1]+s[1]),n.lineTo(r[i+2],r[i+3]),n.closePath(),n.fill()}},dl.drawArrowheads=function(t,n,r){var e=n._private.rscratch,i="haystack"===e.edgeType;i||this.drawArrowhead(t,n,"source",e.arrowStartX,e.arrowStartY,e.srcArrowAngle,r),this.drawArrowhead(t,n,"mid-target",e.midX,e.midY,e.midtgtArrowAngle,r),this.drawArrowhead(t,n,"mid-source",e.midX,e.midY,e.midsrcArrowAngle,r),i||this.drawArrowhead(t,n,"target",e.arrowEndX,e.arrowEndY,e.tgtArrowAngle,r)},dl.drawArrowhead=function(t,n,r,e,i,a,o){if(!(isNaN(e)||null==e||isNaN(i)||null==i||isNaN(a)||null==a)){var u=this,s=n.pstyle(r+"-arrow-shape").value;if("none"!==s){var f="hollow"===n.pstyle(r+"-arrow-fill").value?"both":"filled",c=n.pstyle(r+"-arrow-fill").value,l=n.pstyle("width").pfValue,h=n.pstyle(r+"-arrow-width"),v="match-line"===h.value?l:h.pfValue;"%"===h.units&&(v*=l);var d=n.pstyle("opacity").value;void 0===o&&(o=d);var g=t.globalCompositeOperation;1===o&&"hollow"!==c||(t.globalCompositeOperation="destination-out",u.colorFillStyle(t,255,255,255,1),u.colorStrokeStyle(t,255,255,255,1),u.drawArrowShape(n,t,f,l,s,v,e,i,a),t.globalCompositeOperation=g);var p=n.pstyle(r+"-arrow-color").value;u.colorFillStyle(t,p[0],p[1],p[2],o),u.colorStrokeStyle(t,p[0],p[1],p[2],o),u.drawArrowShape(n,t,c,l,s,v,e,i,a)}}},dl.drawArrowShape=function(t,n,r,e,i,a,o,u,s){var f,c=this,l=this.usePaths()&&"triangle-cross"!==i,h=!1,v=n,d={x:o,y:u},g=t.pstyle("arrow-scale").value,p=this.getArrowWidth(e,g),y=c.arrowShapes[i];if(l){var m=c.arrowPathCache=c.arrowPathCache||[],b=Ln(i),w=m[b];null!=w?(f=n=w,h=!0):(f=n=new Path2D,m[b]=f)}h||(n.beginPath&&n.beginPath(),l?y.draw(n,1,0,{x:0,y:0},1):y.draw(n,p,s,d,e),n.closePath&&n.closePath()),n=v,l&&(n.translate(o,u),n.rotate(s),n.scale(p,p)),"filled"!==r&&"both"!==r||(l?n.fill(f):n.fill()),"hollow"!==r&&"both"!==r||(n.lineWidth=a/(l?p:1),n.lineJoin="miter",l?n.stroke(f):n.stroke()),l&&(n.scale(1/p,1/p),n.rotate(-s),n.translate(-o,-u))};var pl={safeDrawImage:function(t,n,r,e,i,a,o,u,s,f){if(!(i<=0||a<=0||s<=0||f<=0))try{t.drawImage(n,r,e,i,a,o,u,s,f)}catch(t){Qn(t)}},drawInscribedImage:function(t,n,r,e,i){var a=this,o=r.position(),u=o.x,s=o.y,f=r.cy().style(),c=f.getIndexedStyle.bind(f),l=c(r,"background-fit","value",e),h=c(r,"background-repeat","value",e),v=r.width(),d=r.height(),g=2*r.padding(),p=v+("inner"===c(r,"background-width-relative-to","value",e)?0:g),y=d+("inner"===c(r,"background-height-relative-to","value",e)?0:g),m=r._private.rscratch,b="node"===c(r,"background-clip","value",e),w=c(r,"background-image-opacity","value",e)*i,x=c(r,"background-image-smoothing","value",e),M=r.pstyle("corner-radius").value;"auto"!==M&&(M=r.pstyle("corner-radius").pfValue);var k=n.width||n.cachedW,E=n.height||n.cachedH;null!=k&&null!=E||(document.body.appendChild(n),k=n.cachedW=n.width||n.offsetWidth,E=n.cachedH=n.height||n.offsetHeight,document.body.removeChild(n));var S=k,A=E;if("auto"!==c(r,"background-width","value",e)&&(S="%"===c(r,"background-width","units",e)?c(r,"background-width","pfValue",e)*p:c(r,"background-width","pfValue",e)),"auto"!==c(r,"background-height","value",e)&&(A="%"===c(r,"background-height","units",e)?c(r,"background-height","pfValue",e)*y:c(r,"background-height","pfValue",e)),0!==S&&0!==A){if("contain"===l)S*=z=Math.min(p/S,y/A),A*=z;else if("cover"===l){var z;S*=z=Math.max(p/S,y/A),A*=z}var B=u-p/2,C=c(r,"background-position-x","units",e),T=c(r,"background-position-x","pfValue",e);B+="%"===C?(p-S)*T:T;var O=c(r,"background-offset-x","units",e),P=c(r,"background-offset-x","pfValue",e);B+="%"===O?(p-S)*P:P;var N=s-y/2,j=c(r,"background-position-y","units",e),F=c(r,"background-position-y","pfValue",e);N+="%"===j?(y-A)*F:F;var D=c(r,"background-offset-y","units",e),I=c(r,"background-offset-y","pfValue",e);N+="%"===D?(y-A)*I:I,m.pathCache&&(B-=u,N-=s,u=0,s=0);var $=t.globalAlpha;t.globalAlpha=w;var L=a.getImgSmoothing(t),R=!1;if("no"===x&&L?(a.setImgSmoothing(t,!1),R=!0):"yes"!==x||L||(a.setImgSmoothing(t,!0),R=!0),"no-repeat"===h)b&&(t.save(),m.pathCache?t.clip(m.pathCache):(a.nodeShapes[a.getNodeShape(r)].draw(t,u,s,p,y,M,m),t.clip())),a.safeDrawImage(t,n,0,0,k,E,B,N,S,A),b&&t.restore();else{var _=t.createPattern(n,h);t.fillStyle=_,a.nodeShapes[a.getNodeShape(r)].draw(t,u,s,p,y,M,m),t.translate(B,N),t.fill(),t.translate(-B,-N)}t.globalAlpha=$,R&&a.setImgSmoothing(t,L)}}},yl={};function ml(t,n,r,e,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5,o=arguments.length>6?arguments[6]:void 0;t.beginPath(),t.moveTo(n+a,r),t.lineTo(n+e-a,r),t.quadraticCurveTo(n+e,r,n+e,r+a),t.lineTo(n+e,r+i-a),t.quadraticCurveTo(n+e,r+i,n+e-a,r+i),t.lineTo(n+a,r+i),t.quadraticCurveTo(n,r+i,n,r+i-a),t.lineTo(n,r+a),t.quadraticCurveTo(n,r,n+a,r),t.closePath(),o?t.stroke():t.fill()}yl.eleTextBiggerThanMin=function(t,n){if(!n){var r=t.cy().zoom(),e=this.getPixelRatio(),i=Math.ceil(Nr(r*e));n=Math.pow(2,i)}return!(t.pstyle("font-size").pfValue*n<t.pstyle("min-zoomed-font-size").pfValue)},yl.drawElementText=function(t,n,r,e,i){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=this;if(null==e){if(a&&!o.eleTextBiggerThanMin(n))return}else if(!1===e)return;if(n.isNode()){var u=n.pstyle("label");if(!u||!u.value)return;var s=o.getLabelJustification(n);t.textAlign=s,t.textBaseline="bottom"}else{var f=n.element()._private.rscratch.badLine,c=n.pstyle("label"),l=n.pstyle("source-label"),h=n.pstyle("target-label");if(f||(!c||!c.value)&&(!l||!l.value)&&(!h||!h.value))return;t.textAlign="center",t.textBaseline="bottom"}var v,d=!r;r&&(v=r,t.translate(-v.x1,-v.y1)),null==i?(o.drawText(t,n,null,d,a),n.isEdge()&&(o.drawText(t,n,"source",d,a),o.drawText(t,n,"target",d,a))):o.drawText(t,n,i,d,a),r&&t.translate(v.x1,v.y1)},yl.getFontCache=function(t){var n;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if((n=this.fontCaches[r]).context===t)return n;return n={context:t},this.fontCaches.push(n),n},yl.setupTextStyle=function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],e=n.pstyle("font-style").strValue,i=n.pstyle("font-size").pfValue+"px",a=n.pstyle("font-family").strValue,o=n.pstyle("font-weight").strValue,u=r?n.effectiveOpacity()*n.pstyle("text-opacity").value:1,s=n.pstyle("text-outline-opacity").value*u,f=n.pstyle("color").value,c=n.pstyle("text-outline-color").value;t.font=e+" "+o+" "+i+" "+a,t.lineJoin="round",this.colorFillStyle(t,f[0],f[1],f[2],u),this.colorStrokeStyle(t,c[0],c[1],c[2],s)},yl.getTextAngle=function(t,n){var r=t._private.rscratch,e=n?n+"-":"",i=t.pstyle(e+"text-rotation"),a=or(r,"labelAngle",n);return"autorotate"===i.strValue?t.isEdge()?a:0:"none"===i.strValue?0:i.pfValue},yl.drawText=function(t,n,r){var e=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=n._private.rscratch,o=i?n.effectiveOpacity():1;if(!i||0!==o&&0!==n.pstyle("text-opacity").value){"main"===r&&(r=null);var u,s,f=or(a,"labelX",r),c=or(a,"labelY",r),l=this.getLabelText(n,r);if(null!=l&&""!==l&&!isNaN(f)&&!isNaN(c)){this.setupTextStyle(t,n,i);var h,v=r?r+"-":"",d=or(a,"labelWidth",r),g=or(a,"labelHeight",r),p=n.pstyle(v+"text-margin-x").pfValue,y=n.pstyle(v+"text-margin-y").pfValue,m=n.isEdge(),b=n.pstyle("text-halign").value,w=n.pstyle("text-valign").value;switch(m&&(b="center",w="center"),f+=p,c+=y,0!==(h=e?this.getTextAngle(n,r):0)&&(u=f,s=c,t.translate(u,s),t.rotate(h),f=0,c=0),w){case"top":break;case"center":c+=g/2;break;case"bottom":c+=g}var x=n.pstyle("text-background-opacity").value,M=n.pstyle("text-border-opacity").value,k=n.pstyle("text-border-width").pfValue,E=n.pstyle("text-background-padding").pfValue,S=0===n.pstyle("text-background-shape").strValue.indexOf("round");if(x>0||k>0&&M>0){var A=f-E;switch(b){case"left":A-=d;break;case"center":A-=d/2}var z=c-g-E,B=d+2*E,C=g+2*E;if(x>0){var T=t.fillStyle,O=n.pstyle("text-background-color").value;t.fillStyle="rgba("+O[0]+","+O[1]+","+O[2]+","+x*o+")",S?ml(t,A,z,B,C,2):t.fillRect(A,z,B,C),t.fillStyle=T}if(k>0&&M>0){var P=t.strokeStyle,N=t.lineWidth,j=n.pstyle("text-border-color").value,F=n.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+j[0]+","+j[1]+","+j[2]+","+M*o+")",t.lineWidth=k,t.setLineDash)switch(F){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=k/4,t.setLineDash([]);break;case"solid":t.setLineDash([])}if(S?ml(t,A,z,B,C,2,"stroke"):t.strokeRect(A,z,B,C),"double"===F){var D=k/2;S?ml(t,A+D,z+D,B-2*D,C-2*D,2,"stroke"):t.strokeRect(A+D,z+D,B-2*D,C-2*D)}t.setLineDash&&t.setLineDash([]),t.lineWidth=N,t.strokeStyle=P}}var I=2*n.pstyle("text-outline-width").pfValue;if(I>0&&(t.lineWidth=I),"wrap"===n.pstyle("text-wrap").value){var $=or(a,"labelWrapCachedLines",r),L=or(a,"labelLineHeight",r),R=d/2,_=this.getLabelJustification(n);switch("auto"===_||("left"===b?"left"===_?f+=-d:"center"===_&&(f+=-R):"center"===b?"left"===_?f+=-R:"right"===_&&(f+=R):"right"===b&&("center"===_?f+=R:"right"===_&&(f+=d))),w){case"top":case"center":case"bottom":c-=($.length-1)*L}for(var q=0;q<$.length;q++)I>0&&t.strokeText($[q],f,c),t.fillText($[q],f,c),c+=L}else I>0&&t.strokeText(l,f,c),t.fillText(l,f,c);0!==h&&(t.rotate(-h),t.translate(-u,-s))}}};var bl={drawNode:function(t,n,r){var e,i,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],u=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=this,f=n._private,c=f.rscratch,l=n.position();if(St(l.x)&&St(l.y)&&(!u||n.visible())){var h,v,d=u?n.effectiveOpacity():1,g=s.usePaths(),p=!1,y=n.padding();e=n.width()+2*y,i=n.height()+2*y,r&&(v=r,t.translate(-v.x1,-v.y1));for(var m=n.pstyle("background-image").value,b=new Array(m.length),w=new Array(m.length),x=0,M=0;M<m.length;M++){var k=m[M];if(b[M]=null!=k&&"none"!==k){var E=n.cy().style().getIndexedStyle(n,"background-image-crossorigin","value",M);x++,w[M]=s.getCachedImage(k,E,(function(){f.backgroundTimestamp=Date.now(),n.emitAndNotify("background")}))}}var S=n.pstyle("background-blacken").value,A=n.pstyle("border-width").pfValue,z=n.pstyle("background-opacity").value*d,B=n.pstyle("border-color").value,C=n.pstyle("border-style").value,T=n.pstyle("border-join").value,O=n.pstyle("border-cap").value,P=n.pstyle("border-position").value,N=n.pstyle("border-dash-pattern").pfValue,j=n.pstyle("border-dash-offset").pfValue,F=n.pstyle("border-opacity").value*d,D=n.pstyle("outline-width").pfValue,I=n.pstyle("outline-color").value,$=n.pstyle("outline-style").value,L=n.pstyle("outline-opacity").value*d,R=n.pstyle("outline-offset").value,_=n.pstyle("corner-radius").value;"auto"!==_&&(_=n.pstyle("corner-radius").pfValue);var q=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z;s.eleFillStyle(t,n,r)},V=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;s.colorStrokeStyle(t,B[0],B[1],B[2],n)},U=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;s.colorStrokeStyle(t,I[0],I[1],I[2],n)},W=function(t,n,r,e){var i,a=s.nodePathCache=s.nodePathCache||[],o=Rn("polygon"===r?r+","+e.join(","):r,""+n,""+t,""+_),u=a[o],f=!1;return null!=u?(i=u,f=!0,c.pathCache=i):(i=new Path2D,a[o]=c.pathCache=i),{path:i,cacheHit:f}},Z=n.pstyle("shape").strValue,H=n.pstyle("shape-polygon-points").pfValue;if(g){t.translate(l.x,l.y);var K=W(e,i,Z,H);h=K.path,p=K.cacheHit}var G=function(){if(!p){var r=l;g&&(r={x:0,y:0}),s.nodeShapes[s.getNodeShape(n)].draw(h||t,r.x,r.y,e,i,_,c)}g?t.fill(h):t.fill()},Y=function(){for(var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=f.backgrounding,a=0,o=0;o<w.length;o++){var u=n.cy().style().getIndexedStyle(n,"background-image-containment","value",o);e&&"over"===u||!e&&"inside"===u?a++:b[o]&&w[o].complete&&!w[o].error&&(a++,s.drawInscribedImage(t,w[o],n,o,r))}f.backgrounding=!(a===x),i!==f.backgrounding&&n.updateStyle(!1)},X=function(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;s.hasPie(n)&&(s.drawPie(t,n,a),r&&(g||s.nodeShapes[s.getNodeShape(n)].draw(t,l.x,l.y,e,i,_,c)))},Q=function(){var n=(S>0?S:-S)*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:d),r=S>0?0:255;0!==S&&(s.colorFillStyle(t,r,r,r,n),g?t.fill(h):t.fill())},J=function(){if(A>0){if(t.lineWidth=A,t.lineCap=O,t.lineJoin=T,t.setLineDash)switch(C){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash(N),t.lineDashOffset=j;break;case"solid":case"double":t.setLineDash([])}if("center"!==P){if(t.save(),t.lineWidth*=2,"inside"===P)g?t.clip(h):t.clip();else{var n=new Path2D;n.rect(-e/2-A,-i/2-A,e+2*A,i+2*A),n.addPath(h),t.clip(n,"evenodd")}g?t.stroke(h):t.stroke(),t.restore()}else g?t.stroke(h):t.stroke();if("double"===C){t.lineWidth=A/3;var r=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",g?t.stroke(h):t.stroke(),t.globalCompositeOperation=r}t.setLineDash&&t.setLineDash([])}},tt=function(){if(D>0){if(t.lineWidth=D,t.lineCap="butt",t.setLineDash)switch($){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([])}var r=l;g&&(r={x:0,y:0});var a=s.getNodeShape(n),o=A;"inside"===P&&(o=0),"outside"===P&&(o*=2);var u,f=(e+o+(D+R))/e,c=(i+o+(D+R))/i,h=e*f,v=i*c,d=s.nodeShapes[a].points;if(g)u=W(h,v,a,d).path;if("ellipse"===a)s.drawEllipsePath(u||t,r.x,r.y,h,v);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(a)){var p=0,y=0,m=0;"round-diamond"===a?p=1.4*(o+R+D):"round-heptagon"===a?(p=1.075*(o+R+D),m=-(o/2+R+D)/35):"round-hexagon"===a?p=1.12*(o+R+D):"round-pentagon"===a?(p=1.13*(o+R+D),m=-(o/2+R+D)/15):"round-tag"===a?(p=1.12*(o+R+D),y=.07*(o/2+D+R)):"round-triangle"===a&&(p=(o+R+D)*(Math.PI/2),m=-(o+R/2+D)/Math.PI),0!==p&&(h=e*(f=(e+p)/e),["round-hexagon","round-tag"].includes(a)||(v=i*(c=(i+p)/i)));for(var b=h/2,w=v/2,x=(_="auto"===_?ge(h,v):_)+(o+D+R)/2,M=new Array(d.length/2),k=new Array(d.length/2),E=0;E<d.length/2;E++)M[E]={x:r.x+y+b*d[2*E],y:r.y+m+w*d[2*E+1]};var S,z,B,C,T=M.length;for(z=M[T-1],S=0;S<T;S++)B=M[S%T],C=M[(S+1)%T],k[S]=Mc(z,B,C,x),z=B,B=C;s.drawRoundPolygonPath(u||t,r.x+y,r.y+m,e*f,i*c,d,k)}else if(["roundrectangle","round-rectangle"].includes(a))_="auto"===_?de(h,v):_,s.drawRoundRectanglePath(u||t,r.x,r.y,h,v,_+(o+D+R)/2);else if(["cutrectangle","cut-rectangle"].includes(a))_="auto"===_?8:_,s.drawCutRectanglePath(u||t,r.x,r.y,h,v,null,_+(o+D+R)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(a))_="auto"===_?de(h,v):_,s.drawBottomRoundRectanglePath(u||t,r.x,r.y,h,v,_+(o+D+R)/2);else if("barrel"===a)s.drawBarrelPath(u||t,r.x,r.y,h,v);else if(a.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(a)){d=ee(ie(d,(o+D+R)/e)),s.drawPolygonPath(u||t,r.x,r.y,e,i,d)}else{d=ee(ie(d,-((o+D+R)/e))),s.drawPolygonPath(u||t,r.x,r.y,e,i,d)}if(g?t.stroke(u):t.stroke(),"double"===$){t.lineWidth=o/3;var O=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",g?t.stroke(u):t.stroke(),t.globalCompositeOperation=O}t.setLineDash&&t.setLineDash([])}};if("yes"===n.pstyle("ghost").value){var nt=n.pstyle("ghost-offset-x").pfValue,rt=n.pstyle("ghost-offset-y").pfValue,et=n.pstyle("ghost-opacity").value,it=et*d;t.translate(nt,rt),U(),tt(),q(et*z),G(),Y(it,!0),V(et*F),J(),X(0!==S||0!==A),Y(it,!1),Q(it),t.translate(-nt,-rt)}g&&t.translate(-l.x,-l.y),o&&s.drawNodeUnderlay(t,n,l,e,i),g&&t.translate(l.x,l.y),U(),tt(),q(),G(),Y(d,!0),V(),J(),X(0!==S||0!==A),Y(d,!1),Q(),g&&t.translate(-l.x,-l.y),s.drawElementText(t,n,null,a),o&&s.drawNodeOverlay(t,n,l,e,i),r&&t.translate(v.x1,v.y1)}}},wl=function(t){if(!["overlay","underlay"].includes(t))throw new Error("Invalid state");return function(n,r,e,i,a){if(r.visible()){var o=r.pstyle("".concat(t,"-padding")).pfValue,u=r.pstyle("".concat(t,"-opacity")).value,s=r.pstyle("".concat(t,"-color")).value,f=r.pstyle("".concat(t,"-shape")).value,c=r.pstyle("".concat(t,"-corner-radius")).value;if(u>0){if(e=e||r.position(),null==i||null==a){var l=r.padding();i=r.width()+2*l,a=r.height()+2*l}this.colorFillStyle(n,s[0],s[1],s[2],u),this.nodeShapes[f].draw(n,e.x,e.y,i+2*o,a+2*o,c),n.fill()}}}};bl.drawNodeOverlay=wl("overlay"),bl.drawNodeUnderlay=wl("underlay"),bl.hasPie=function(t){return(t=t[0])._private.hasPie},bl.drawPie=function(t,n,r,e){n=n[0],e=e||n.position();var i=n.cy().style(),a=n.pstyle("pie-size"),o=e.x,u=e.y,s=n.width(),f=n.height(),c=Math.min(s,f)/2,l=0;this.usePaths()&&(o=0,u=0),"%"===a.units?c*=a.pfValue:void 0!==a.pfValue&&(c=a.pfValue/2);for(var h=1;h<=i.pieBackgroundN;h++){var v=n.pstyle("pie-"+h+"-background-size").value,d=n.pstyle("pie-"+h+"-background-color").value,g=n.pstyle("pie-"+h+"-background-opacity").value*r,p=v/100;p+l>1&&(p=1-l);var y=1.5*Math.PI+2*Math.PI*l,m=y+2*Math.PI*p;0===v||l>=1||l+p>1||(t.beginPath(),t.moveTo(o,u),t.arc(o,u,c,y,m),t.closePath(),this.colorFillStyle(t,d[0],d[1],d[2],g),t.fill(),l+=p)}};var xl={};xl.getPixelRatio=function(){var t=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var n=this.cy.window(),r=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(n.devicePixelRatio||1)/r},xl.paintCache=function(t){for(var n,r=this.paintCaches=this.paintCaches||[],e=!0,i=0;i<r.length;i++)if((n=r[i]).context===t){e=!1;break}return e&&(n={context:t},r.push(n)),n},xl.createGradientStyleFor=function(t,n,r,e,i){var a,o=this.usePaths(),u=r.pstyle(n+"-gradient-stop-colors").value,s=r.pstyle(n+"-gradient-stop-positions").pfValue;if("radial-gradient"===e)if(r.isEdge()){var f=r.sourceEndpoint(),c=r.targetEndpoint(),l=r.midpoint(),h=Fr(f,l),v=Fr(c,l);a=t.createRadialGradient(l.x,l.y,0,l.x,l.y,Math.max(h,v))}else{var d=o?{x:0,y:0}:r.position(),g=r.paddedWidth(),p=r.paddedHeight();a=t.createRadialGradient(d.x,d.y,0,d.x,d.y,Math.max(g,p))}else if(r.isEdge()){var y=r.sourceEndpoint(),m=r.targetEndpoint();a=t.createLinearGradient(y.x,y.y,m.x,m.y)}else{var b=o?{x:0,y:0}:r.position(),w=r.paddedWidth()/2,x=r.paddedHeight()/2;switch(r.pstyle("background-gradient-direction").value){case"to-bottom":a=t.createLinearGradient(b.x,b.y-x,b.x,b.y+x);break;case"to-top":a=t.createLinearGradient(b.x,b.y+x,b.x,b.y-x);break;case"to-left":a=t.createLinearGradient(b.x+w,b.y,b.x-w,b.y);break;case"to-right":a=t.createLinearGradient(b.x-w,b.y,b.x+w,b.y);break;case"to-bottom-right":case"to-right-bottom":a=t.createLinearGradient(b.x-w,b.y-x,b.x+w,b.y+x);break;case"to-top-right":case"to-right-top":a=t.createLinearGradient(b.x-w,b.y+x,b.x+w,b.y-x);break;case"to-bottom-left":case"to-left-bottom":a=t.createLinearGradient(b.x+w,b.y-x,b.x-w,b.y+x);break;case"to-top-left":case"to-left-top":a=t.createLinearGradient(b.x+w,b.y+x,b.x-w,b.y-x)}}if(!a)return null;for(var M=s.length===u.length,k=u.length,E=0;E<k;E++)a.addColorStop(M?s[E]:E/(k-1),"rgba("+u[E][0]+","+u[E][1]+","+u[E][2]+","+i+")");return a},xl.gradientFillStyle=function(t,n,r,e){var i=this.createGradientStyleFor(t,"background",n,r,e);if(!i)return null;t.fillStyle=i},xl.colorFillStyle=function(t,n,r,e,i){t.fillStyle="rgba("+n+","+r+","+e+","+i+")"},xl.eleFillStyle=function(t,n,r){var e=n.pstyle("background-fill").value;if("linear-gradient"===e||"radial-gradient"===e)this.gradientFillStyle(t,n,e,r);else{var i=n.pstyle("background-color").value;this.colorFillStyle(t,i[0],i[1],i[2],r)}},xl.gradientStrokeStyle=function(t,n,r,e){var i=this.createGradientStyleFor(t,"line",n,r,e);if(!i)return null;t.strokeStyle=i},xl.colorStrokeStyle=function(t,n,r,e,i){t.strokeStyle="rgba("+n+","+r+","+e+","+i+")"},xl.eleStrokeStyle=function(t,n,r){var e=n.pstyle("line-fill").value;if("linear-gradient"===e||"radial-gradient"===e)this.gradientStrokeStyle(t,n,e,r);else{var i=n.pstyle("line-color").value;this.colorStrokeStyle(t,i[0],i[1],i[2],r)}},xl.matchCanvasSize=function(t){var n=this,r=n.data,e=n.findContainerClientCoords(),i=e[2],a=e[3],o=n.getPixelRatio(),u=n.motionBlurPxRatio;t!==n.data.bufferCanvases[n.MOTIONBLUR_BUFFER_NODE]&&t!==n.data.bufferCanvases[n.MOTIONBLUR_BUFFER_DRAG]||(o=u);var s,f=i*o,c=a*o;if(f!==n.canvasWidth||c!==n.canvasHeight){n.fontCaches=null;var l=r.canvasContainer;l.style.width=i+"px",l.style.height=a+"px";for(var h=0;h<n.CANVAS_LAYERS;h++)(s=r.canvases[h]).width=f,s.height=c,s.style.width=i+"px",s.style.height=a+"px";for(h=0;h<n.BUFFER_COUNT;h++)(s=r.bufferCanvases[h]).width=f,s.height=c,s.style.width=i+"px",s.style.height=a+"px";n.textureMult=1,o<=1&&(s=r.bufferCanvases[n.TEXTURE_BUFFER],n.textureMult=2,s.width=f*n.textureMult,s.height=c*n.textureMult),n.canvasWidth=f,n.canvasHeight=c}},xl.renderTo=function(t,n,r,e){this.render({forcedContext:t,forcedZoom:n,forcedPan:r,drawAllLayers:!0,forcedPxRatio:e})},xl.render=function(t){var n=(t=t||rr()).forcedContext,r=t.drawAllLayers,e=t.drawOnlyNodeLayer,i=t.forcedZoom,a=t.forcedPan,o=this,u=void 0===t.forcedPxRatio?this.getPixelRatio():t.forcedPxRatio,s=o.cy,f=o.data,c=f.canvasNeedsRedraw,l=o.textureOnViewport&&!n&&(o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming),h=void 0!==t.motionBlur?t.motionBlur:o.motionBlur,v=o.motionBlurPxRatio,d=s.hasCompoundNodes(),g=o.hoverData.draggingEles,p=!(!o.hoverData.selecting&&!o.touchData.selecting),y=h=h&&!n&&o.motionBlurEnabled&&!p;n||(o.prevPxRatio!==u&&(o.invalidateContainerClientCoordsCache(),o.matchCanvasSize(o.container),o.redrawHint("eles",!0),o.redrawHint("drag",!0)),o.prevPxRatio=u),!n&&o.motionBlurTimeout&&clearTimeout(o.motionBlurTimeout),h&&(null==o.mbFrames&&(o.mbFrames=0),o.mbFrames++,o.mbFrames<3&&(y=!1),o.mbFrames>o.minMbLowQualFrames&&(o.motionBlurPxRatio=o.mbPxRBlurry)),o.clearingMotionBlur&&(o.motionBlurPxRatio=1),o.textureDrawLastFrame&&!l&&(c[o.NODE]=!0,c[o.SELECT_BOX]=!0);var m=s.style(),b=s.zoom(),w=void 0!==i?i:b,x=s.pan(),M={x:x.x,y:x.y},k={zoom:b,pan:{x:x.x,y:x.y}},E=o.prevViewport;void 0===E||k.zoom!==E.zoom||k.pan.x!==E.pan.x||k.pan.y!==E.pan.y||g&&!d||(o.motionBlurPxRatio=1),a&&(M=a),w*=u,M.x*=u,M.y*=u;var S=o.getCachedZSortedEles();function A(t,n,r,e,i){var a=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",o.colorFillStyle(t,255,255,255,o.motionBlurTransparency),t.fillRect(n,r,e,i),t.globalCompositeOperation=a}function z(t,e){var u,s,c,l;o.clearingMotionBlur||t!==f.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]&&t!==f.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG]?(u=M,s=w,c=o.canvasWidth,l=o.canvasHeight):(u={x:x.x*v,y:x.y*v},s=b*v,c=o.canvasWidth*v,l=o.canvasHeight*v),t.setTransform(1,0,0,1,0,0),"motionBlur"===e?A(t,0,0,c,l):n||void 0!==e&&!e||t.clearRect(0,0,c,l),r||(t.translate(u.x,u.y),t.scale(s,s)),a&&t.translate(a.x,a.y),i&&t.scale(i,i)}if(l||(o.textureDrawLastFrame=!1),l){if(o.textureDrawLastFrame=!0,!o.textureCache){o.textureCache={},o.textureCache.bb=s.mutableElements().boundingBox(),o.textureCache.texture=o.data.bufferCanvases[o.TEXTURE_BUFFER];var B=o.data.bufferContexts[o.TEXTURE_BUFFER];B.setTransform(1,0,0,1,0,0),B.clearRect(0,0,o.canvasWidth*o.textureMult,o.canvasHeight*o.textureMult),o.render({forcedContext:B,drawOnlyNodeLayer:!0,forcedPxRatio:u*o.textureMult}),(k=o.textureCache.viewport={zoom:s.zoom(),pan:s.pan(),width:o.canvasWidth,height:o.canvasHeight}).mpan={x:(0-k.pan.x)/k.zoom,y:(0-k.pan.y)/k.zoom}}c[o.DRAG]=!1,c[o.NODE]=!1;var C=f.contexts[o.NODE],T=o.textureCache.texture;k=o.textureCache.viewport;C.setTransform(1,0,0,1,0,0),h?A(C,0,0,k.width,k.height):C.clearRect(0,0,k.width,k.height);var O=m.core("outside-texture-bg-color").value,P=m.core("outside-texture-bg-opacity").value;o.colorFillStyle(C,O[0],O[1],O[2],P),C.fillRect(0,0,k.width,k.height);b=s.zoom();z(C,!1),C.clearRect(k.mpan.x,k.mpan.y,k.width/k.zoom/u,k.height/k.zoom/u),C.drawImage(T,k.mpan.x,k.mpan.y,k.width/k.zoom/u,k.height/k.zoom/u)}else o.textureOnViewport&&!n&&(o.textureCache=null);var N=s.extent(),j=o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming||o.hoverData.draggingEles||o.cy.animated(),F=o.hideEdgesOnViewport&&j,D=[];if(D[o.NODE]=!c[o.NODE]&&h&&!o.clearedForMotionBlur[o.NODE]||o.clearingMotionBlur,D[o.NODE]&&(o.clearedForMotionBlur[o.NODE]=!0),D[o.DRAG]=!c[o.DRAG]&&h&&!o.clearedForMotionBlur[o.DRAG]||o.clearingMotionBlur,D[o.DRAG]&&(o.clearedForMotionBlur[o.DRAG]=!0),c[o.NODE]||r||e||D[o.NODE]){var I=h&&!D[o.NODE]&&1!==v;z(C=n||(I?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]:f.contexts[o.NODE]),h&&!I?"motionBlur":void 0),F?o.drawCachedNodes(C,S.nondrag,u,N):o.drawLayeredElements(C,S.nondrag,u,N),o.debug&&o.drawDebugPoints(C,S.nondrag),r||h||(c[o.NODE]=!1)}if(!e&&(c[o.DRAG]||r||D[o.DRAG])){I=h&&!D[o.DRAG]&&1!==v;z(C=n||(I?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG]:f.contexts[o.DRAG]),h&&!I?"motionBlur":void 0),F?o.drawCachedNodes(C,S.drag,u,N):o.drawCachedElements(C,S.drag,u,N),o.debug&&o.drawDebugPoints(C,S.drag),r||h||(c[o.DRAG]=!1)}if(o.showFps||!e&&c[o.SELECT_BOX]&&!r){if(z(C=n||f.contexts[o.SELECT_BOX]),1==o.selection[4]&&(o.hoverData.selecting||o.touchData.selecting)){b=o.cy.zoom();var $=m.core("selection-box-border-width").value/b;C.lineWidth=$,C.fillStyle="rgba("+m.core("selection-box-color").value[0]+","+m.core("selection-box-color").value[1]+","+m.core("selection-box-color").value[2]+","+m.core("selection-box-opacity").value+")",C.fillRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]),$>0&&(C.strokeStyle="rgba("+m.core("selection-box-border-color").value[0]+","+m.core("selection-box-border-color").value[1]+","+m.core("selection-box-border-color").value[2]+","+m.core("selection-box-opacity").value+")",C.strokeRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]))}if(f.bgActivePosistion&&!o.hoverData.selecting){b=o.cy.zoom();var L=f.bgActivePosistion;C.fillStyle="rgba("+m.core("active-bg-color").value[0]+","+m.core("active-bg-color").value[1]+","+m.core("active-bg-color").value[2]+","+m.core("active-bg-opacity").value+")",C.beginPath(),C.arc(L.x,L.y,m.core("active-bg-size").pfValue/b,0,2*Math.PI),C.fill()}var R=o.lastRedrawTime;if(o.showFps&&R){R=Math.round(R);var _=Math.round(1e3/R);C.setTransform(1,0,0,1,0,0),C.fillStyle="rgba(255, 0, 0, 0.75)",C.strokeStyle="rgba(255, 0, 0, 0.75)",C.lineWidth=1,C.fillText("1 frame = "+R+" ms = "+_+" fps",0,20);C.strokeRect(0,30,250,20),C.fillRect(0,30,250*Math.min(_/60,1),20)}r||(c[o.SELECT_BOX]=!1)}if(h&&1!==v){var q=f.contexts[o.NODE],V=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_NODE],U=f.contexts[o.DRAG],W=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_DRAG],Z=function(t,n,r){t.setTransform(1,0,0,1,0,0),r||!y?t.clearRect(0,0,o.canvasWidth,o.canvasHeight):A(t,0,0,o.canvasWidth,o.canvasHeight);var e=v;t.drawImage(n,0,0,o.canvasWidth*e,o.canvasHeight*e,0,0,o.canvasWidth,o.canvasHeight)};(c[o.NODE]||D[o.NODE])&&(Z(q,V,D[o.NODE]),c[o.NODE]=!1),(c[o.DRAG]||D[o.DRAG])&&(Z(U,W,D[o.DRAG]),c[o.DRAG]=!1)}o.prevViewport=k,o.clearingMotionBlur&&(o.clearingMotionBlur=!1,o.motionBlurCleared=!0,o.motionBlur=!0),h&&(o.motionBlurTimeout=setTimeout((function(){o.motionBlurTimeout=null,o.clearedForMotionBlur[o.NODE]=!1,o.clearedForMotionBlur[o.DRAG]=!1,o.motionBlur=!1,o.clearingMotionBlur=!l,o.mbFrames=0,c[o.NODE]=!0,c[o.DRAG]=!0,o.redraw()}),100)),n||s.emit("render")};for(var Ml={drawPolygonPath:function(t,n,r,e,i,a){var o=e/2,u=i/2;t.beginPath&&t.beginPath(),t.moveTo(n+o*a[0],r+u*a[1]);for(var s=1;s<a.length/2;s++)t.lineTo(n+o*a[2*s],r+u*a[2*s+1]);t.closePath()},drawRoundPolygonPath:function(t,n,r,e,i,a,o){o.forEach((function(n){return xc(t,n)})),t.closePath()},drawRoundRectanglePath:function(t,n,r,e,i,a){var o=e/2,u=i/2,s="auto"===a?de(e,i):Math.min(a,u,o);t.beginPath&&t.beginPath(),t.moveTo(n,r-u),t.arcTo(n+o,r-u,n+o,r,s),t.arcTo(n+o,r+u,n,r+u,s),t.arcTo(n-o,r+u,n-o,r,s),t.arcTo(n-o,r-u,n,r-u,s),t.lineTo(n,r-u),t.closePath()},drawBottomRoundRectanglePath:function(t,n,r,e,i,a){var o=e/2,u=i/2,s="auto"===a?de(e,i):a;t.beginPath&&t.beginPath(),t.moveTo(n,r-u),t.lineTo(n+o,r-u),t.lineTo(n+o,r),t.arcTo(n+o,r+u,n,r+u,s),t.arcTo(n-o,r+u,n-o,r,s),t.lineTo(n-o,r-u),t.lineTo(n,r-u),t.closePath()},drawCutRectanglePath:function(t,n,r,e,i,a,o){var u=e/2,s=i/2,f="auto"===o?8:o;t.beginPath&&t.beginPath(),t.moveTo(n-u+f,r-s),t.lineTo(n+u-f,r-s),t.lineTo(n+u,r-s+f),t.lineTo(n+u,r+s-f),t.lineTo(n+u-f,r+s),t.lineTo(n-u+f,r+s),t.lineTo(n-u,r+s-f),t.lineTo(n-u,r-s+f),t.closePath()},drawBarrelPath:function(t,n,r,e,i){var a=e/2,o=i/2,u=n-a,s=n+a,f=r-o,c=r+o,l=pe(e,i),h=l.widthOffset,v=l.heightOffset,d=l.ctrlPtOffsetPct*h;t.beginPath&&t.beginPath(),t.moveTo(u,f+v),t.lineTo(u,c-v),t.quadraticCurveTo(u+d,c,u+h,c),t.lineTo(s-h,c),t.quadraticCurveTo(s-d,c,s,c-v),t.lineTo(s,f+v),t.quadraticCurveTo(s-d,f,s-h,f),t.lineTo(u+h,f),t.quadraticCurveTo(u+d,f,u,f+v),t.closePath()}},kl=Math.sin(0),El=Math.cos(0),Sl={},Al={},zl=Math.PI/40,Bl=0*Math.PI;Bl<2*Math.PI;Bl+=zl)Sl[Bl]=Math.sin(Bl),Al[Bl]=Math.cos(Bl);Ml.drawEllipsePath=function(t,n,r,e,i){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(n,r,e/2,i/2,0,0,2*Math.PI);else for(var a,o,u=e/2,s=i/2,f=0*Math.PI;f<2*Math.PI;f+=zl)a=n-u*Sl[f]*kl+u*Al[f]*El,o=r+s*Al[f]*kl+s*Sl[f]*El,0===f?t.moveTo(a,o):t.lineTo(a,o);t.closePath()};var Cl={};function Tl(t){var n=t.indexOf(",");return t.substr(n+1)}function Ol(t,n,r){var e=function(){return n.toDataURL(r,t.quality)};switch(t.output){case"blob-promise":return new Ti((function(e,i){try{n.toBlob((function(t){null!=t?e(t):i(new Error("`canvas.toBlob()` sent a null value in its callback"))}),r,t.quality)}catch(t){i(t)}}));case"blob":return function(t,n){for(var r=atob(t),e=new ArrayBuffer(r.length),i=new Uint8Array(e),a=0;a<r.length;a++)i[a]=r.charCodeAt(a);return new Blob([e],{type:n})}(Tl(e()),r);case"base64":return Tl(e());default:return e()}}Cl.createBuffer=function(t,n){var r=document.createElement("canvas");return r.width=t,r.height=n,[r,r.getContext("2d")]},Cl.bufferCanvasImage=function(t){var n=this.cy,r=n.mutableElements().boundingBox(),e=this.findContainerClientCoords(),i=t.full?Math.ceil(r.w):e[2],a=t.full?Math.ceil(r.h):e[3],o=St(t.maxWidth)||St(t.maxHeight),u=this.getPixelRatio(),s=1;if(void 0!==t.scale)i*=t.scale,a*=t.scale,s=t.scale;else if(o){var f=1/0,c=1/0;St(t.maxWidth)&&(f=s*t.maxWidth/i),St(t.maxHeight)&&(c=s*t.maxHeight/a),i*=s=Math.min(f,c),a*=s}o||(i*=u,a*=u,s*=u);var l=document.createElement("canvas");l.width=i,l.height=a,l.style.width=i+"px",l.style.height=a+"px";var h=l.getContext("2d");if(i>0&&a>0){h.clearRect(0,0,i,a),h.globalCompositeOperation="source-over";var v=this.getCachedZSortedEles();if(t.full)h.translate(-r.x1*s,-r.y1*s),h.scale(s,s),this.drawElements(h,v),h.scale(1/s,1/s),h.translate(r.x1*s,r.y1*s);else{var d=n.pan(),g={x:d.x*s,y:d.y*s};s*=n.zoom(),h.translate(g.x,g.y),h.scale(s,s),this.drawElements(h,v),h.scale(1/s,1/s),h.translate(-g.x,-g.y)}t.bg&&(h.globalCompositeOperation="destination-over",h.fillStyle=t.bg,h.rect(0,0,i,a),h.fill())}return l},Cl.png=function(t){return Ol(t,this.bufferCanvasImage(t),"image/png")},Cl.jpg=function(t){return Ol(t,this.bufferCanvasImage(t),"image/jpeg")};var Pl={nodeShapeImpl:function(t,n,r,e,i,a,o,u){switch(t){case"ellipse":return this.drawEllipsePath(n,r,e,i,a);case"polygon":return this.drawPolygonPath(n,r,e,i,a,o);case"round-polygon":return this.drawRoundPolygonPath(n,r,e,i,a,o,u);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(n,r,e,i,a,u);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(n,r,e,i,a,o,u);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(n,r,e,i,a,u);case"barrel":return this.drawBarrelPath(n,r,e,i,a)}}},Nl=Fl,jl=Fl.prototype;function Fl(t){var n=this,r=n.cy.window().document;n.data={canvases:new Array(jl.CANVAS_LAYERS),contexts:new Array(jl.CANVAS_LAYERS),canvasNeedsRedraw:new Array(jl.CANVAS_LAYERS),bufferCanvases:new Array(jl.BUFFER_COUNT),bufferContexts:new Array(jl.CANVAS_LAYERS)};var e="-webkit-tap-highlight-color",i="rgba(0,0,0,0)";n.data.canvasContainer=r.createElement("div");var a=n.data.canvasContainer.style;n.data.canvasContainer.style[e]=i,a.position="relative",a.zIndex="0",a.overflow="hidden";var o=t.cy.container();o.appendChild(n.data.canvasContainer),o.style[e]=i;var u={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};gt&&gt.userAgent.match(/msie|trident|edge/i)&&(u["-ms-touch-action"]="none",u["touch-action"]="none");for(var s=0;s<jl.CANVAS_LAYERS;s++){var f=n.data.canvases[s]=r.createElement("canvas");n.data.contexts[s]=f.getContext("2d"),Object.keys(u).forEach((function(t){f.style[t]=u[t]})),f.style.position="absolute",f.setAttribute("data-id","layer"+s),f.style.zIndex=String(jl.CANVAS_LAYERS-s),n.data.canvasContainer.appendChild(f),n.data.canvasNeedsRedraw[s]=!1}n.data.topCanvas=n.data.canvases[0],n.data.canvases[jl.NODE].setAttribute("data-id","layer"+jl.NODE+"-node"),n.data.canvases[jl.SELECT_BOX].setAttribute("data-id","layer"+jl.SELECT_BOX+"-selectbox"),n.data.canvases[jl.DRAG].setAttribute("data-id","layer"+jl.DRAG+"-drag");for(s=0;s<jl.BUFFER_COUNT;s++)n.data.bufferCanvases[s]=r.createElement("canvas"),n.data.bufferContexts[s]=n.data.bufferCanvases[s].getContext("2d"),n.data.bufferCanvases[s].style.position="absolute",n.data.bufferCanvases[s].setAttribute("data-id","buffer"+s),n.data.bufferCanvases[s].style.zIndex=String(-s-1),n.data.bufferCanvases[s].style.visibility="hidden";n.pathsEnabled=!0;var c=_r(),l=function(t){return{x:-t.w/2,y:-t.h/2}},h=function(t){return t.boundingBox(),t[0]._private.bodyBounds},v=function(t){return t.boundingBox(),t[0]._private.labelBounds.main||c},d=function(t){return t.boundingBox(),t[0]._private.labelBounds.source||c},g=function(t){return t.boundingBox(),t[0]._private.labelBounds.target||c},p=function(t,n){return n},y=function(t,n,r){var e=t?t+"-":"";return{x:n.x+r.pstyle(e+"text-margin-x").pfValue,y:n.y+r.pstyle(e+"text-margin-y").pfValue}},m=function(t,n,r){var e=t[0]._private.rscratch;return{x:e[n],y:e[r]}},b=n.data.eleTxrCache=new Kc(n,{getKey:function(t){return t[0]._private.nodeKey},doesEleInvalidateKey:function(t){var n=t[0]._private;return!(n.oldBackgroundTimestamp===n.backgroundTimestamp)},drawElement:function(t,r,e,i,a){return n.drawElement(t,r,e,!1,!1,a)},getBoundingBox:h,getRotationPoint:function(t){return{x:((n=h(t)).x1+n.x2)/2,y:(n.y1+n.y2)/2};var n},getRotationOffset:function(t){return l(h(t))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),w=n.data.lblTxrCache=new Kc(n,{getKey:function(t){return t[0]._private.labelStyleKey},drawElement:function(t,r,e,i,a){return n.drawElementText(t,r,e,i,"main",a)},getBoundingBox:v,getRotationPoint:function(t){return y("",m(t,"labelX","labelY"),t)},getRotationOffset:function(t){var n=v(t),r=l(v(t));if(t.isNode()){switch(t.pstyle("text-halign").value){case"left":r.x=-n.w-(n.leftPad||0);break;case"right":r.x=-(n.rightPad||0)}switch(t.pstyle("text-valign").value){case"top":r.y=-n.h-(n.topPad||0);break;case"bottom":r.y=-(n.botPad||0)}}return r},isVisible:p}),x=n.data.slbTxrCache=new Kc(n,{getKey:function(t){return t[0]._private.sourceLabelStyleKey},drawElement:function(t,r,e,i,a){return n.drawElementText(t,r,e,i,"source",a)},getBoundingBox:d,getRotationPoint:function(t){return y("source",m(t,"sourceLabelX","sourceLabelY"),t)},getRotationOffset:function(t){return l(d(t))},isVisible:p}),M=n.data.tlbTxrCache=new Kc(n,{getKey:function(t){return t[0]._private.targetLabelStyleKey},drawElement:function(t,r,e,i,a){return n.drawElementText(t,r,e,i,"target",a)},getBoundingBox:g,getRotationPoint:function(t){return y("target",m(t,"targetLabelX","targetLabelY"),t)},getRotationOffset:function(t){return l(g(t))},isVisible:p}),k=n.data.lyrTxrCache=new Yc(n);n.onUpdateEleCalcs((function(t,n){b.invalidateElements(n),w.invalidateElements(n),x.invalidateElements(n),M.invalidateElements(n),k.invalidateElements(n);for(var r=0;r<n.length;r++){var e=n[r]._private;e.oldBackgroundTimestamp=e.backgroundTimestamp}}));var E=function(t){for(var n=0;n<t.length;n++)k.enqueueElementRefinement(t[n].ele)};b.onDequeue(E),w.onDequeue(E),x.onDequeue(E),M.onDequeue(E)}jl.CANVAS_LAYERS=3,jl.SELECT_BOX=0,jl.DRAG=1,jl.NODE=2,jl.BUFFER_COUNT=3,jl.TEXTURE_BUFFER=0,jl.MOTIONBLUR_BUFFER_NODE=1,jl.MOTIONBLUR_BUFFER_DRAG=2,jl.redrawHint=function(t,n){var r=this;switch(t){case"eles":r.data.canvasNeedsRedraw[jl.NODE]=n;break;case"drag":r.data.canvasNeedsRedraw[jl.DRAG]=n;break;case"select":r.data.canvasNeedsRedraw[jl.SELECT_BOX]=n}};var Dl="undefined"!=typeof Path2D;jl.path2dEnabled=function(t){if(void 0===t)return this.pathsEnabled;this.pathsEnabled=!!t},jl.usePaths=function(){return Dl&&this.pathsEnabled},jl.setImgSmoothing=function(t,n){null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled=n:(t.webkitImageSmoothingEnabled=n,t.mozImageSmoothingEnabled=n,t.msImageSmoothingEnabled=n)},jl.getImgSmoothing=function(t){return null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled},jl.makeOffscreenCanvas=function(t,n){var r;"undefined"!==("undefined"==typeof OffscreenCanvas?"undefined":ot(OffscreenCanvas))?r=new OffscreenCanvas(t,n):((r=this.cy.window().document.createElement("canvas")).width=t,r.height=n);return r},[nl,ul,dl,pl,yl,bl,xl,Ml,Cl,Pl].forEach((function(t){Wt(jl,t)}));var Il=[{type:"layout",extensions:Hf},{type:"renderer",extensions:[{name:"null",impl:Kf},{name:"base",impl:_c},{name:"canvas",impl:Nl}]}],$l={},Ll={};function Rl(t,n,r){var e=r,i=function(r){Qn("Can not register `"+n+"` for `"+t+"` since `"+r+"` already exists in the prototype and can not be overridden")};if("core"===t){if(of.prototype[n])return i(n);of.prototype[n]=r}else if("collection"===t){if(xs.prototype[n])return i(n);xs.prototype[n]=r}else if("layout"===t){for(var a=function(t){this.options=t,r.call(this,t),Et(this._private)||(this._private={}),this._private.cy=t.cy,this._private.listeners=[],this.createEmitter()},o=a.prototype=Object.create(r.prototype),u=[],s=0;s<u.length;s++){var f=u[s];o[f]=o[f]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var c=r.prototype.stop;o.stop=function(){var t=this.options;if(t&&t.animate){var n=this.animations;if(n)for(var r=0;r<n.length;r++)n[r].stop()}return c?c.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var l=function(t){return t._private.cy},h={addEventFields:function(t,n){n.layout=t,n.cy=l(t),n.target=t},bubble:function(){return!0},parent:function(t){return l(t)}};Wt(o,{createEmitter:function(){return this._private.emitter=new Lu(h,this),this},emitter:function(){return this._private.emitter},on:function(t,n){return this.emitter().on(t,n),this},one:function(t,n){return this.emitter().one(t,n),this},once:function(t,n){return this.emitter().one(t,n),this},removeListener:function(t,n){return this.emitter().removeListener(t,n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(t,n){return this.emitter().emit(t,n),this}}),io.eventAliasesOn(o),e=a}else if("renderer"===t&&"null"!==n&&"base"!==n){var v=_l("renderer","base"),d=v.prototype,g=r,p=r.prototype,y=function(){v.apply(this,arguments),g.apply(this,arguments)},m=y.prototype;for(var b in d){var w=d[b];if(null!=p[b])return i(b);m[b]=w}for(var x in p)m[x]=p[x];d.clientFunctions.forEach((function(t){m[t]=m[t]||function(){Yn("Renderer does not implement `renderer."+t+"()` on its prototype")}})),e=y}else if("__proto__"===t||"constructor"===t||"prototype"===t)return Yn(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return Kt({map:$l,keys:[t,n],value:e})}function _l(t,n){return Gt({map:$l,keys:[t,n]})}function ql(t,n,r,e,i){return Kt({map:Ll,keys:[t,n,r,e],value:i})}function Vl(t,n,r,e){return Gt({map:Ll,keys:[t,n,r,e]})}var Ul=function(){return 2===arguments.length?_l.apply(null,arguments):3===arguments.length?Rl.apply(null,arguments):4===arguments.length?Vl.apply(null,arguments):5===arguments.length?ql.apply(null,arguments):void Yn("Invalid extension access syntax")};of.prototype.extension=Ul,Il.forEach((function(t){t.extensions.forEach((function(n){Rl(t.type,n.name,n.impl)}))}));var Wl=function t(){if(!(this instanceof t))return new t;this.length=0},Zl=Wl.prototype;Zl.instanceString=function(){return"stylesheet"},Zl.selector=function(t){return this[this.length++]={selector:t,properties:[]},this},Zl.css=function(t,n){var r=this.length-1;if(xt(t))this[r].properties.push({name:t,value:n});else if(Et(t))for(var e=t,i=Object.keys(e),a=0;a<i.length;a++){var o=i[a],u=e[o];if(null!=u){var s=tf.properties[o]||tf.properties[Dt(o)];if(null!=s){var f=s.name,c=u;this[r].properties.push({name:f,value:c})}}}return this},Zl.style=Zl.css,Zl.generateStyle=function(t){var n=new tf(t);return this.appendToStyle(n)},Zl.appendToStyle=function(t){for(var n=0;n<this.length;n++){var r=this[n],e=r.selector,i=r.properties;t.selector(e);for(var a=0;a<i.length;a++){var o=i[a];t.css(o.name,o.value)}}return t};var Hl=function(t){return void 0===t&&(t={}),Et(t)?new of(t):xt(t)?Ul.apply(Ul,arguments):void 0};Hl.use=function(t){var n=Array.prototype.slice.call(arguments,1);return n.unshift(Hl),t.apply(null,n),this},Hl.warnings=function(t){return Xn(t)},Hl.version="3.30.4",Hl.stylesheet=Hl.Stylesheet=Wl;class Kl extends it{static styles=a`
    :host {
      display: block;
      width: 100%;
      height: 100%;
    }

    #cytoscape-container {
      width: 100%;
      height: 100%;
    }
  `;static get properties(){return{elements:{type:Array},style:{type:Object},layout:{type:Object}}}firstUpdated(){const t=this.shadowRoot.getElementsByClassName("cytoscape-container");this.cy=Hl({container:t,elements:this.elements,style:this.style,layout:this.layout})}constructor(){super(),this.elements=[],this.style={},this.layout={name:"grid"}}updated(t){t.has("elements")&&this.cy.json({elements:this.elements}),t.has("style")&&this.cy.style(this.style),t.has("layout")&&this.cy.layout(this.layout).run()}render(){return _`<div class="cytoscape-container"></div>`}disconnectedCallback(){this.cy&&this.cy.destroy(),super.disconnectedCallback()}}window.customElements.define("cytoscape-network",Kl);export{Kl as CytoscapeNetwork};
